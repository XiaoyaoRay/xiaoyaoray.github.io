<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ä¿®æ”¹Alpine Dockerå®¹å™¨æ—¶åŒº</title>
    <url>/articles/555453948.html</url>
    <content><![CDATA[<h1 id="é€‚ç”¨å¯¹è±¡"><a href="#é€‚ç”¨å¯¹è±¡" class="headerlink" title="é€‚ç”¨å¯¹è±¡"></a>é€‚ç”¨å¯¹è±¡</h1><ul>
<li><p>ä½¿ç”¨ Alpine Linux å‘è¡Œç‰ˆçš„ Docker é•œåƒå®¹å™¨ã€‚</p>
</li>
<li><p>ä»…ä»…é€‚ç”¨äº<strong>æ²¡æœ‰</strong>å®‰è£…<code>uclibc</code>çš„ç³»ç»Ÿã€‚</p>
</li>
</ul>
<h1 id="ä¿®æ”¹Dockerfile"><a href="#ä¿®æ”¹Dockerfile" class="headerlink" title="ä¿®æ”¹Dockerfile"></a>ä¿®æ”¹Dockerfile</h1><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line">.....</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk add -U tzdata &amp;&amp; \</span></span><br><span class="line"><span class="bash">    cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \</span></span><br><span class="line"><span class="bash">    apk del tzdata</span></span><br><span class="line"></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h1 id="ç›´æ¥åœ¨å®¹å™¨å†…ä¿®æ”¹"><a href="#ç›´æ¥åœ¨å®¹å™¨å†…ä¿®æ”¹" class="headerlink" title="ç›´æ¥åœ¨å®¹å™¨å†…ä¿®æ”¹"></a>ç›´æ¥åœ¨å®¹å™¨å†…ä¿®æ”¹</h1><ul>
<li><p>è¿›å…¥å®¹å™¨å‘½ä»¤è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼ƒ docker <span class="built_in">exec</span> -it container_name /bin/sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£… timezone æ•°æ®åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼ƒ apk add -U tzdata</span><br><span class="line">ï¼ƒ ls /usr/share/zoneinfo</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†é˜²æ­¢æ·»åŠ å¤±è´¥ï¼ŒåŠ ä¸Š<code>-U</code>å‚æ•°ï¼Œæ›´æ–°ä»“å‚¨ç¼“å­˜ã€‚<br>åˆ—å‡ºå®‰è£…çš„æ—¶åŒºæ–‡ä»¶ï¼ŒéªŒè¯æ˜¯å¦ä¸‹è½½æˆåŠŸã€‚</p>
</li>
<li><p>æ‹·è´éœ€è¦çš„æ—¶åŒºæ–‡ä»¶åˆ°<code>localtime</code>ï¼Œå›½å†…éœ€è¦çš„æ˜¯<code>Asia/Shanghai</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼ƒ cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure>
</li>
<li><p>éªŒè¯æ—¶åŒº</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼ƒ date</span><br><span class="line">Tue Jan  9 22:53:46 CST 2018</span><br></pre></td></tr></table></figure>

<p><code>CST</code> å³ä¸º <code>ä¸­å›½æ ‡å‡†æ—¶é—´</code>ã€‚</p>
</li>
<li><p>ç§»é™¤æ—¶åŒºæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼ƒ apk del tzdata</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ä¿è¯å®¹å™¨çš„ç²¾ç®€å’Œè½»é‡ï¼Œç§»é™¤ä¸‹è½½çš„æ—¶åŒºæ–‡ä»¶ã€‚</p>
</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h1><p><a href="https://link.jianshu.com?t=https%3A%2F%2Fwiki.alpinelinux.org%2Fwiki%2FSetting_the_timezone" target="_blank" rel="noopener external nofollow noreferrer">https://wiki.alpinelinux.org/wiki/Setting_the_timezone</a></p>
<p><a href="https://www.jianshu.com/p/cd1636c94f9f" target="_blank" rel="noopener external nofollow noreferrer">https://www.jianshu.com/p/cd1636c94f9f</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Docker</tag>
        <tag>Apline</tag>
      </tags>
  </entry>
  <entry>
    <title>Apline Linux ç³»ç»Ÿç®€ä»‹</title>
    <url>/articles/1634017428.html</url>
    <content><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Alpine Linux æ˜¯å›´ç»• musl libc å’Œ busybox æ„å»ºçš„ã€‚è¿™ä½¿å¾—å®ƒæ¯”ä¼ ç»Ÿçš„GNU/Linuxå‘è¡Œç‰ˆæ›´å°ã€æ›´èŠ‚çœèµ„æºã€‚ä¸€ä¸ªAlpineå®¹å™¨å¤§å°ä¸è¶…è¿‡8MBï¼Œè€Œä¸€ä¸ªæœ€å°çš„ä¼ ç»ŸGNU/Linuxå®‰è£…åˆ°ç£ç›˜ä¸Šçš„éœ€è¦130MBå·¦å³çš„å­˜å‚¨ç©ºé—´ã€‚Alpine LInuxä¸ä»…æ˜¯ä¸€ä¸ªå®Œæ•´çš„Linuxç¯å¢ƒï¼Œè¿˜å¯ä»¥ä»ç‰ˆæœ¬åº“ä¸­è·å¾—å¤§é‡çš„è½¯ä»¶åŒ…ã€‚</p>
<p>ç³»ç»Ÿçš„äºŒè¿›åˆ¶åŒ…è¢«æ›´å¥½çš„ç²¾ç®€å’Œåˆ†å‰²ï¼Œä½¿å¾—å¯¹å®‰è£…çš„è€Œä»Šä¹‹å®æœ‰äº†æ›´å¤šçš„æ§åˆ¶æƒï¼Œè¿™åè¿‡æ¥åˆè®©ä½ çš„ç¯å¢ƒå°½å¯èƒ½åœ°ä¿æŒäº†å°è€Œé«˜æ•ˆã€‚</p>
<p>Alpine Linuxåœ¨è®¾è®¡æ—¶å°±è€ƒè™‘åˆ°äº†å®‰å…¨é—®é¢˜ã€‚æ‰€æœ‰çš„userlandäºŒè¿›åˆ¶æ–‡ä»¶éƒ½è¢«ç¼–è¯‘ä¸ºä½ç½®ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆPIEï¼‰ï¼Œå¹¶å¸¦æœ‰å †æ ˆç²‰ç¢ä¿æŠ¤ã€‚è¿™äº›å®‰å…¨ç‰¹æ€§å¯ä»¥é˜²æ­¢è¢«zero-dayæ¼æ´å’Œå…¶ä»–æ¼æ´åˆ©ç”¨ã€‚</p>
<a id="more"></a>

<h2 id="Apline-LinuxåŒ…ç®¡ç†"><a href="#Apline-LinuxåŒ…ç®¡ç†" class="headerlink" title="Apline LinuxåŒ…ç®¡ç†"></a>Apline LinuxåŒ…ç®¡ç†</h2><p>Apline Linuxä½¿ç”¨apkè¿›è¡ŒåŒ…ç®¡ç†ï¼Œé€šè¿‡apk â€“helpå‘½ä»¤æŸ¥çœ‹å®Œæ•´çš„ç®¡ç†å‘½ä»¤ï¼Œä¸‹é¢åˆ—ä¸¾å¸¸ç”¨çš„å‘½ä»¤ï¼š</p>
<h4 id="å‡çº§åŒ…"><a href="#å‡çº§åŒ…" class="headerlink" title="å‡çº§åŒ…"></a>å‡çº§åŒ…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apk update  <span class="comment"># æ›´æ–°æœ€æ–°æœ¬åœ°é•œåƒæº</span></span><br><span class="line">apk upgrade <span class="comment"># å‡çº§è½¯ä»¶</span></span><br><span class="line">apk add --upgrade busybox <span class="comment"># æŒ‡å®šå‡çº§éƒ¨åˆ†è½¯ä»¶åŒ…</span></span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…åŒ…"><a href="#å®‰è£…åŒ…" class="headerlink" title="å®‰è£…åŒ…"></a>å®‰è£…åŒ…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apk add openssh vim</span><br><span class="line">apk add --no-cache mysql-clinet</span><br><span class="line">apk add docker --update-cache --repository http://mirrors.ustc.edu.cn/alpine/v3.4/main/ --allow-untrusted</span><br></pre></td></tr></table></figure>

<h4 id="å¸è½½åˆ é™¤åŒ…"><a href="#å¸è½½åˆ é™¤åŒ…" class="headerlink" title="å¸è½½åˆ é™¤åŒ…"></a>å¸è½½åˆ é™¤åŒ…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apk del xxx</span><br></pre></td></tr></table></figure>

<h4 id="searchæœç´¢å¯ç”¨çš„åŒ…"><a href="#searchæœç´¢å¯ç”¨çš„åŒ…" class="headerlink" title="searchæœç´¢å¯ç”¨çš„åŒ…"></a>searchæœç´¢å¯ç”¨çš„åŒ…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apk search </span><br><span class="line">apk search -v <span class="string">'acf*'</span> <span class="comment"># é€šè¿‡åŒ…åæœç´¢</span></span><br><span class="line">apk search -v -d <span class="string">'docker'</span> <span class="comment"># é€šè¿‡æè¿°æ–‡ä»¶æœç´¢</span></span><br></pre></td></tr></table></figure>

<h4 id="infoæ˜¾ç¤ºåŒ…ä¿¡æ¯"><a href="#infoæ˜¾ç¤ºåŒ…ä¿¡æ¯" class="headerlink" title="infoæ˜¾ç¤ºåŒ…ä¿¡æ¯"></a>infoæ˜¾ç¤ºåŒ…ä¿¡æ¯</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apk info <span class="comment"># åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„åŒ…</span></span><br><span class="line">apk info -a zlib <span class="comment"># æ˜¾ç¤ºå®Œæ•´çš„è½¯ä»¶åŒ…ä¿¡æ¯</span></span><br><span class="line">apk info --who-owns /sbin/lbu <span class="comment"># æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶å±äºçš„åŒ…</span></span><br></pre></td></tr></table></figure>

<h2 id="Aplineé•œåƒæº"><a href="#Aplineé•œåƒæº" class="headerlink" title="Aplineé•œåƒæº"></a>Aplineé•œåƒæº</h2><h4 id="å›½å†…é•œåƒæº"><a href="#å›½å†…é•œåƒæº" class="headerlink" title="å›½å†…é•œåƒæº"></a>å›½å†…é•œåƒæº</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æ¸…åTUNAé•œåƒæºï¼šhttps://mirror.tuna.tsinghua.edu.cn/alpine/</span><br><span class="line">ä¸­ç§‘å¤§é•œåƒæºï¼šhttp://mirrors.ustc.edu.cn/alpine/</span><br><span class="line">é˜¿é‡Œäº‘é•œåƒæºï¼šhttp://mirrors.aliyun.com/alpine/</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®é•œåƒæº"><a href="#é…ç½®é•œåƒæº" class="headerlink" title="é…ç½®é•œåƒæº"></a>é…ç½®é•œåƒæº</h4><p>ä»¥é˜¿é‡Œäº‘é•œåƒæºä¸ºä¾‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -i <span class="string">"s|http://dl-cdn.alpinelinux.org|https://mirrors.aliyun.com|g"</span> /etc/apk/repositories</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://link.jianshu.com?t=https://wiki.alpinelinux.org/wiki/Alpine_Linux_Init_System" target="_blank" rel="noopener external nofollow noreferrer">https://wiki.alpinelinux.org/wiki/Alpine_Linux_Init_System</a></p>
<p><a href="https://alpinelinux.org/about/" target="_blank" rel="noopener external nofollow noreferrer">https://alpinelinux.org/about/</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Apline</tag>
      </tags>
  </entry>
  <entry>
    <title>AuthPointæ·»åŠ ADFS</title>
    <url>/articles/1631318906.html</url>
    <content><![CDATA[<h2 id="WatchGuard-Cloudæ·»åŠ ADFS-Resource"><a href="#WatchGuard-Cloudæ·»åŠ ADFS-Resource" class="headerlink" title="WatchGuard Cloudæ·»åŠ ADFS Resource"></a>WatchGuard Cloudæ·»åŠ ADFS Resource</h2><h3 id="è¿›å…¥åˆ°AuthPointé…ç½®ç•Œé¢"><a href="#è¿›å…¥åˆ°AuthPointé…ç½®ç•Œé¢" class="headerlink" title="è¿›å…¥åˆ°AuthPointé…ç½®ç•Œé¢"></a>è¿›å…¥åˆ°AuthPointé…ç½®ç•Œé¢</h3><p>åœ¨<code>Configure</code>ä¸­é€‰æ‹©<code>AuthPoint</code></p>
<p> <img src="https://image.ritboy.com/markdown/202004/881466b773319a7f8192b4e18b0ea8f4.jpg" alt="image-20190624102156098"></p>
<a id="more"></a>

<h3 id="æ·»åŠ ADFS-Resource"><a href="#æ·»åŠ ADFS-Resource" class="headerlink" title="æ·»åŠ ADFS Resource"></a>æ·»åŠ ADFS Resource</h3><ul>
<li><p>åœ¨AuthPointç•Œé¢é€‰æ‹©<code>Resource</code>ï¼Œ é€‰æ‹©<code>ADFS</code>å¹¶æ·»åŠ </p>
<p><img src="https://image.ritboy.com/markdown/202004/59b518ca47099cd8bc99d08bd523e8d8.jpg" alt="image-20190624102456597"></p>
</li>
<li><p>é…ç½®<code>ADFS</code>çš„åç§°ï¼Œç‚¹å‡»<code>SAVE</code>æŒ‰é’®</p>
<p><img src="https://image.ritboy.com/markdown/202004/4c39266acd8d7fc27a2b778d6562c004.jpg" alt="image-20190624102609496"></p>
</li>
<li><p>åœ¨Gatewayä¸­æ·»åŠ <code>ADFS</code> Resourceï¼Œå¹¶ç‚¹å‡»<code>SAVE</code>æŒ‰é’®ä¿å­˜</p>
<p><img src="https://image.ritboy.com/markdown/202004/18cd7f7ab05100e8b5a63cf862299046.jpg" alt="image-20190624103440130"></p>
</li>
<li><p>ä¸‹è½½<code>ADFS Agent</code></p>
<p><img src="https://image.ritboy.com/markdown/202004/fefecc25f898d684e365c2ddc9556580.jpg" alt="image-20190624103836616"></p>
</li>
</ul>
<h2 id="Windowsç³»ç»Ÿä¸­å®‰è£…å¹¶é…ç½®ADFS-Agent"><a href="#Windowsç³»ç»Ÿä¸­å®‰è£…å¹¶é…ç½®ADFS-Agent" class="headerlink" title="Windowsç³»ç»Ÿä¸­å®‰è£…å¹¶é…ç½®ADFS Agent"></a>Windowsç³»ç»Ÿä¸­å®‰è£…å¹¶é…ç½®ADFS Agent</h2><p>Windwos ç³»ç»Ÿä¸­å·²ç»å®‰è£…äº†<code>ADFS</code>æœåŠ¡ï¼Œå¦‚æœADFSæœåŠ¡ä¸Gatewayåœ¨ä¸åŒçš„ç³»ç»Ÿä¸­ï¼Œ<strong>è¯·å…³é—­<code>Gateway</code>æ‰€åœ¨ç³»ç»Ÿçš„é˜²ç«å¢™</strong>ï¼Œå¦åˆ™ADFS Agentä¼šå®‰è£…å¤±è´¥ã€‚</p>
<p><strong>ä»¥ä¸‹æ‰€æœ‰æ“ä½œå‡åœ¨Windows Server 2016 64bitä¸­</strong></p>
<h3 id="ADFS-Agentå®‰è£…"><a href="#ADFS-Agentå®‰è£…" class="headerlink" title="ADFS Agentå®‰è£…"></a>ADFS Agentå®‰è£…</h3><p>æŠŠADFS Agentå®‰è£…ç¨‹åºä¸é…ç½®æ–‡ä»¶æ”¾åœ¨<strong>åŒä¸€ä¸ªç›®å½•</strong>ä¸‹ï¼Œè¿è¡Œå®‰è£…ç¨‹åºã€‚ç„¶åç‚¹å‡»<code>Next</code>ä¸€ç›´ç­‰å¾…å®‰è£…å®Œæˆ</p>
<p>  <img src="https://image.ritboy.com/markdown/202004/8fcf9d0b53956d6b4e8d43535d786832.jpg" alt="image-20190624110318848"></p>
<h3 id="é…ç½®ADFS"><a href="#é…ç½®ADFS" class="headerlink" title="é…ç½®ADFS"></a>é…ç½®ADFS</h3><ul>
<li><p>æ‰“å¼€ADFS æ§åˆ¶å°</p>
<p> <img src="https://image.ritboy.com/markdown/202004/eb2e116dbbbd23f9665a856cc26fad42.jpg" alt="image-20190624111810048"></p>
</li>
</ul>
<h4 id="æ·»åŠ WatchGuardè®¤è¯"><a href="#æ·»åŠ WatchGuardè®¤è¯" class="headerlink" title="æ·»åŠ WatchGuardè®¤è¯"></a>æ·»åŠ WatchGuardè®¤è¯</h4><ul>
<li><p>ç¼–è¾‘<code>Multi-factor Authentication</code>ï¼Œ å¯¹<code>Service</code>ä¸‹<code>Authentication Methods</code>é€‰é¡¹å³é”®</p>
<p> <img src="https://image.ritboy.com/markdown/202004/9115bbd5c27ad7dbbde991a5cfb83189.jpg" alt="image-20190624112301990"></p>
</li>
<li><p>é€‰æ‹©<code>WatchGuard Multi Factor Authentication</code>ï¼Œç‚¹å‡»<code>OK</code>æŒ‰é’®</p>
<p><img src="https://image.ritboy.com/markdown/202004/15ed1ed50556f4b1fef4bb6b34123c3d.jpg" alt="image-20190624112501457"></p>
</li>
</ul>
<h4 id="æ·»åŠ Access-Control-Policy"><a href="#æ·»åŠ Access-Control-Policy" class="headerlink" title="æ·»åŠ Access Control Policy"></a>æ·»åŠ Access Control Policy</h4><ul>
<li><p>é€‰æ‹©<code>Access Control Policies</code>ï¼Œå³é”®æ·»åŠ <code>Policy</code></p>
<p> <img src="https://image.ritboy.com/markdown/202004/726258f5c2ee9a0ec6f512e621a94480.jpg" alt="image-20190624114321871"></p>
</li>
<li><p>æ·»åŠ Rule</p>
<p> <img src="https://image.ritboy.com/markdown/202004/807a356c856c6744ad8a40fd98adc509.jpg" alt="image-20190624152209222"></p>
</li>
</ul>
<h4 id="åº”ç”¨å·²æœ‰Access-Control-Policy"><a href="#åº”ç”¨å·²æœ‰Access-Control-Policy" class="headerlink" title="åº”ç”¨å·²æœ‰Access Control Policy"></a>åº”ç”¨å·²æœ‰Access Control Policy</h4><ul>
<li><p>åœ¨ADFSç®¡ç†ç•Œé¢ç‚¹å‡»<code>Relying Party Trusts</code>ï¼Œå³é”®å·²æœ‰çš„<code>Relying Party Trusts</code>ï¼ˆå¦‚æœæ²¡æœ‰è¯·æ·»åŠ ï¼‰é€‰æ‹©<code>Edit Access Control Policy ...</code></p>
<p> <img src="https://image.ritboy.com/markdown/202004/e78f56bc5209555e4a272201a4121f56.jpg" alt="image-20190624153326502"></p>
</li>
<li><p>åœ¨ç¼–è¾‘ç•Œé¢æ·»åŠ å·²æœ‰çš„Access Control Policy (New Access Control Policy)ï¼Œç‚¹å‡»<code>OK</code>æŒ‰é’®</p>
<p> <img src="https://image.ritboy.com/markdown/202004/7e19e079f5a6405dfd3f4fdf041b1ae4.jpg" alt="image-20190624154157961"></p>
</li>
<li><p>é‡å¯ADFSæœåŠ¡</p>
<p> <img src="https://image.ritboy.com/markdown/202004/489b3c9fadf7b28f33f4a7018ff99283.jpg" alt="image-20190624161537667"></p>
</li>
</ul>
<h3 id="è®¿é—®ADFSé¡µé¢"><a href="#è®¿é—®ADFSé¡µé¢" class="headerlink" title="è®¿é—®ADFSé¡µé¢"></a>è®¿é—®ADFSé¡µé¢</h3><ul>
<li><p><code>https://&lt; domain &gt;/adfs/ls/idpinitiatedsignon.aspx</code> (ADFSæœåŠ¡æ‰€åœ¨çš„åŸŸåï¼‰æˆ–è€…<code>https://127.0.0.1/adfs/ls/idpinitiatedsignon.aspx</code>ï¼Œ<strong>æ³¨æ„ï¼šé€‰æ‹©MFAçš„Relying Party Trusts</strong></p>
<p> <img src="https://image.ritboy.com/markdown/202004/fa78047105e590e2a99220840099e015.jpg" alt="image-20190624163658668"></p>
</li>
<li><p>è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»å½•</p>
<p> <img src="https://image.ritboy.com/markdown/202004/aa627a58224e5e2789b98e71a202545b.jpg" alt="image-20190624163448547"></p>
</li>
<li><p>MFAè®¤è¯</p>
<p><img src="https://image.ritboy.com/markdown/202004/37a150d28540a8bff61de3927e51c00b.jpg" alt="image-20190624164040464"></p>
</li>
</ul>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://confluence.watchguard.com/display/WGQA/ADFS+agent" target="_blank" rel="noopener external nofollow noreferrer">https://confluence.watchguard.com/display/WGQA/ADFS+agent</a></p>
]]></content>
      <categories>
        <category>WatchGuard</category>
        <category>ADFS</category>
      </categories>
      <tags>
        <tag>WatchGuard</tag>
      </tags>
  </entry>
  <entry>
    <title>AuthPointæ·»åŠ SAML</title>
    <url>/articles/4078729915.html</url>
    <content><![CDATA[<h2 id="FireBox-Web-UIé…ç½®"><a href="#FireBox-Web-UIé…ç½®" class="headerlink" title="FireBox Web UIé…ç½®"></a>FireBox Web UIé…ç½®</h2><h3 id="WatchGuard-Cloud-UIä¸Šè·å–METADAT-URL"><a href="#WatchGuard-Cloud-UIä¸Šè·å–METADAT-URL" class="headerlink" title="WatchGuard Cloud UIä¸Šè·å–METADAT URL"></a>WatchGuard Cloud UIä¸Šè·å–<code>METADAT URL</code></h3><p>æ‰“å¼€WatchGuard Cloud UI(æ¯”å¦‚ï¼š<a href="https://staging.cloud.watchguard.com/" target="_blank" rel="noopener external nofollow noreferrer">https://staging.cloud.watchguard.com</a>)ï¼Œç„¶åé€šè¿‡è´¦æˆ·å¯†ç ç™»å½•å¹¶è¿›å…¥åˆ°AuthPointç•Œé¢ã€‚</p>
<ul>
<li>åœ¨<code>Resources</code>ç•Œé¢æ–°å»º<strong>Certificate</strong></li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/70bfbce4f4280d5bcf95a73261411e1b.jpg" alt="image-20190423144332795"></p>
<a id="more"></a>

<ul>
<li><p>åœ¨<code>CERTIFICATE</code>ç•Œé¢ä¸Šå¤åˆ¶<code>METADATA URL</code></p>
<p><img src="https://image.ritboy.com/markdown/202004/a2b14d83585d6a8383452c189c861d40.jpg" alt="image-20190423144453467"></p>
</li>
</ul>
<h3 id="ç™»å½•FireBox-UI"><a href="#ç™»å½•FireBox-UI" class="headerlink" title="ç™»å½•FireBox UI"></a>ç™»å½•FireBox UI</h3><p>ç™»å½•åˆ°FireBox Web UI(æ¯”å¦‚ï¼šhttps://&lt; firebox ip &gt;:8080)ï¼Œç„¶åé€šè¿‡è´¦å·å’Œå¯†ç ç™»å½•è¿›å…¥FireBoxã€‚</p>
<h3 id="FireBox-Web-UIé…ç½®Access-Portal"><a href="#FireBox-Web-UIé…ç½®Access-Portal" class="headerlink" title="FireBox Web UIé…ç½®Access Portal"></a>FireBox Web UIé…ç½®Access Portal</h3><p>åœ¨FireBox Web UIä¸Šé€‰æ‹©<strong>Subscription Services â€“&gt; Access Portal</strong>.å¯èƒ½éœ€è¦å…ˆç‚¹å‡»ğŸ”“</p>
<p> <img src="https://image.ritboy.com/markdown/202004/3435d7eab366308cb11af1fa2d9d3e75.jpg" alt="image-20190422175756919"></p>
<h4 id="æ·»åŠ Applications"><a href="#æ·»åŠ Applications" class="headerlink" title="æ·»åŠ Applications"></a>æ·»åŠ Applications</h4><ul>
<li><p>åœ¨<strong>Applicationsä¸­ADDæŒ‰é’®</strong>æ·»åŠ SP(Service Provider)ï¼Œæ¯”å¦‚ï¼šWeb Application</p>
<p><img src="https://image.ritboy.com/markdown/202004/5bb25872385fb9070dca5516fe23673e.jpg" alt="image-20190422180250765"></p>
</li>
<li><p>é…ç½®Applicationçš„ä¿¡æ¯</p>
<p><img src="https://image.ritboy.com/markdown/202004/b038560fd9cdc40261860fd8796d778f.jpg" alt="image-20190422180750195"></p>
</li>
</ul>
<h4 id="é…ç½®SAML"><a href="#é…ç½®SAML" class="headerlink" title="é…ç½®SAML"></a>é…ç½®SAML</h4><p>åœ¨Access Portalé¡µé¢é€‰æ‹©<code>SAML</code>é¡µé¢</p>
<p><img src="https://image.ritboy.com/markdown/202004/cba23577b74ed78b45c57ff6b56891f8.jpg" alt="image-20190422181014843"></p>
<ul>
<li>å‹¾é€‰<code>Enable Accesss Portal</code></li>
<li>å‹¾é€‰<code>Enable SAML</code></li>
<li>é…ç½®<code>Idp Name</code>ï¼Œå†…å®¹è‡ªå®šä¹‰ã€‚é…ç½®åå†SAMLç™»å½•ç•Œé¢ä¼šçœ‹åˆ°è¯¥ä¿¡æ¯</li>
<li>é…ç½®<code>Host Name</code>ï¼Œå†…å®¹è‡ªå®šä¹‰ã€‚æ³¨æ„ï¼šéœ€è¦åœ¨æœ¬åœ°çš„<code>hostsæ–‡ä»¶</code>æŠŠ<code>FireBox</code>çš„IPåœ°å€ä¸è¯¥Host Nameå¯¹åº”(macOSä¸­çš„<code>/etc/hosts</code>æ–‡ä»¶)</li>
<li>é…ç½®<code>Idp Metadata URL</code>ï¼Œå†…å®¹ä¸ºä»<strong>WatchGuard Cloud UI</strong>ä¸Šå¤åˆ¶åˆ°çš„<code>METADATA URL</code>æ•°æ®(æ“ä½œè¯·è§ï¼š<strong>WatchGuard Cloud UIä¸Šè·å–<code>METADAT URL</code></strong>)</li>
<li>æœ€åç‚¹å‡»<code>SAVE</code>æŒ‰é’®</li>
</ul>
<h3 id="FireBox-Web-UIé…ç½®Users-and-Groups"><a href="#FireBox-Web-UIé…ç½®Users-and-Groups" class="headerlink" title="FireBox Web UIé…ç½®Users and Groups"></a>FireBox Web UIé…ç½®Users and Groups</h3><p>è¿›å…¥åˆ°<code>Users and Groups</code>ç•Œé¢ï¼Œå¯èƒ½éœ€è¦å…ˆç‚¹å‡»ä¸‹ğŸ”“</p>
<p> <img src="https://image.ritboy.com/markdown/202004/6c04a3f1fccd39ba8973249d0cbb7e35.jpg" alt="image-20190422183117703"></p>
<h4 id="ç‚¹å‡»ADDæŒ‰é’®"><a href="#ç‚¹å‡»ADDæŒ‰é’®" class="headerlink" title="ç‚¹å‡»ADDæŒ‰é’®"></a>ç‚¹å‡»ADDæŒ‰é’®</h4><p> <img src="https://image.ritboy.com/markdown/202004/c9c329bf3bd2315235a481b6d6340c0e.jpg" alt="image-20190423094359746"></p>
<h4 id="é…ç½®ç”¨æˆ·ä¿¡æ¯"><a href="#é…ç½®ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="é…ç½®ç”¨æˆ·ä¿¡æ¯"></a>é…ç½®ç”¨æˆ·ä¿¡æ¯</h4><ul>
<li><p>typeï¼šé€‰æ‹©<code>User</code></p>
</li>
<li><p>Nameï¼šè‡ªå®šä¹‰ï¼Œæ³¨æ„éœ€è¦åœ¨WatchGuard Cloudä¸­æœ‰ç›¸åº”çš„ç”¨æˆ·æ‰èƒ½æ­£å¸¸ä½¿ç”¨</p>
</li>
<li><p>Authentication Serverï¼šé€‰æ‹©<code>AuthPoint</code></p>
</li>
<li><p>å…¶ä½™çš„ä¸ºé»˜è®¤å€¼</p>
</li>
<li><p>ç‚¹å‡»<code>OK</code>ä¿å­˜</p>
<p><img src="https://image.ritboy.com/markdown/202004/c4ad6b7e87b3903cd543948848daa07a.jpg" alt="image-20190423094542736"></p>
</li>
</ul>
<h3 id="è·å–EntityIDï¼ŒAssertion-Consumer-Service-ACS-URLï¼ŒCertificate"><a href="#è·å–EntityIDï¼ŒAssertion-Consumer-Service-ACS-URLï¼ŒCertificate" class="headerlink" title="è·å–EntityIDï¼ŒAssertion Consumer Service(ACS) URLï¼ŒCertificate"></a>è·å–EntityIDï¼ŒAssertion Consumer Service(ACS) URLï¼ŒCertificate</h3><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åœ°å€ï¼šhttps://&lt; your Host Name &gt;/auth/samlï¼Œå…¶ä¸­<code>Host Name</code>ä¸ºé…ç½®<strong>SAML</strong>æ—¶å¡«çš„ï¼Œå¹¶ä¸”è¯¥åŸŸåéœ€è¦åœ¨<code>hostsæ–‡ä»¶</code>ä¸­é…ç½®</p>
<p> <img src="https://image.ritboy.com/markdown/202004/3fe816337e0dbe77db5b46069278acb2.jpg" alt="image-20190423095313020"></p>
<h2 id="WatchGuard-Cloud-Web-UIé…ç½®AuthPoint"><a href="#WatchGuard-Cloud-Web-UIé…ç½®AuthPoint" class="headerlink" title="WatchGuard Cloud Web UIé…ç½®AuthPoint"></a>WatchGuard Cloud Web UIé…ç½®AuthPoint</h2><h3 id="è¿›å…¥åˆ°Resourceç•Œé¢"><a href="#è¿›å…¥åˆ°Resourceç•Œé¢" class="headerlink" title="è¿›å…¥åˆ°Resourceç•Œé¢"></a>è¿›å…¥åˆ°Resourceç•Œé¢</h3><ul>
<li><p>æ‰“å¼€WatchGuard Cloud UI(æ¯”å¦‚ï¼š<a href="https://staging.cloud.watchguard.com/" target="_blank" rel="noopener external nofollow noreferrer">https://staging.cloud.watchguard.com</a>)ï¼Œå¹¶ä½¿ç”¨è´¦æˆ·å¯†ç ç™»å½•</p>
<p><img src="https://image.ritboy.com/markdown/202004/943b6e117fff84befee9a9fbe86ad7d9.jpg" alt="image-20190422172127535"></p>
</li>
<li><p>è¿›å…¥åˆ°AuthPointç•Œé¢</p>
<p><img src="https://image.ritboy.com/markdown/202004/5350d262716b3cc8fa6e1eb65ee4f11e.jpg" alt="image-20190422172345367"></p>
</li>
<li><p>è¿›å…¥åˆ°Resourceç•Œé¢</p>
<p><img src="https://image.ritboy.com/markdown/202004/7c074ffd360fedb3a4f5172a86bbc602.jpg" alt="image-20190423100444852"></p>
</li>
</ul>
<h3 id="æ·»åŠ SAML-Resource"><a href="#æ·»åŠ SAML-Resource" class="headerlink" title="æ·»åŠ SAML Resource"></a>æ·»åŠ SAML Resource</h3><h4 id="é€‰æ‹©SAML-å¹¶ç‚¹å‡»Add-ResourceæŒ‰é’®"><a href="#é€‰æ‹©SAML-å¹¶ç‚¹å‡»Add-ResourceæŒ‰é’®" class="headerlink" title="é€‰æ‹©SAML,å¹¶ç‚¹å‡»Add ResourceæŒ‰é’®"></a>é€‰æ‹©SAML,å¹¶ç‚¹å‡»<code>Add Resource</code>æŒ‰é’®</h4><p> <img src="https://image.ritboy.com/markdown/202004/c6d1781673fdc5efc7442201ec7d1b6c.jpg" alt="image-20190423100721545"></p>
<h4 id="é…ç½®æ·»åŠ SAMLä¿¡æ¯"><a href="#é…ç½®æ·»åŠ SAMLä¿¡æ¯" class="headerlink" title="é…ç½®æ·»åŠ SAMLä¿¡æ¯"></a>é…ç½®æ·»åŠ SAMLä¿¡æ¯</h4><ul>
<li><p><strong>Name</strong>ï¼šè‡ªå®šä¹‰</p>
</li>
<li><p><strong>Application Type</strong>: é€‰æ‹©Firebox Access Portal</p>
</li>
<li><p><strong>Service Provider Entity ID</strong> : ç²˜è´´ä»<code>https://&lt; your Host Name &gt;/auth/saml</code>ç½‘é¡µä¸Šå¤åˆ¶çš„EntityID</p>
</li>
<li><p><strong>Assertion Consumer Service</strong>ï¼šç²˜è´´ä»<code>https://&lt; your Host Name &gt;/auth/saml</code>ç½‘é¡µä¸Šå¤åˆ¶çš„Assertion Consumer Service URL</p>
</li>
<li><p><strong>Choose File</strong>ï¼šé€‰æ‹©ä»<code>https://&lt; your Host Name &gt;/auth/saml</code>ä¸‹è½½çš„è¯ä¹¦</p>
</li>
<li><p>ç‚¹å‡»<strong>SAVE</strong>æŒ‰é’®</p>
<p><img src="https://image.ritboy.com/markdown/202004/0e87c9b03ae3c4db3e24a075de8d4f8c.jpg" alt="image-20190423100846010"></p>
</li>
</ul>
<h3 id="æ·»åŠ Groupå’ŒUser"><a href="#æ·»åŠ Groupå’ŒUser" class="headerlink" title="æ·»åŠ Groupå’ŒUser"></a>æ·»åŠ Groupå’ŒUser</h3><h4 id="æ·»åŠ Group"><a href="#æ·»åŠ Group" class="headerlink" title="æ·»åŠ Group"></a>æ·»åŠ Group</h4><ul>
<li><p>ç‚¹å‡»Add GroupæŒ‰é’®</p>
<p><img src="https://image.ritboy.com/markdown/202004/cb0682aefc9389c79ab6342850ade600.jpg" alt="image-20190423103410439"></p>
</li>
<li><p>æ·»åŠ Policy, é€‰æ‹©<code>SAML</code> Resource</p>
</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/13a4710ecc37412287b4bd05a413a2b9.jpg" alt="image-20190423103457822"></p>
<ul>
<li>ç‚¹å‡»<strong>SAVE</strong>æŒ‰é’®</li>
</ul>
<h4 id="æ·»åŠ User"><a href="#æ·»åŠ User" class="headerlink" title="æ·»åŠ User"></a>æ·»åŠ User</h4><ul>
<li><p>ç‚¹å‡»Add UseræŒ‰é’®<img src="https://image.ritboy.com/markdown/202004/1ce3109e6e35fa63b9950066a87b5a2e.jpg" alt="image-20190423103605963"></p>
</li>
<li><p>é…ç½®æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œé‚®ç®±åœ°å€éœ€è¦çœŸå®ç”¨æˆ·æ¿€æ´»</p>
<p><img src="https://image.ritboy.com/markdown/202004/e717f9cc095b807a629e05128c7950ce.jpg" alt="image-20190423103630457"></p>
</li>
</ul>
<h4 id="æ¿€æ´»ç”¨æˆ·"><a href="#æ¿€æ´»ç”¨æˆ·" class="headerlink" title="æ¿€æ´»ç”¨æˆ·"></a>æ¿€æ´»ç”¨æˆ·</h4><p>ä½¿ç”¨æ·»åŠ ç”¨æˆ·çš„çš„é‚®ç®±ï¼Œè®¾ç½®å¯†ç å¹¶ç”¨æ‰‹æœºAppæ‰«é‚®ä»¶ä¸­äºŒç»´ç æ¿€æ´»è¯¥è¯¥è´¦æˆ·</p>
<h3 id="ç™»å½•ç”¨æˆ·"><a href="#ç™»å½•ç”¨æˆ·" class="headerlink" title="ç™»å½•ç”¨æˆ·"></a>ç™»å½•ç”¨æˆ·</h3><ul>
<li>SAML AuthPointç™»å½•åœ°å€ï¼šhttp://&lt; firebox ip &gt;</li>
<li>ç™»å½•ç•Œé¢è¾“å…¥ç”¨æˆ·</li>
<li>ç™»å½•ç•Œé¢è¾“å…¥å¯†ç </li>
<li>æ‰‹æœºAppç¡®è®¤ç™»å½•</li>
</ul>
]]></content>
      <categories>
        <category>WatchGuard</category>
        <category>SAML</category>
      </categories>
      <tags>
        <tag>SAML</tag>
      </tags>
  </entry>
  <entry>
    <title>AuthPointæ·»åŠ RADIUS</title>
    <url>/articles/1930033449.html</url>
    <content><![CDATA[<h2 id="Windowsä¸Šå®‰è£…Gateway"><a href="#Windowsä¸Šå®‰è£…Gateway" class="headerlink" title="Windowsä¸Šå®‰è£…Gateway"></a>Windowsä¸Šå®‰è£…Gateway</h2><h3 id="ä¸‹è½½Gatewayè½¯ä»¶"><a href="#ä¸‹è½½Gatewayè½¯ä»¶" class="headerlink" title="ä¸‹è½½Gatewayè½¯ä»¶"></a>ä¸‹è½½Gatewayè½¯ä»¶</h3><p>ä¸‹è½½å®Œæˆåå¤åˆ¶åˆ°Gatewayçš„Windowsä¸»æœºä¸Š</p>
<p>åœ°å€ï¼š <a href="https://staging.deu.cloud.watchguard.com/services/auth/general/download" target="_blank" rel="noopener external nofollow noreferrer">https://staging.deu.cloud.watchguard.com/services/auth/general/download</a></p>
<p><img src="https://image.ritboy.com/markdown/202004/f28920efd01d6d0e2142886c772c571b.jpg" alt="image-20190424162937266"></p>
<a id="more"></a>

<h3 id="è·å–Gateway-Registration-Key"><a href="#è·å–Gateway-Registration-Key" class="headerlink" title="è·å–Gateway Registration Key"></a>è·å–Gateway Registration Key</h3><p><a href="https://www.watchguard.com/help/docs/help-center/en-US/Content/en-US/authpoint/gateway-registration-key.html" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘æ–‡æ¡£</a></p>
<ul>
<li><p>ç‚¹å‡»æ·»åŠ Gateway</p>
<p><img src="https://image.ritboy.com/markdown/202004/6cc5f8fc71d8c106d32044876baac2bf.jpg" alt="image-20190424163443007"></p>
</li>
<li><p>ç¼–è¾‘Gatewayç•Œé¢è·å–<code>Gateway Registration Key</code>(<strong>æ¿€æ´»åä¸èƒ½å†çœ‹åˆ°è¯¥Key</strong>)</p>
</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/470b36ea83f26bd47769511c07122f51.jpg" alt="image-20190424163602561"></p>
<h3 id="ç³»ç»Ÿä¸­å®‰è£…Gateway"><a href="#ç³»ç»Ÿä¸­å®‰è£…Gateway" class="headerlink" title="ç³»ç»Ÿä¸­å®‰è£…Gateway"></a>ç³»ç»Ÿä¸­å®‰è£…Gateway</h3><p>å®‰è£…æ—¶è¾“å…¥<code>Gateway Registration Key</code></p>
<p> <img src="https://image.ritboy.com/markdown/202004/334159dc4040d032fa7bd7a36960f50c.jpg" alt="img"></p>
<h2 id="Firebox-Web-UIé…ç½®RADIUS"><a href="#Firebox-Web-UIé…ç½®RADIUS" class="headerlink" title="Firebox Web UIé…ç½®RADIUS"></a>Firebox Web UIé…ç½®RADIUS</h2><h3 id="è¿›å…¥åˆ°RADIUSç¼–è¾‘ç•Œé¢"><a href="#è¿›å…¥åˆ°RADIUSç¼–è¾‘ç•Œé¢" class="headerlink" title="è¿›å…¥åˆ°RADIUSç¼–è¾‘ç•Œé¢"></a>è¿›å…¥åˆ°RADIUSç¼–è¾‘ç•Œé¢</h3><p><img src="https://image.ritboy.com/markdown/202004/6056757b34b9960c5c852c6ef6107616.jpg" alt="image-20190424164257510"></p>
<h3 id="é…ç½®RADIUSä¿¡æ¯"><a href="#é…ç½®RADIUSä¿¡æ¯" class="headerlink" title="é…ç½®RADIUSä¿¡æ¯"></a>é…ç½®RADIUSä¿¡æ¯</h3><p><strong>éœ€è¦æ‰“å¼€ç¼–è¾‘é”</strong></p>
<p><img src="https://image.ritboy.com/markdown/202004/f8b6ee82a30078f91b3805acfc757d26.jpg" alt="image-20190424164434698"></p>
<ul>
<li>æ‰“å¼€<code>Enable RADIUS Server</code></li>
<li>IP address: Gatewayæ‰€åœ¨ä¸»æœºçš„IPåœ°å€</li>
<li>Portï¼š1812(é»˜è®¤å€¼)</li>
<li>Share Secretï¼š è‡ªå®šä¹‰</li>
<li>Confirm Secretï¼š ç¡®è®¤<code>Share Secret</code></li>
<li>å…¶ä½™çœ‹éœ€æ±‚é…ç½®</li>
<li>ç‚¹å‡»<code>SAVE</code>ä¿å­˜é…ç½®</li>
</ul>
<h3 id="å¼€å¯Fireboxä¸Š4100ç«¯å£è®¿é—®"><a href="#å¼€å¯Fireboxä¸Š4100ç«¯å£è®¿é—®" class="headerlink" title="å¼€å¯Fireboxä¸Š4100ç«¯å£è®¿é—®"></a>å¼€å¯Fireboxä¸Š4100ç«¯å£è®¿é—®</h3><ul>
<li>è¿›å…¥åˆ°Policiesç•Œé¢</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/2d77a94fd158c12d2e6a02839234637f.jpg" alt="image-20190424164949941"></p>
<ul>
<li>å¼€å¯è®¿é—®</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/a5b57515e0ca96f660e414ab8f271355.jpg" alt="image-20190424165029086"></p>
<h2 id="WatchGuard-Cloud-Web-UIé…ç½®"><a href="#WatchGuard-Cloud-Web-UIé…ç½®" class="headerlink" title="WatchGuard Cloud Web UIé…ç½®"></a>WatchGuard Cloud Web UIé…ç½®</h2><h3 id="æ·»åŠ RADIUS-Client"><a href="#æ·»åŠ RADIUS-Client" class="headerlink" title="æ·»åŠ RADIUS Client"></a>æ·»åŠ RADIUS Client</h3><h4 id="ç‚¹å‡»Add-ResourceæŒ‰é’®"><a href="#ç‚¹å‡»Add-ResourceæŒ‰é’®" class="headerlink" title="ç‚¹å‡»Add ResourceæŒ‰é’®"></a>ç‚¹å‡»<code>Add Resource</code>æŒ‰é’®</h4><p><img src="https://image.ritboy.com/markdown/202004/c811d8a8c03ebf119e5875ca318614fc.jpg" alt="image-20190424165305479"></p>
<h4 id="é…ç½®RADIUS-Clientä¿¡æ¯"><a href="#é…ç½®RADIUS-Clientä¿¡æ¯" class="headerlink" title="é…ç½®RADIUS Clientä¿¡æ¯"></a>é…ç½®RADIUS Clientä¿¡æ¯</h4><p><img src="https://image.ritboy.com/markdown/202004/269e630d7972e114182764e840c7cfe1.jpg" alt="image-20190424165351293"></p>
<ul>
<li>Nameï¼š è‡ªå®šä¹‰</li>
<li>RADIUS client trusted IP or FQDNï¼šFireboxçš„IPåœ°å€</li>
<li>Shared Secret ï¼šFireboxé…ç½®RADIUSæ—¶é…ç½®çš„<strong>Secret</strong></li>
<li>ç‚¹å‡»<code>SAVE</code>æŒ‰é’®ä¿å­˜</li>
</ul>
<h3 id="RADIUS-Clientç»‘å®šåˆ°Gateway"><a href="#RADIUS-Clientç»‘å®šåˆ°Gateway" class="headerlink" title="RADIUS Clientç»‘å®šåˆ°Gateway"></a>RADIUS Clientç»‘å®šåˆ°Gateway</h3><p><img src="https://image.ritboy.com/markdown/202004/be9188fe36b27954488b43778c4b9b9c.jpg" alt="image-20190424165657497"></p>
<ul>
<li>Portï¼š Fireboxé…ç½®RADIUæ—¶é…ç½®çš„ç«¯å£</li>
<li>Select a RADIUS resourceï¼šé€‰æ‹©æ·»åŠ çš„<code>RADIUS Client</code></li>
</ul>
<h3 id="æ·»åŠ Groupå’ŒUser"><a href="#æ·»åŠ Groupå’ŒUser" class="headerlink" title="æ·»åŠ Groupå’ŒUser"></a>æ·»åŠ Groupå’ŒUser</h3><h4 id="æ·»åŠ Group"><a href="#æ·»åŠ Group" class="headerlink" title="æ·»åŠ Group"></a>æ·»åŠ Group</h4><ul>
<li><p>ç‚¹å‡»Add GroupæŒ‰é’®</p>
<p><img src="https://image.ritboy.com/markdown/202004/cb0682aefc9389c79ab6342850ade600.jpg" alt="image-20190423103410439"></p>
</li>
<li><p>æ·»åŠ Policy, é€‰æ‹©<code>RADIUS Clicet</code></p>
</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/13a4710ecc37412287b4bd05a413a2b9.jpg" alt="image-20190423103457822"></p>
<ul>
<li>ç‚¹å‡»<strong>SAVE</strong>æŒ‰é’®</li>
</ul>
<h4 id="æ·»åŠ User"><a href="#æ·»åŠ User" class="headerlink" title="æ·»åŠ User"></a>æ·»åŠ User</h4><ul>
<li><p>ç‚¹å‡»Add UseræŒ‰é’®</p>
<p><img src="https://image.ritboy.com/markdown/202004/1ce3109e6e35fa63b9950066a87b5a2e.jpg" alt="image-20190423103605963"></p>
</li>
<li><p>é…ç½®æ–°ç”¨æˆ·ä¿¡æ¯ï¼Œé‚®ç®±åœ°å€éœ€è¦çœŸå®ç”¨æˆ·æ¿€æ´»</p>
</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/e717f9cc095b807a629e05128c7950ce.jpg" alt="image-20190423103630457"></p>
<h4 id="æ¿€æ´»ç”¨æˆ·"><a href="#æ¿€æ´»ç”¨æˆ·" class="headerlink" title="æ¿€æ´»ç”¨æˆ·"></a>æ¿€æ´»ç”¨æˆ·</h4><p>ä½¿ç”¨æ·»åŠ ç”¨æˆ·çš„çš„é‚®ç®±ï¼Œè®¾ç½®å¯†ç å¹¶ç”¨æ‰‹æœºAppæ‰«é‚®ä»¶ä¸­äºŒç»´ç æ¿€æ´»è¯¥è¯¥è´¦æˆ·</p>
<h3 id="ç™»å½•ç”¨æˆ·"><a href="#ç™»å½•ç”¨æˆ·" class="headerlink" title="ç™»å½•ç”¨æˆ·"></a>ç™»å½•ç”¨æˆ·</h3><ul>
<li>SAML AuthPointç™»å½•åœ°å€ï¼šhttp://&lt; firebox ip &gt;:4100</li>
<li>ç™»å½•ç•Œé¢è¾“å…¥ç”¨æˆ·</li>
<li>ç™»å½•ç•Œé¢è¾“å…¥å¯†ç </li>
<li>æ‰‹æœºAppç¡®è®¤ç™»å½•</li>
</ul>
]]></content>
      <categories>
        <category>WatchGuard</category>
        <category>RADIUS</category>
      </categories>
      <tags>
        <tag>WatchGuard</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7å®‰è£…pythonè™šæ‹Ÿè¿è¡Œç¯å¢ƒ</title>
    <url>/articles/2139646571.html</url>
    <content><![CDATA[<h4 id="å®‰è£…PIP"><a href="#å®‰è£…PIP" class="headerlink" title="å®‰è£…PIP"></a>å®‰è£…PIP</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ray ~]<span class="comment"># yum -y install python-pip</span></span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…Virtualenv"><a href="#å®‰è£…Virtualenv" class="headerlink" title="å®‰è£…Virtualenv"></a>å®‰è£…Virtualenv</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ray ~]<span class="comment"># pip install virtualenv</span></span><br><span class="line">[root@ray ~]<span class="comment"># virtualenv --version</span></span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h4 id="å®‰è£…æ–°çš„Pythonç‰ˆæœ¬"><a href="#å®‰è£…æ–°çš„Pythonç‰ˆæœ¬" class="headerlink" title="å®‰è£…æ–°çš„Pythonç‰ˆæœ¬"></a>å®‰è£…æ–°çš„Pythonç‰ˆæœ¬</h4><ul>
<li><p>å®‰è£…ç¼–è¯‘éœ€è¦çš„åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ray ~]<span class="comment"># yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸‹è½½pythonæºç </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ray ~]<span class="comment"># wget https://www.python.org/ftp/python/3.6.5/Python-3.6.5.tar.xz</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–è¯‘æºç </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ray ~]<span class="comment"># tar -xvjf Python-3.6.5.tar.xz</span></span><br><span class="line">[root@ray ~]<span class="comment"># cd Python-3.6.5</span></span><br><span class="line">[root@ray ~]<span class="comment"># ./configure prefix=/usr/local/python3</span></span><br><span class="line">[root@ray ~]<span class="comment"># make &amp; make install</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ray pythonenv]<span class="comment"># virtualenv -p /usr/local/python3/bin/python3.6 python36</span></span><br><span class="line">Running virtualenv with interpreter /usr/<span class="built_in">local</span>/python3/bin/python3.6</span><br><span class="line">Using base prefix <span class="string">'/usr/local/python3'</span></span><br><span class="line">New python executable <span class="keyword">in</span> /pythonenv/python36/bin/python3.6</span><br><span class="line">Also creating executable <span class="keyword">in</span> /pythonenv/python36/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨python</span></span><br><span class="line">[root@ray python36]<span class="comment"># source bin/activate</span></span><br><span class="line">(python36) [root@ray python36]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://blog.csdn.net/blueheart20/article/details/70598031" target="_blank" rel="noopener external nofollow noreferrer">https://blog.csdn.net/blueheart20/article/details/70598031</a></p>
<p><a href="https://www.cnblogs.com/JahanGu/p/7452527.html" target="_blank" rel="noopener external nofollow noreferrer">https://www.cnblogs.com/JahanGu/p/7452527.html</a></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>CentOS</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>AuthPointæ·»åŠ LogonApp</title>
    <url>/articles/3209066549.html</url>
    <content><![CDATA[<h2 id="Windowsä¸Šå®‰è£…Gateway"><a href="#Windowsä¸Šå®‰è£…Gateway" class="headerlink" title="Windowsä¸Šå®‰è£…Gateway"></a>Windowsä¸Šå®‰è£…Gateway</h2><h3 id="ä¸‹è½½Gatewayè½¯ä»¶"><a href="#ä¸‹è½½Gatewayè½¯ä»¶" class="headerlink" title="ä¸‹è½½Gatewayè½¯ä»¶"></a>ä¸‹è½½Gatewayè½¯ä»¶</h3><p>ä¸‹è½½å®Œæˆåå¤åˆ¶åˆ°Gatewayçš„Windowsä¸»æœºä¸Š</p>
<p>åœ°å€ï¼š <a href="https://staging.deu.cloud.watchguard.com/services/auth/general/download" target="_blank" rel="noopener external nofollow noreferrer">https://staging.deu.cloud.watchguard.com/services/auth/general/download</a></p>
<p><img src="https://image.ritboy.com/markdown/202004/f28920efd01d6d0e2142886c772c571b.jpg" alt="image-20190424162937266"></p>
<a id="more"></a>

<h3 id="è·å–Gateway-Registration-Key"><a href="#è·å–Gateway-Registration-Key" class="headerlink" title="è·å–Gateway Registration Key"></a>è·å–Gateway Registration Key</h3><p><a href="https://www.watchguard.com/help/docs/help-center/en-US/Content/en-US/authpoint/gateway-registration-key.html" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘æ–‡æ¡£</a></p>
<ul>
<li><p>ç‚¹å‡»æ·»åŠ Gateway</p>
<p><img src="https://image.ritboy.com/markdown/202004/6cc5f8fc71d8c106d32044876baac2bf.jpg" alt="image-20190424163443007"></p>
</li>
<li><p>ç¼–è¾‘Gatewayç•Œé¢è·å–<code>Gateway Registration Key</code>(<strong>æ¿€æ´»åä¸èƒ½å†çœ‹åˆ°è¯¥Key</strong>)</p>
</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/470b36ea83f26bd47769511c07122f51.jpg" alt="image-20190424163602561"></p>
<h3 id="ç³»ç»Ÿä¸­å®‰è£…Gateway"><a href="#ç³»ç»Ÿä¸­å®‰è£…Gateway" class="headerlink" title="ç³»ç»Ÿä¸­å®‰è£…Gateway"></a>ç³»ç»Ÿä¸­å®‰è£…Gateway</h3><p>å®‰è£…æ—¶è¾“å…¥<code>Gateway Registration Key</code></p>
<p> <img src="https://image.ritboy.com/markdown/202004/334159dc4040d032fa7bd7a36960f50c.jpg" alt="img"></p>
<h2 id="WatchGuard-Cloud-Web-UI-é…ç½®"><a href="#WatchGuard-Cloud-Web-UI-é…ç½®" class="headerlink" title="WatchGuard Cloud Web UI é…ç½®"></a>WatchGuard Cloud Web UI é…ç½®</h2><h3 id="æ·»åŠ Logon-App-Resource"><a href="#æ·»åŠ Logon-App-Resource" class="headerlink" title="æ·»åŠ Logon App Resource"></a>æ·»åŠ Logon App Resource</h3><h4 id="ç‚¹å‡»Add-ResourceæŒ‰é’®"><a href="#ç‚¹å‡»Add-ResourceæŒ‰é’®" class="headerlink" title="ç‚¹å‡»Add ResourceæŒ‰é’®"></a>ç‚¹å‡»<code>Add Resource</code>æŒ‰é’®</h4><p><img src="https://image.ritboy.com/markdown/202004/1740b67a4b14b25e695a0a96dd7ee74b.jpg" alt="image-20190428171256818"></p>
<!--more-->

<h4 id="é…ç½®Logon-Appä¿¡æ¯"><a href="#é…ç½®Logon-Appä¿¡æ¯" class="headerlink" title="é…ç½®Logon Appä¿¡æ¯"></a>é…ç½®Logon Appä¿¡æ¯</h4><p><img src="https://image.ritboy.com/markdown/202004/e0408cbd572d5d83cd79505df94647f9.jpg" alt="image-20190428171343817"></p>
<ul>
<li>Name: è‡ªå®šä¹‰</li>
<li>Support Message: è‡ªå®šä¹‰ï¼Œæœ€åå¯ä»¥åœ¨Windowsçš„ç™»å½•ç•Œé¢ä¸Šçœ‹åˆ°</li>
<li>Synchronization Interval (Hour)ï¼š è‡ªå®šä¹‰</li>
<li>Remember Passwordï¼šè‡ªå®šä¹‰ï¼Œå¯ä»¥å‹¾é€‰æˆ–è€…ä¸å‹¾é€‰</li>
</ul>
<h2 id="Logon-App-å®‰è£…"><a href="#Logon-App-å®‰è£…" class="headerlink" title="Logon App å®‰è£…"></a>Logon App å®‰è£…</h2><h3 id="ä¸‹è½½Logon-App"><a href="#ä¸‹è½½Logon-App" class="headerlink" title="ä¸‹è½½Logon App"></a>ä¸‹è½½Logon App</h3><p>éœ€è¦ä¸‹è½½<code>INSTALLER</code>å’Œ<code>CONFIG</code></p>
<p><img src="https://image.ritboy.com/markdown/202004/8a4ce04fc522a45451f4d3bdd054d86c.jpg" alt="image-20190428172211122"></p>
<h3 id="ç³»ç»Ÿä¸­å®‰è£…Logon-App"><a href="#ç³»ç»Ÿä¸­å®‰è£…Logon-App" class="headerlink" title="ç³»ç»Ÿä¸­å®‰è£…Logon App"></a>ç³»ç»Ÿä¸­å®‰è£…Logon App</h3><p>æŠŠå®‰è£…ç¨‹åºå’Œé…ç½®æ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œè¿è¡Œå®‰è£…ç¨‹åºã€‚å®‰è£…å®Œæˆåç”±ä¸‹å›¾æç¤ºï¼Œé‡å¯ç³»ç»Ÿåéœ€è¦é€šè¿‡AuthPointæ¥ç™»å½•(<strong>æ³¨æ„</strong>ï¼šç³»ç»Ÿçš„æœ¬åœ°è´¦æˆ·åœ¨WatchGuard Cloudæœ‰<strong>ç›¸åŒçš„user</strong>æ‰èƒ½ç™»å½•)</p>
<p> <img src="https://image.ritboy.com/markdown/202004/0b7bdf55abf78e70394dcdbfe9f61060.jpg" alt="image-20190428172856853"></p>
<h2 id="æ·»åŠ Groupå’ŒUser"><a href="#æ·»åŠ Groupå’ŒUser" class="headerlink" title="æ·»åŠ Groupå’ŒUser"></a>æ·»åŠ Groupå’ŒUser</h2><h3 id="æ·»åŠ Group"><a href="#æ·»åŠ Group" class="headerlink" title="æ·»åŠ Group"></a>æ·»åŠ Group</h3><ul>
<li><p>ç‚¹å‡»Add GroupæŒ‰é’®</p>
<p><img src="https://image.ritboy.com/markdown/202004/cb0682aefc9389c79ab6342850ade600.jpg" alt="image-20190423103410439"></p>
</li>
<li><p>æ·»åŠ Policy, é€‰æ‹©<code>Logon App</code></p>
<p><img src="https://image.ritboy.com/markdown/202004/13a4710ecc37412287b4bd05a413a2b9.jpg" alt="image-20190423103457822"></p>
</li>
<li><p>ç‚¹å‡»<strong>SAVE</strong>æŒ‰é’®</p>
</li>
</ul>
<h3 id="æœ¬åœ°è´¦æˆ·"><a href="#æœ¬åœ°è´¦æˆ·" class="headerlink" title="æœ¬åœ°è´¦æˆ·"></a>æœ¬åœ°è´¦æˆ·</h3><h4 id="Windowsç³»ç»Ÿåˆ›å»ºæœ¬åœ°è´¦æˆ·"><a href="#Windowsç³»ç»Ÿåˆ›å»ºæœ¬åœ°è´¦æˆ·" class="headerlink" title="Windowsç³»ç»Ÿåˆ›å»ºæœ¬åœ°è´¦æˆ·"></a>Windowsç³»ç»Ÿåˆ›å»ºæœ¬åœ°è´¦æˆ·</h4><p>æ·»åŠ æ­¥éª¤è¯·è§é“¾æ¥ï¼š<a href="https://ibooks.red/2019/04/28/Windows10-add-local-user" target="_blank" rel="noopener external nofollow noreferrer">https://ibooks.red/2019/04/28/Windows10-add-local-user</a></p>
<h4 id="WatchGuard-Cloudæ·»åŠ ç›¸åŒè´¦æˆ·"><a href="#WatchGuard-Cloudæ·»åŠ ç›¸åŒè´¦æˆ·" class="headerlink" title="WatchGuard Cloudæ·»åŠ ç›¸åŒè´¦æˆ·"></a>WatchGuard Cloudæ·»åŠ ç›¸åŒè´¦æˆ·</h4><p><strong>æ³¨æ„ï¼š</strong>æ·»åŠ æ—¶ç”¨æˆ·åè¦ä¸Windowsç³»ç»Ÿä¸­æ·»åŠ çš„åç§°<strong>ä¸€æ ·</strong></p>
<p> <img src="https://image.ritboy.com/markdown/202004/e1f0e79ce3273be99b7b2206240c5103.jpg" alt="image-20190428175347825"></p>
<h4 id="æ¿€æ´»ç”¨æˆ·"><a href="#æ¿€æ´»ç”¨æˆ·" class="headerlink" title="æ¿€æ´»ç”¨æˆ·"></a>æ¿€æ´»ç”¨æˆ·</h4><p>ä½¿ç”¨æ·»åŠ ç”¨æˆ·çš„çš„é‚®ç®±ï¼Œè®¾ç½®å¯†ç å¹¶ç”¨æ‰‹æœºAppæ‰«é‚®ä»¶ä¸­äºŒç»´ç æ¿€æ´»è¯¥è¯¥è´¦æˆ·</p>
<h4 id="ç™»å½•ç”¨æˆ·"><a href="#ç™»å½•ç”¨æˆ·" class="headerlink" title="ç™»å½•ç”¨æˆ·"></a>ç™»å½•ç”¨æˆ·</h4><p>åœ¨Windowsç™»å½•ç•Œé¢æ“ä½œ</p>
<ul>
<li>ç™»å½•ç•Œé¢è¾“å…¥ç”¨æˆ·</li>
<li>ç™»å½•ç•Œé¢è¾“å…¥å¯†ç </li>
<li>æ‰‹æœºAppç¡®è®¤ç™»å½•</li>
</ul>
<h3 id="LDAPç”¨æˆ·ç™»å½•"><a href="#LDAPç”¨æˆ·ç™»å½•" class="headerlink" title="LDAPç”¨æˆ·ç™»å½•"></a>LDAPç”¨æˆ·ç™»å½•</h3><h4 id="æ·»åŠ LDAPæœåŠ¡"><a href="#æ·»åŠ LDAPæœåŠ¡" class="headerlink" title="æ·»åŠ LDAPæœåŠ¡"></a>æ·»åŠ LDAPæœåŠ¡</h4><ul>
<li><p>ç‚¹å‡»<code>Add External Identity</code>æŒ‰é’®</p>
<p><img src="https://image.ritboy.com/markdown/202004/d34064446e3b624c8b346ed30ea687da.jpg" alt="image-20190429093403093"></p>
</li>
<li><p>é…ç½®LDAPæœåŠ¡ä¿¡æ¯</p>
<ul>
<li>Name: è‡ªå®šä¹‰</li>
<li>LDAP Search Base: æ ¹æ®LDAPæœåŠ¡å™¨ä¿¡æ¯é…ç½®(æ¯”å¦‚ï¼š dc=jamesad,dc=com)</li>
<li>System Account: LDAPæœåŠ¡å™¨è´¦å·(æ¯”å¦‚ï¼š administrator)</li>
<li>Passphraseï¼š system accountçš„çš„å¯†ç </li>
<li>Synchronization interval:  æ ¹æ®éœ€æ±‚é€‰æ‹©</li>
<li>Domain: LDAPæœåŠ¡å™¨åŸŸå</li>
<li>Attribute related to the first name: æ ¹æ®éœ€æ±‚é…ç½®ï¼Œé»˜è®¤å€¼<code>givenName</code></li>
<li>Attribute related to the last name: æ ¹æ®éœ€æ±‚é…ç½®ï¼Œé»˜è®¤å€¼<code>sn</code></li>
<li>Attribute related to the user email: æ ¹æ®éœ€æ±‚é…ç½®ï¼Œé»˜è®¤å€¼<code>mail</code></li>
<li>Main attribute to the LDAP user: æ ¹æ®éœ€æ±‚é…ç½®ï¼Œé»˜è®¤å€¼<code>objectGUID</code></li>
<li>Attribute related to the user login: æ ¹æ®éœ€æ±‚é…ç½®ï¼Œé»˜è®¤å€¼<code>sAMAccountName</code></li>
<li>Attribute related to the mobile number: æ ¹æ®éœ€æ±‚é…ç½®ï¼Œé»˜è®¤å€¼<code>mobile</code></li>
<li>Server Address: LDAPæœåŠ¡å™¨IPåœ°å€</li>
<li>Server Port: æ ¹æ®éœ€æ±‚é…ç½®ï¼Œé»˜è®¤å€¼<code>389</code></li>
<li>ç‚¹å‡»<code>SAVE</code>æŒ‰é’®</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/97a0bbdca733c3c7dfc9411135ae9190.jpg" alt="image-20190429093525927"></p>
</li>
<li><p>LDAPæœåŠ¡ç»‘å®šåˆ°Gatewayä¸­</p>
</li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/f3a6754e4c5a4d492aefef9dc69607fa.jpg" alt="image-20190429095020825"></p>
<h4 id="æ·»åŠ QueryåŒæ­¥LDAPåˆ°LogonAppç”¨æˆ·ç»„ä¸­"><a href="#æ·»åŠ QueryåŒæ­¥LDAPåˆ°LogonAppç”¨æˆ·ç»„ä¸­" class="headerlink" title="æ·»åŠ QueryåŒæ­¥LDAPåˆ°LogonAppç”¨æˆ·ç»„ä¸­"></a>æ·»åŠ QueryåŒæ­¥LDAPåˆ°LogonAppç”¨æˆ·ç»„ä¸­</h4><p><img src="https://image.ritboy.com/markdown/202004/ca85457e39a822d17d3789e237dbda6b.jpg" alt="image-20190428175830934"></p>
<h4 id="Windowsç³»ç»Ÿä¸­é…ç½®Domain"><a href="#Windowsç³»ç»Ÿä¸­é…ç½®Domain" class="headerlink" title="Windowsç³»ç»Ÿä¸­é…ç½®Domain"></a>Windowsç³»ç»Ÿä¸­é…ç½®Domain</h4><ul>
<li>æ·»åŠ DNSï¼šæŠŠ<code>LDAP</code>æœåŠ¡åœ°å€è¾“å…¥åˆ°DNS serverä¸­</li>
</ul>
<p>â€‹       <img src="https://image.ritboy.com/markdown/202004/3d31873835263e0e5046aba0ebc1ccfa.jpg" alt="image-20190428143554139"></p>
<ul>
<li><p>åœ¨ç³»ç»Ÿå±æ€§ä¸­é…ç½®ï¼Œåœ¨<code>Domain</code>ä¸­è¾“å…¥LDAPæœåŠ¡ä¸­çš„åŸŸåï¼Œ<strong>æ³¨æ„ï¼š</strong>æ·»åŠ æ—¶ä¼šéªŒè¯LDAPçš„ç”¨æˆ·ï¼Œå³è¾“å…¥LDAPæœåŠ¡å™¨çš„ç”¨æˆ·åå’Œå¯†ç </p>
<p> <img src="https://image.ritboy.com/markdown/202004/e42ad3360a17638ab6507cf15611b29e.jpg" alt="image-20190428143451835"></p>
</li>
</ul>
<h4 id="æ¿€æ´»ç”¨æˆ·-1"><a href="#æ¿€æ´»ç”¨æˆ·-1" class="headerlink" title="æ¿€æ´»ç”¨æˆ·"></a>æ¿€æ´»ç”¨æˆ·</h4><p>ä½¿ç”¨æ·»åŠ ç”¨æˆ·çš„çš„é‚®ç®±ï¼Œè®¾ç½®å¯†ç å¹¶ç”¨æ‰‹æœºAppæ‰«é‚®ä»¶ä¸­äºŒç»´ç æ¿€æ´»è¯¥è¯¥è´¦æˆ·</p>
<h4 id="ç™»å½•ç”¨æˆ·-1"><a href="#ç™»å½•ç”¨æˆ·-1" class="headerlink" title="ç™»å½•ç”¨æˆ·"></a>ç™»å½•ç”¨æˆ·</h4><p>åœ¨Windowsç™»å½•ç•Œé¢æ“ä½œ</p>
<ul>
<li>ç™»å½•ç•Œé¢è¾“å…¥ç”¨æˆ·</li>
<li>ç™»å½•ç•Œé¢è¾“å…¥å¯†ç </li>
<li>æ‰‹æœºAppç¡®è®¤ç™»å½•</li>
</ul>
]]></content>
      <categories>
        <category>WatchGuard</category>
        <category>LogonApp</category>
      </categories>
      <tags>
        <tag>WatchGuard</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7 æ·»åŠ æˆ–åˆ é™¤ç”¨æˆ·</title>
    <url>/articles/292711784.html</url>
    <content><![CDATA[<h3 id="æ·»åŠ ç”¨æˆ·"><a href="#æ·»åŠ ç”¨æˆ·" class="headerlink" title="æ·»åŠ ç”¨æˆ·"></a>æ·»åŠ ç”¨æˆ·</h3><ul>
<li><p>rootç”¨æˆ·ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adduser &lt;username&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>érootç”¨æˆ·ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo adduser &lt;username&gt;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<a id="more"></a>



<h4 id="ç”¨æˆ·æ·»åŠ sudoæƒé™"><a href="#ç”¨æˆ·æ·»åŠ sudoæƒé™" class="headerlink" title="ç”¨æˆ·æ·»åŠ sudoæƒé™"></a>ç”¨æˆ·æ·»åŠ <code>sudo</code>æƒé™</h4><ul>
<li><p>rootç”¨æˆ·ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gpasswd -a &lt;username&gt; wheel</span><br></pre></td></tr></table></figure>
</li>
<li><p>érootç”¨æˆ·ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gpasswd -a &lt;username&gt; wheel</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç”¨æˆ·æ·»åŠ å¥½<code>sudo</code>æƒé™åï¼Œå‘½ä»¤éœ€è¦ç”¨<code>root</code>æƒé™æ—¶éœ€è¦ä»¥ä¸‹å‘½ä»¤æ ¼å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo &lt;some_command&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="æŸ¥çœ‹sudoæƒé™çš„ç”¨æˆ·"><a href="#æŸ¥çœ‹sudoæƒé™çš„ç”¨æˆ·" class="headerlink" title="æŸ¥çœ‹sudoæƒé™çš„ç”¨æˆ·"></a>æŸ¥çœ‹<code>sudo</code>æƒé™çš„ç”¨æˆ·</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo lid -g wheel</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤ç”¨æˆ·"><a href="#åˆ é™¤ç”¨æˆ·" class="headerlink" title="åˆ é™¤ç”¨æˆ·"></a>åˆ é™¤ç”¨æˆ·</h3><ul>
<li><p>rootç”¨æˆ·ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">userdel &lt;username&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ç”¨æˆ·ï¼Œå¹¶åˆ é™¤ç”¨æˆ·çš„homeç›®å½•</span></span><br><span class="line">userdel -r &lt;username&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>érootç”¨æˆ·ï¼Œéœ€è¦æ·»åŠ <code>sudo</code></p>
</li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://www.digitalocean.com/community/tutorials/how-to-add-and-delete-users-on-a-centos-7-server" target="_blank" rel="noopener external nofollow noreferrer">https://www.digitalocean.com/community/tutorials/how-to-add-and-delete-users-on-a-centos-7-server</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>CentOS</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Centosä¸­å®‰è£…docker-compose</title>
    <url>/articles/819252145.html</url>
    <content><![CDATA[<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p><a href="https://github.com/docker/compose/releases/" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘å®‰è£…</a></p>
<p>æ‰¾åˆ°éœ€è¦å®‰è£…çš„ç‰ˆæœ¬ï¼Œç”¨curlä¸‹è½½è¿›è¡Œå®‰è£…ï¼ˆä»¥ç‰ˆæœ¬<code>1.22.0</code>ä¸ºä¾‹ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -L https://github.com/docker/compose/releases/download/1.22.0/docker-compose-`uname -s`-`uname -m` -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p>ç”¨pipæ¥å®‰è£…ï¼Œå¦‚æœæ²¡pipå‘½ä»¤è¯·å…ˆå®‰è£…pip</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">yum -y install python-pip</span><br></pre></td></tr></table></figure>

<p>å®‰è£…docker-compose</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install docker-compose</span><br><span class="line"><span class="comment"># å¾…å®‰è£…å®Œæˆåï¼Œæ‰§è¡ŒæŸ¥è¯¢ç‰ˆæœ¬çš„å‘½ä»¤ï¼Œå³å¯å®‰è£…docker-compose</span></span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>

<h2 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h2><p>å¦‚æœç”¨ <code>curl</code>å®‰è£…çš„ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo rm /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç”¨ <code>pip</code>å®‰è£…çš„ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip uninstall docker-compose</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://blog.csdn.net/gsying1474/article/details/52988784" target="_blank" rel="noopener external nofollow noreferrer">å®‰è£…docker-composeçš„ä¸¤ç§æ–¹å¼</a></p>
<p><a href="https://docs.docker.com/compose/install/#uninstallation" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘æ–‡æ¡£</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker-compose</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeræ¸…ç†æ–¹æ¡ˆ</title>
    <url>/articles/3793781524.html</url>
    <content><![CDATA[<h2 id="æ¸…ç†overlayå­˜å‚¨"><a href="#æ¸…ç†overlayå­˜å‚¨" class="headerlink" title="æ¸…ç†overlayå­˜å‚¨"></a>æ¸…ç†overlayå­˜å‚¨</h2><p>æˆ‘ä»¬åœ¨ä½¿ç”¨dockerçš„è¿‡ç¨‹ä¸­å‘ç°åŸºäºswarmä½¿ç”¨Storage Driver: overlayçš„æ–¹å¼è¿›è¡Œå­˜å‚¨.ä½†æ˜¯å‘ç°è¿™ä¸ªç‰¹åˆ«å ç”¨å­˜å‚¨ç©ºé—´.</p>
<h3 id="æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨"><a href="#æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨" class="headerlink" title="æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨"></a>æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container prune</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h3 id="æ¸…ç†æ‰€æœ‰ä¸ç”¨æ•°æ®-åœæ­¢çš„å®¹å™¨-ä¸ä½¿ç”¨çš„volume-ä¸ä½¿ç”¨çš„networks-æ‚¬æŒ‚çš„é•œåƒ"><a href="#æ¸…ç†æ‰€æœ‰ä¸ç”¨æ•°æ®-åœæ­¢çš„å®¹å™¨-ä¸ä½¿ç”¨çš„volume-ä¸ä½¿ç”¨çš„networks-æ‚¬æŒ‚çš„é•œåƒ" class="headerlink" title="æ¸…ç†æ‰€æœ‰ä¸ç”¨æ•°æ®(åœæ­¢çš„å®¹å™¨,ä¸ä½¿ç”¨çš„volume,ä¸ä½¿ç”¨çš„networks,æ‚¬æŒ‚çš„é•œåƒ)"></a>æ¸…ç†æ‰€æœ‰ä¸ç”¨æ•°æ®(åœæ­¢çš„å®¹å™¨,ä¸ä½¿ç”¨çš„volume,ä¸ä½¿ç”¨çš„networks,<em>æ‚¬æŒ‚</em>çš„é•œåƒ)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker system prune -a</span><br></pre></td></tr></table></figure>

<h3 id="overlayå­˜å‚¨"><a href="#overlayå­˜å‚¨" class="headerlink" title="overlayå­˜å‚¨"></a>overlayå­˜å‚¨</h3><p>æˆ‘ä»¬é€šè¿‡ä¸Šé¢çš„æ“ä½œæ¸…é™¤äº†ä¸€äº›æ— ç”¨çš„æ•°æ®,ä½†æ˜¯,overlayè¿˜æ˜¯ç‰¹åˆ«å¤§.æˆ‘ä»¬å…ˆäº†è§£ä¸‹overlayå­˜å‚¨.</p>
<h4 id="overlayfs"><a href="#overlayfs" class="headerlink" title="overlayfs"></a>overlayfs</h4><p>é›†æˆè¿›äº†linux 3.18å†…æ ¸.<br> overlayå­˜å‚¨é©±åŠ¨ä¸»è¦ä½¿ç”¨çš„æ˜¯overlayfsæŠ€æœ¯.ä¸­æ–‡åæ˜¯å åˆå¼æ–‡ä»¶ç³»ç»Ÿ.å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿå¯ä»¥mountä¹‹åè¿›è¡Œåˆå¹¶.<br> docker é•œåƒå±‚  lowerdir<br> docker å®¹å™¨å±‚  upperdir<br> docker å®¹å™¨æŒ‚è½½ç‚¹ merged</p>
<p>è¿™ä¸ªä¸‰ä¸ªå±‚å¯¹åº”äº† overlayFsçš„ç»“æ„. æˆ‘ä»¬é€šè¿‡docker inspect å¯ä»¥æŸ¥çœ‹åˆ°å¦‚ä¸‹ç»“æ„</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"GraphDriver": &#123;</span><br><span class="line">            "Name": "overlay",</span><br><span class="line">            "Data": &#123;</span><br><span class="line">                "LowerDir": "/mnt/docker/overlay/5eb97eb91bed89a9c879142900419ad118215af05c291989282c130d031d7019/root",</span><br><span class="line">                "MergedDir": "/mnt/docker/overlay/454f70c61de03ce2a517d7e2ea8c19e319a95cd2275d8b826f4244071315e513/merged",</span><br><span class="line">                "UpperDir": "/mnt/docker/overlay/454f70c61de03ce2a517d7e2ea8c19e319a95cd2275d8b826f4244071315e513/upper",</span><br><span class="line">                "WorkDir": "/mnt/docker/overlay/454f70c61de03ce2a517d7e2ea8c19e319a95cd2275d8b826f4244071315e513/work"</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p> é•œåƒåœ¨ /root<br> æŒ‚è½½ç‚¹åœ¨ /merged<br> å®¹å™¨åœ¨ /upper<br> å·¥ä½œç›®å½• /work</p>
<h4 id="overlayfsæ•°æ®æ¸…ç†"><a href="#overlayfsæ•°æ®æ¸…ç†" class="headerlink" title="overlayfsæ•°æ®æ¸…ç†"></a>overlayfsæ•°æ®æ¸…ç†</h4><p>æˆ‘ä»¬åšäº†ä¸€ä¸ªå®éªŒ,æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªå®¹å™¨(ç‰ˆæœ¬ä¸åŒ),ä¹‹å</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker stop conatiner</span><br><span class="line">docker rm container</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡å¯¹æ•°æ®å¤§å°çš„ç›‘æ§,æˆ‘ä»¬å‘ç° overlayä¼šéšç€æ–°é•œåƒçš„äº§ç”Ÿè€Œäº§ç”Ÿä¸€äº›æ•°æ®,éšç€å®¹å™¨çš„å…³é—­åˆ é™¤,è¿™ä¸ªæ–‡ä»¶å¹¶æ²¡æœ‰ç¼©å°ä½“ç§¯.å¦‚ä½•è§£å†³å‘¢? çœ‹æ¥æˆ‘ä»¬å¿½è§†äº†ä¸€ä¸ªé—®é¢˜.æˆ‘ä»¬ä½¿ç”¨ <code>docker system prune</code>ä»¥ä¸ºå¯ä»¥ä¸éœ€è¦çš„æ•°æ®éƒ½æ¸…ç†äº†,ä½†æ˜¯å…³äºimagesä¸­æ˜¯è¿™æ ·æè¿°çš„â€ dangling imagesâ€ æ‚¬æŒ‚çš„é•œåƒ .å…³äºè¿™ä¸ªè¯æ±‡æˆ‘è¿˜æ²¡æœ‰ç†è§£.ä¸è¿‡é€šè¿‡æµ‹è¯•,å³ä½¿æˆ‘æŠŠå®¹å™¨åœæ­¢ä¹Ÿæ— æ³•æ¸…ç†é•œåƒ,æ‰€ä»¥,æˆ‘æ— æ³•ç†è§£ æ‚¬æŒ‚æ˜¯æ€æ ·çš„çŠ¶æ€.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker rmi images</span><br></pre></td></tr></table></figure>

<p>æœ€åæˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨åˆ é™¤é•œåƒ,åˆ™ä¹‹å‰äº§ç”Ÿçš„overlayæ•°æ®å°±éšä¹‹å‡å°‘äº†.</p>
<h5 id="tips"><a href="#tips" class="headerlink" title="tips:"></a><strong>tips</strong>:</h5><p> æŸ¥çœ‹overlay å¤§å° <code>du --max-depth=1 -h</code><br> æŸ¥çœ‹æ•°é‡ <code>ls|wc -w</code></p>
<h3 id="æ•´ç†"><a href="#æ•´ç†" class="headerlink" title="æ•´ç†"></a>æ•´ç†</h3><p>é•œåƒæœ‰æ–°ç‰ˆæœ¬äº§ç”Ÿçš„è¯,æˆ‘ä»¬å¯ä»¥æŒ‰ç…§è¿™æ ·çš„æµç¨‹æ“ä½œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker stop container</span><br><span class="line">docker rm container</span><br><span class="line">docker rmi image</span><br><span class="line">docker pull image</span><br><span class="line">docker run ...</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±é¿å…äº†ç³»ç»Ÿç£ç›˜ä¸€çœ¨çœ¼çš„æ—¶é—´å°±æ»¡äº†.</p>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><h4 id="docker-æ—¶é—´åŒæ­¥"><a href="#docker-æ—¶é—´åŒæ­¥" class="headerlink" title="docker æ—¶é—´åŒæ­¥?"></a>docker æ—¶é—´åŒæ­¥?</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ln -snf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; <span class="built_in">echo</span> Asia/Shanghai &gt; /etc/timezone</span><br></pre></td></tr></table></figure>

<h4 id="docker-å­˜å‚¨åœ°æ–¹ä¿®æ”¹"><a href="#docker-å­˜å‚¨åœ°æ–¹ä¿®æ”¹" class="headerlink" title="docker å­˜å‚¨åœ°æ–¹ä¿®æ”¹"></a>docker å­˜å‚¨åœ°æ–¹ä¿®æ”¹</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ExecStart=/usr/bin/dockerd --graph=<span class="string">"/mnt/data/images"</span></span><br></pre></td></tr></table></figure>



<h2 id="æ¸…ç†å®¹å™¨æ—¥å¿—"><a href="#æ¸…ç†å®¹å™¨æ—¥å¿—" class="headerlink" title="æ¸…ç†å®¹å™¨æ—¥å¿—"></a>æ¸…ç†å®¹å™¨æ—¥å¿—</h2><p> docker ç”¨ä¹…äº† æ—¥å¿—ä¸€å¤§å †ï¼Œå¾ˆå ç”¨ç©ºé—´ï¼Œä¸ç”¨çš„æ—¥å¿—å¯ä»¥æ¸…ç†æ‰äº†ã€‚<br>docker logs -f container name å™¼é‡Œå•ªå•¦ ä¸€å¤§å †ï¼Œï¼Œï¼Œï¼Œå¤ªå¯¹ï¼Œæ¸…ç†æ‰</p>
<h3 id="ç¬¬ä¸€æ­¥æ—¥å¿—ä½ç½®"><a href="#ç¬¬ä¸€æ­¥æ—¥å¿—ä½ç½®" class="headerlink" title="ç¬¬ä¸€æ­¥æ—¥å¿—ä½ç½®"></a>ç¬¬ä¸€æ­¥æ—¥å¿—ä½ç½®</h3><p>æ‰¾åˆ°å¯¹åº”containerçš„æ—¥å¿—æ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯åœ¨ <code>/var/lib/docker/containers/containerid/containerid.log-json.log</code>ï¼ˆ<code>containerid</code>æ˜¯æŒ‡ä½ çš„å®¹å™¨idï¼‰</p>
<h4 id="æ‰¾æ—¥å¿—ä½ç½®"><a href="#æ‰¾æ—¥å¿—ä½ç½®" class="headerlink" title="æ‰¾æ—¥å¿—ä½ç½®"></a>æ‰¾æ—¥å¿—ä½ç½®</h4><p>å¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥æ¨¡ç³ŠæŸ¥è¯¢ä¸€ä¸‹ <code>find / -type f -name &quot;*.log&quot; | xargs grep &quot;ERROR&quot;</code> æ‰¾åˆ°æ—¥å¿—ä½ç½®(è¿™è¡Œå‘½ä»¤çš„æ„æ€æ˜¯ä»æ ¹ç›®å½•å¼€å§‹æŸ¥æ‰¾æ‰€æœ‰æ‰©å±•åä¸º.logçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶æ‰¾å‡ºåŒ…å«â€ERRORâ€çš„è¡Œï¼Œä½ å¯æŠŠ error æ¢æˆä½ æ—¥å¿—ä¸­å­˜åœ¨çš„å†…å®¹ï¼Œdocker logs -f container name å°±èƒ½çœ‹åˆ°æœ‰ä»€ä¹ˆå†…å®¹å•¦)</p>
<h4 id="æ‰¾å®¹å™¨id"><a href="#æ‰¾å®¹å™¨id" class="headerlink" title="æ‰¾å®¹å™¨id"></a>æ‰¾å®¹å™¨id</h4><p>å¦‚æœä¸çŸ¥é“å®¹å™¨idæ˜¯ä»€ä¹ˆï¼Œ docker inspect Container name å¯ä»¥çœ‹åˆ°å®¹å™¨id</p>
<h3 id="ç¬¬äºŒæ­¥ï¼šæ¸…ç†ä¸€ä¸‹"><a href="#ç¬¬äºŒæ­¥ï¼šæ¸…ç†ä¸€ä¸‹" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæ¸…ç†ä¸€ä¸‹"></a>ç¬¬äºŒæ­¥ï¼šæ¸…ç†ä¸€ä¸‹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat /dev/null &gt;/var/lib/docker/containers/containerid/&lt;containerid&gt;.<span class="built_in">log</span>-json.log</span><br></pre></td></tr></table></figure>




]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeré—®é¢˜æ”¶é›†</title>
    <url>/articles/3779592231.html</url>
    <content><![CDATA[<h3 id="DockeræŒ‚è½½ä¸»æœºç›®å½•ï¼Œè®¿é—®å‡ºç°Premission-deniedè§£å†³åŠæ³•"><a href="#DockeræŒ‚è½½ä¸»æœºç›®å½•ï¼Œè®¿é—®å‡ºç°Premission-deniedè§£å†³åŠæ³•" class="headerlink" title="DockeræŒ‚è½½ä¸»æœºç›®å½•ï¼Œè®¿é—®å‡ºç°Premission deniedè§£å†³åŠæ³•"></a>DockeræŒ‚è½½ä¸»æœºç›®å½•ï¼Œè®¿é—®å‡ºç°Premission deniedè§£å†³åŠæ³•</h3><ul>
<li>DockeræŒ‚è½½ä¸»æœºç›®å½•ï¼Œè®¿é—®ç›¸åº”çš„æ–‡ä»¶å‡ºç°Premission deniedçš„æƒé™è®¿é—®é—®é¢˜:<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost soft]<span class="comment"># docker images</span></span><br><span class="line">REPOSITORY TAG IMAGE ID CREATED SIZE</span><br><span class="line">docker.io/centos 7.2.1511 686672a1d0cc 5 weeks ago</span><br><span class="line">//å°†ä¸»æœºä¸Šçš„/softç›®å½•æŒ‚è½½åˆ°dockerçš„/softç›®å½•ï¼Œå‰é¢çš„æ˜¯ä¸»æœºç›®å½•ï¼Œåé¢çš„æ˜¯dockerçš„ç›®å½•ã€‚</span><br><span class="line">docker run -i -t -v /soft:/soft 686672a1d0cc /bin/bash</span><br></pre></td></tr></table></figure>

</li>
</ul>
<a id="more"></a>

<ul>
<li>æŒ‚è½½åï¼ŒæŸ¥çœ‹ç›¸åº”çš„æ–‡ä»¶å‡ºç°å¦‚ä¸‹çš„æç¤ºï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@ba471da26d07 soft]<span class="comment"># ls</span></span><br><span class="line">ls: cannot access jdk-8u102-linux-x64.tar.gz: Permission denied</span><br><span class="line">hadoop-2.7.2.tar.gz jdk-8u102-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>

<ul>
<li>é—®é¢˜åŸå› åŠè§£å†³åŠæ³•</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">åŸå› æ˜¯CentOS7ä¸­çš„å®‰å…¨æ¨¡å—selinuxæŠŠæƒé™ç¦æ‰äº†ï¼Œè‡³å°‘æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼è§£å†³æŒ‚è½½çš„ç›®å½•æ²¡æœ‰æƒé™çš„é—®é¢˜ï¼š</span><br><span class="line">1.åœ¨è¿è¡Œå®¹å™¨çš„æ—¶å€™ï¼Œç»™å®¹å™¨åŠ ç‰¹æƒï¼ŒåŠåŠ ä¸Š --privileged=<span class="literal">true</span> å‚æ•°ï¼š</span><br><span class="line">docker run -i -t -v /soft:/soft --privileged=<span class="literal">true</span> 686672a1d0cc /bin/bash</span><br><span class="line">2.ä¸´æ—¶å…³é—­selinuxï¼š</span><br><span class="line">setenforce 0</span><br><span class="line">3.æ·»åŠ selinuxè§„åˆ™ï¼Œæ”¹å˜è¦æŒ‚è½½çš„ç›®å½•çš„å®‰å…¨æ€§æ–‡æœ¬</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å‚è€ƒ</p>
<p><a href="https://yq.aliyun.com/articles/53990" target="_blank" rel="noopener external nofollow noreferrer">https://yq.aliyun.com/articles/53990</a></p>
<p><a href="http://blog.csdn.net/rznice/article/details/52170085" target="_blank" rel="noopener external nofollow noreferrer">http://blog.csdn.net/rznice/article/details/52170085</a></p>
</li>
</ul>
<h3 id="ä¿®æ”¹dockeré•œåƒé»˜è®¤ä¸‹è½½åœ°å€"><a href="#ä¿®æ”¹dockeré•œåƒé»˜è®¤ä¸‹è½½åœ°å€" class="headerlink" title="ä¿®æ”¹dockeré•œåƒé»˜è®¤ä¸‹è½½åœ°å€"></a>ä¿®æ”¹dockeré•œåƒé»˜è®¤ä¸‹è½½åœ°å€</h3><p>åœ¨ä½¿ç”¨docker pullä¸‹è½½é•œåƒçš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯ä»dockerå®˜æ–¹ç»´æŠ¤å…¬æœ‰ä»“åº“dockerhubä¸Šä¸‹è½½,å›½å†…ç”¨æˆ·ä¸‹è½½çš„é€Ÿåº¦æ˜¯ææ…¢çš„ã€‚</p>
<p><img src="https://image.ritboy.com/markdown/202004/3556d6f3ab121e877a6db82b9dce6d42.jpg" alt="img"> </p>
<p><img src="https://image.ritboy.com/markdown/202004/428337c1280a926ac770c891132bdb32.jpg" alt="img"> </p>
<p>ä»è¿™é‡Œå¯ä»¥çœ‹åˆ°é»˜è®¤æ˜¯ä»dockerå®˜æ–¹dockerhubè¿›è¡Œä¸‹è½½çš„ã€‚</p>
<p>å½“ç„¶å›½å†…ä¹Ÿæœ‰è®¸å¤šä»“åº“å¯ä¾›ä½¿ç”¨ï¼Œä¸‹è½½é€Ÿåº¦ä¹Ÿæ˜¯å¾ˆå¿«çš„ï¼Œä½†å¦‚æœæ²¡æ³•è¿æ¥å¤–ç½‘çš„æƒ…å†µä¸‹æ˜¯æä¸æ–¹ä¾¿çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°æ­å»ºè‡ªå·±çš„ç§æœ‰ä»“åº“ã€‚</p>
<p>192.168.26.130è¿™å°æœºå™¨ä¸Šæˆ‘å·²ç»æŠŠç§æœ‰ä»“åº“é…ç½®å¥½äº†ï¼Œä¸‹é¢å°±çœ‹å¦‚ä½•æŠŠé•œåƒçš„é»˜è®¤ä¸‹è½½åœ°å€æ”¹ä¸ºæˆ‘ä»¬çš„ç§æœ‰ä»“åº“ã€‚ </p>
<p>ä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶/etc/sysconfig/docker:</p>
<p>ä¿®æ”¹ADD_REGISTRYçš„å€¼ï¼š</p>
<p> <img src="https://image.ritboy.com/markdown/202004/107c542d4ef6327a09ba3d858dfbd892.jpg" alt="img"></p>
<p>ç„¶åé‡å¯dockerï¼Œé‡æ–°ä¸‹è½½é•œåƒï¼š</p>
<p> <img src="https://image.ritboy.com/markdown/202004/f64f3409c32d168ed97c4f8cf7493eed.jpg" alt="img"></p>
<p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶æ˜¯ä»æˆ‘ä»¬æŒ‡å®šçš„ä»“åº“ä¸‹è½½äº†ã€‚</p>
<h3 id="é…ç½®äº†â€”restart-alwaysçš„å®¹å™¨åœæ­¢"><a href="#é…ç½®äº†â€”restart-alwaysçš„å®¹å™¨åœæ­¢" class="headerlink" title="é…ç½®äº†â€”restart=alwaysçš„å®¹å™¨åœæ­¢"></a>é…ç½®äº†â€”restart=alwaysçš„å®¹å™¨åœæ­¢</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker service ls</span><br><span class="line">docker service rm &lt;service-id&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><a href="https://github.com/moby/moby/issues/10032" target="_blank" rel="noopener external nofollow noreferrer">Githubå¯¹åº”é—®é¢˜é“¾æ¥</a></li>
</ul>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitå‡ºç°æ¢è¡Œç¬¦æŠ¥é”™(CRLTå’ŒLF)</title>
    <url>/articles/587466736.html</url>
    <content><![CDATA[<h3 id="é—®é¢˜å‡ºç°åŸå› "><a href="#é—®é¢˜å‡ºç°åŸå› " class="headerlink" title="é—®é¢˜å‡ºç°åŸå› "></a>é—®é¢˜å‡ºç°åŸå› </h3><p>ä¸åŒçš„æ“ä½œç³»ç»Ÿ(Windowså’ŒLinux)ï¼Œæ‰€ä»¥æ¢è¡Œç¬¦çš„å·®å¼‚ä¼šè®© Git è®¤ä¸ºæ–‡ä»¶çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ã€‚Windowsä¸‹æ¢è¡Œç¬¦ä¸º<code>CRLF</code>, Linuxï¼Unixï¼Mac ç³»ç»Ÿæ¢è¡Œç¬¦ä¸º<code>LF</code></p>
<h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p>ä¿®æ”¹Gité…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config core.filemode <span class="literal">false</span></span><br><span class="line">git config core.eol lf</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><ol>
<li>åœ¨ Windows ç³»ç»Ÿä¸‹ï¼Œå®‰è£… Git æ—¶åº”å½“ç½®é€‰é¡¹ <code>core.autocrlf</code> ä¸º <code>true</code>ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾æ‰€ç¤ºçš„é‚£ä¸€ä¸ªï¼š<br><img src="https://image.ritboy.com/markdown/202004/21174c749c17d2f6a42be0f34cd3e088.jpg" alt="è¯·è¾“å…¥å›¾ç‰‡æè¿°"></li>
<li>åœ¨ Linuxï¼Unixï¼Mac ç³»ç»Ÿä¸‹ï¼Œä¸€èˆ¬æ¥è¯´ä¿æŒé»˜è®¤è®¾ç½®å°±å¥½äº†ï¼ˆæ²¡æœ‰å®‰è£…ç•Œé¢ä¾›é€‰æ‹©ï¼‰ã€‚å½“ç„¶ä½ å¯ä»¥æ‰‹å·¥ç¼–è¾‘ <code>~/.gitconfig</code> è®¾ <code>core.autocrlf</code> ä¸º <code>input</code>ï¼Œå¦‚æˆ‘æœºå™¨ä¸Šçš„è®¾ç½®ï¼š<br><img src="https://image.ritboy.com/markdown/202004/047550c14cc09fcdfe5d4dd53b00a34b.jpg" alt="è¯·è¾“å…¥å›¾ç‰‡æè¿°"></li>
</ol>
<p>ä»¥ä¸Šä¸¤ç§è®¾ç½®æœ€ç»ˆçš„ç»“æœå°±æ˜¯æäº¤çš„æ—¶å€™ Git æ€»æ˜¯å°†æ¢è¡Œç¬¦è‡ªåŠ¨è½¬ä¸º <code>LF</code>ï¼Œå¹¶ä¸”åœ¨ Windows ä¸‹ <code>checkout</code> å›æ¥æ—¶è‡ªåŠ¨å¸®ä½ è½¬æ¢ä¸º <code>CRLF</code>ï¼Œä»¥ä¾¿é€‚åº” Windows ä¸‹çš„ç¼–è¾‘å™¨ã€‚</p>
<p>å¦‚æœä½ åšäº†ä¸Šè¿°è®¾ç½®ä¾ç„¶ä¼šç¢°åˆ°é¢˜ç›®ä¸­æè¿°çš„é—®é¢˜ï¼Œé‚£ä¹ˆä¸ç”¨æƒ³ï¼Œä¸€å®šæ˜¯ä½ çš„å›¢é˜Ÿä¸­å¦å¤–æœ‰åˆ«çš„æˆå‘˜æ²¡æœ‰åšå¯¹ä»¥ä¸Šä¸¤ç‚¹çš„è®¾ç½®ï¼ˆå¾ˆå¤§çš„å¯èƒ½æ€§æ˜¯ä½¿ç”¨ Windows çš„ï¼‰ï¼Œä½ ä»¬å¯ä»¥é€ä¸€æ’æŸ¥ã€‚</p>
<p>å¦å¤–ï¼Œå®‰è£… Windows Git æ—¶å¦å¤–ä¸€ä¸ªè®¾ç½®ä¹Ÿæ¯”è¾ƒè®©äººè´¹è§£ï¼Œå»ºè®®é€‰ä¸‹å›¾è¿™æ ·çš„ï¼š</p>
<p> <img src="https://image.ritboy.com/markdown/202004/3d18ee248fc8a0b61067fedd05b29e72.jpg" alt="è¯·è¾“å…¥å›¾ç‰‡æè¿°"></p>
<p>é€‰æ‹©è¿™ç§ï¼Œæ‰€éœ€è¦çš„é…ç½®é‡æœ€å°‘ï¼ŒCLI å’Œ Linux çš„å…¼å®¹æ€§ä¹Ÿæ¯”è¾ƒé«˜ï¼Œå”¯ä¸€çš„ç¼ºé™·å°±æ˜¯ Windows CLI é‡Œå’Œ Linux é‡åçš„å‘½ä»¤ä¼šè¢« Linux ç‰ˆæœ¬è¦†ç›–æ‰ï¼Œæ¯”å¦‚ <code>find</code> ä¹‹ç±»çš„ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œåæ­£ Windows CLI æ˜¯ä¸ªæ¸£æ¸£ï¼Œè¦†ç›–äº†ä¹Ÿæ— æ‰€è°“äº†ã€‚</p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://segmentfault.com/q/1010000000518769" target="_blank" rel="noopener external nofollow noreferrer">https://segmentfault.com/q/1010000000518769</a></p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Scratché•œåƒä¸­è¿è¡ŒGolangç¨‹åº</title>
    <url>/articles/3965848720.html</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è®°å½•ä¸€æ¬¡ä½¿ç”¨scratché•œåƒè¿è¡ŒGolangç¨‹åºçš„buildé•œåƒè¿‡ç¨‹ä»¥åŠé—®é¢˜è§£å†³ã€‚scratché•œåƒæ¥è¿è¡ŒGolangèƒ½å¤§å¤§ç¼©å‡Dockeré•œåƒçš„å¤§å°ã€‚</p>
<h1 id="DEMOä»£ç "><a href="#DEMOä»£ç " class="headerlink" title="DEMOä»£ç "></a>DEMOä»£ç </h1><p>ç½‘ä¸Šå¤åˆ¶çš„ä¸€æ®µGolangä»£ç </p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"># filename: main.<span class="keyword">go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"io/ioutil"</span></span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	resp, err := http.Get(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">	check(err)</span><br><span class="line">	body, err := ioutil.ReadAll(resp.Body)</span><br><span class="line">	check(err)</span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(body))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">check</span><span class="params">(err error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		os.Exit(<span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h1 id="ç¼–å†™Dockerfile"><a href="#ç¼–å†™Dockerfile" class="headerlink" title="ç¼–å†™Dockerfile"></a>ç¼–å†™Dockerfile</h1><p>Dockerå®˜æ–¹æä¾›äº†Golangå„ç‰ˆæœ¬çš„é•œåƒï¼š <a href="https://hub.docker.com/_/golang/" target="_blank" rel="noopener external nofollow noreferrer">Official Repository - golang</a></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># filename: Dockerfile</span></span><br><span class="line"><span class="keyword">FROM</span> golang:alpine as builder</span><br><span class="line"><span class="keyword">ARG</span> GOOS=linux</span><br><span class="line"><span class="keyword">ARG</span> GOARCH=amd64</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir /build</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> . /build/</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /build</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set necessary environmet variables needed for our image</span></span><br><span class="line"><span class="keyword">ENV</span> GOPROXY=https://goproxy.io \</span><br><span class="line">    CGO_ENABLED=<span class="number">0</span> \</span><br><span class="line">    GOOS=$GOOS \</span><br><span class="line">    GOARCH=$GOARCH</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go build -o <span class="variable">$software</span> .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /build/main /main</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /images</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">"/main"</span>]</span></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œå‘½ä»¤ç”Ÿæˆé•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker build -t demo-goland .</span><br></pre></td></tr></table></figure>



<p>Dockerfileä¸­ä¸€äº›æ³¨è§£ï¼š</p>
<ul>
<li><p>GOPROXYï¼šåŠ ä¸Šåä½¿è¿‡æ¥ç¼–è¯‘æ—¶ä¸‹è½½ä¾èµ–åŒ…æ›´å®¹æ˜“</p>
</li>
<li><p>CGO_ENABLEDï¼šCGO_ENABLED=0çš„æƒ…å†µä¸‹ï¼ŒGoé‡‡ç”¨çº¯é™æ€ç¼–è¯‘å‡å°‘å¯¹å¤–éƒ¨åŠ¨æ€é“¾æ¥åº“ä¾èµ–ã€‚</p>
<p>ç›¸å…³èµ„æ–™ï¼š<a href="https://johng.cn/cgo-enabled-affect-go-static-compile/" target="_blank" rel="noopener external nofollow noreferrer">CGO_ENABLEDç¯å¢ƒå˜é‡å¯¹Goé™æ€ç¼–è¯‘æœºåˆ¶çš„å½±å“</a></p>
</li>
<li><p>GOOS å’Œ GOARCHï¼šè¿è¡Œçš„ç³»ç»Ÿå¹³å°ä¸æ¶æ„ï¼ŒDockerä¸­è¿è¡ŒGolangè¯·é…ç½®<code>GOOS=linux</code>ã€‚</p>
<p>ç›¸å…³èµ„æ–™ï¼š<a href="https://studygolang.com/articles/16633" target="_blank" rel="noopener external nofollow noreferrer">Goè·¨å¹³å°ç¼–è¯‘</a></p>
</li>
</ul>
<h1 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h1><h3 id="standard-init-linux-go-207-exec-user-process-caused-â€œno-such-file-or-directoryâ€"><a href="#standard-init-linux-go-207-exec-user-process-caused-â€œno-such-file-or-directoryâ€" class="headerlink" title="standard_init_linux.go:207: exec user process caused â€œno such file or directoryâ€"></a>standard_init_linux.go:207: exec user process caused â€œno such file or directoryâ€</h3><p>Golangç¼–è¯‘åç”Ÿæˆçš„æ‰§è¡Œæ–‡ä»¶æœ‰ä¾èµ–å¤–éƒ¨é“¾æ¥åº“ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Šç¯å¢ƒå˜é‡<code>CGO_ENABLED=0</code>å³å¯è§£å†³ã€‚</p>
<p>ç›¸å…³å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/55106186/no-such-file-or-directory-with-docker-scratch-image" target="_blank" rel="noopener external nofollow noreferrer">â€œno such file or directoryâ€ with docker scratch image</a></p>
<p>â€‹                   <a href="https://github.com/eddycjy/go-gin-example/issues/90" target="_blank" rel="noopener external nofollow noreferrer">åŸºäº scratch é•œåƒæ„å»º docker é•œåƒæŠ¥é”™ </a></p>
<h3 id="x509-certificate-signed-by-unknown-authority"><a href="#x509-certificate-signed-by-unknown-authority" class="headerlink" title="x509: certificate signed by unknown authority"></a>x509: certificate signed by unknown authority</h3><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„é—®é¢˜ï¼šä¸ºäº†è¿›è¡ŒSSLè¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦SSLæ ¹è¯ä¹¦ã€‚ç„¶åscratché•œåƒæ˜¯ä¸ªç©ºé•œåƒï¼Œæ•…éœ€è¦ä¸‹è½½è¯ä¹¦æ·»åŠ åˆ°é•œåƒä¸­ã€‚</p>
<p>é¦–å…ˆä»ç½‘ç«™<code>https://curl.haxx.se/ca/cacert.pem</code>ä¸‹è½½è¯ä¹¦ï¼Œåœ¨Dockerfileä¸­æ·»åŠ åˆ°ç›®å½•<strong>/etc/ssl/certs/cacert.pem</strong> (PS: æ ¹æ®æ“ä½œç³»ç»Ÿï¼Œè¿™äº›è¯ä¹¦å¯ä»¥åœ¨è®¸å¤šä¸åŒçš„åœ°æ–¹)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Dockerfile</span><br><span class="line">.....</span><br><span class="line">ADD cacert.pem &#x2F;etc&#x2F;ssl&#x2F;certs&#x2F;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title>Git æ“ä½œ</title>
    <url>/articles/3342490105.html</url>
    <content><![CDATA[<h3 id="åˆ é™¤è¿œç¨‹åˆ†æ”¯"><a href="#åˆ é™¤è¿œç¨‹åˆ†æ”¯" class="headerlink" title="åˆ é™¤è¿œç¨‹åˆ†æ”¯"></a>åˆ é™¤è¿œç¨‹åˆ†æ”¯</h3><ul>
<li><p>æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼Œæ‰¾åˆ°è¦åˆ é™¤çš„åˆ†æ”¯åç§°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure></li>
<li><p>è¿è¡Œå‘½ä»¤åˆ é™¤è¿œç¨‹åˆ†æ”¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push origin --delete &lt;branch name&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<a id="more"></a>

<h3 id="å­æ¨¡å—"><a href="#å­æ¨¡å—" class="headerlink" title="å­æ¨¡å—"></a>å­æ¨¡å—</h3><p>  <a href="https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97" target="_blank" rel="noopener external nofollow noreferrer">å‚è€ƒ</a></p>
<ul>
<li><p>é€šè¿‡<code>git submodule add</code>å°†å¤–éƒ¨é¡¹ç›®åŠ ä¸ºå­æ¨¡å—</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git submodule add git://github.com/chneukirchen/rack.git rack</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /opt/subtest/rack/.git/</span><br><span class="line">remote: Counting objects: 3181, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (1534/1534), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3181 (delta 1951), reused 2623 (delta 1603)</span><br><span class="line">Receiving objects: 100% (3181/3181), 675.42 KiB | 422 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (1951/1951), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®</p>
<p>è¿™é‡Œä½ å°†å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®ã€‚å½“ä½ æ¥æ”¶åˆ°è¿™æ ·ä¸€ä¸ªé¡¹ç›®ï¼Œä½ å°†å¾—åˆ°äº†åŒ…å«å­é¡¹ç›®çš„ç›®å½•ï¼Œä½†é‡Œé¢æ²¡æœ‰æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git://github.com/schacon/myproject.git</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /opt/myproject/.git/</span><br><span class="line">remote: Counting objects: 6, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (4/4), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 6 (delta 0), reused 0 (delta 0)</span><br><span class="line">Receiving objects: 100% (6/6), <span class="keyword">done</span>.</span><br><span class="line">$ <span class="built_in">cd</span> myproject</span><br><span class="line">$ ls -l</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--  1 schacon  admin   3 Apr  9 09:11 README</span><br><span class="line">drwxr-xr-x  2 schacon  admin  68 Apr  9 09:11 rack</span><br><span class="line">$ ls rack/</span><br></pre></td></tr></table></figure>

<p><code>rack</code>ç›®å½•å­˜åœ¨äº†ï¼Œä½†æ˜¯æ˜¯ç©ºçš„ã€‚ä½ å¿…é¡»è¿è¡Œä¸¤ä¸ªå‘½ä»¤ï¼š<code>git submodule init</code>æ¥åˆå§‹åŒ–ä½ çš„æœ¬åœ°é…ç½®æ–‡ä»¶ï¼Œ<code>git submodule update</code>æ¥ä»é‚£ä¸ªé¡¹ç›®æ‹‰å–æ‰€æœ‰æ•°æ®å¹¶æ£€å‡ºä½ ä¸Šå±‚é¡¹ç›®é‡Œæ‰€åˆ—çš„åˆé€‚çš„æäº¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git submodule init</span><br><span class="line">Submodule <span class="string">'rack'</span> (git://github.com/chneukirchen/rack.git) registered <span class="keyword">for</span> path <span class="string">'rack'</span></span><br><span class="line">$ git submodule update</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /opt/myproject/rack/.git/</span><br><span class="line">remote: Counting objects: 3181, <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (1534/1534), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3181 (delta 1951), reused 2623 (delta 1603)</span><br><span class="line">Receiving objects: 100% (3181/3181), 675.42 KiB | 173 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (1951/1951), <span class="keyword">done</span>.</span><br><span class="line">Submodule path <span class="string">'rack'</span>: checked out <span class="string">'08d709f78b8c5b0fbeb7821e37fa53e69afcf433'</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="æœ¬åœ°ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#æœ¬åœ°ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="æœ¬åœ°ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>æœ¬åœ°ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“</h3><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/yl_cc/article/details/72676538" target="_blank" rel="noopener external nofollow noreferrer">Gitå¦‚ä½•æŠŠæœ¬åœ°ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“</a></p>
<ul>
<li><p>åˆå§‹æœ¬åœ°æ–‡ä»¶ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init   // åˆå§‹åŒ–ç‰ˆæœ¬åº“</span><br><span class="line">git commit -am <span class="string">"first commit"</span> // æŠŠæ·»åŠ çš„æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ï¼Œå¹¶å¡«å†™æäº¤å¤‡æ³¨</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å®Œæˆäº†ä»£ç åº“çš„åˆå§‹åŒ–ï¼Œä½†ä»£ç æ˜¯åœ¨æœ¬åœ°ï¼Œè¿˜æ²¡æœ‰æäº¤åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œæ‰€ä»¥å…³é”®çš„æ¥äº†ï¼Œè¦æäº¤åˆ°å°±è¿œç¨‹ä»£ç æœåŠ¡å™¨ï¼Œè¿›è¡Œä»¥ä¸‹ä¸¤æ­¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add origin ä½ çš„è¿œç¨‹åº“åœ°å€  // æŠŠæœ¬åœ°åº“ä¸è¿œç¨‹åº“å…³è”+</span><br><span class="line">git push -u origin master    // ç¬¬ä¸€æ¬¡æ¨é€æ—¶</span><br><span class="line">git push origin master  // ç¬¬ä¸€æ¬¡æ¨é€åï¼Œç›´æ¥ä½¿ç”¨è¯¥å‘½ä»¤å³å¯æ¨é€ä¿®æ”¹</span><br></pre></td></tr></table></figure>

</li>
</ul>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoåœ¨ä¸åŒç»ˆç«¯åŒæ­¥</title>
    <url>/articles/4169259295.html</url>
    <content><![CDATA[<h3 id="åœ¨hexoçš„ç›®å½•ä¸‹åˆå§‹åŒ–github"><a href="#åœ¨hexoçš„ç›®å½•ä¸‹åˆå§‹åŒ–github" class="headerlink" title="åœ¨hexoçš„ç›®å½•ä¸‹åˆå§‹åŒ–github"></a>åœ¨hexoçš„ç›®å½•ä¸‹åˆå§‹åŒ–github</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init  //åˆå§‹åŒ–æœ¬åœ°ä»“åº“</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨-gitignoreæ–‡ä»¶ä¸­æ·»åŠ å¿½ç•¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹"><a href="#åœ¨-gitignoreæ–‡ä»¶ä¸­æ·»åŠ å¿½ç•¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹" class="headerlink" title="åœ¨.gitignoreæ–‡ä»¶ä¸­æ·»åŠ å¿½ç•¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹"></a>åœ¨<code>.gitignore</code>æ–‡ä»¶ä¸­æ·»åŠ å¿½ç•¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat .gitignore</span><br><span class="line">node_modules</span><br><span class="line">debug.log</span><br><span class="line">db.json</span><br><span class="line">package-lock.json</span><br><span class="line">public</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h3 id="pushåˆ°GitHub"><a href="#pushåˆ°GitHub" class="headerlink" title="pushåˆ°GitHub"></a>pushåˆ°GitHub</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"Blog Source Hexo"</span></span><br><span class="line">git branch hexo  //æ–°å»ºhexoåˆ†æ”¯</span><br><span class="line">git checkout hexo  //åˆ‡æ¢åˆ°hexoåˆ†æ”¯ä¸Š</span><br><span class="line">git remote add origin git@github.com:yourname/yourname.github.io.git  //å°†æœ¬åœ°ä¸Githubé¡¹ç›®å¯¹æ¥</span><br></pre></td></tr></table></figure>



<h3 id="å…¶ä»–ç»ˆç«¯cloneï¼Œå®‰è£…npmçš„modulesï¼Œç”Ÿæˆblog"><a href="#å…¶ä»–ç»ˆç«¯cloneï¼Œå®‰è£…npmçš„modulesï¼Œç”Ÿæˆblog" class="headerlink" title="å…¶ä»–ç»ˆç«¯cloneï¼Œå®‰è£…npmçš„modulesï¼Œç”Ÿæˆblog"></a>å…¶ä»–ç»ˆç«¯cloneï¼Œå®‰è£…npmçš„modulesï¼Œç”Ÿæˆblog</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b hexo git@github.com:yourname/yourname.github.io.git //å°†Githubä¸­hexoåˆ†æ”¯<span class="built_in">clone</span>åˆ°æœ¬åœ°</span><br><span class="line"><span class="built_in">cd</span>  yourname.github.io  //åˆ‡æ¢åˆ°åˆšåˆš<span class="built_in">clone</span>çš„æ–‡ä»¶å¤¹å†…</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›½å†…å¯ä»¥å®‰è£…cnpmï¼Œç„¶åä½¿ç”¨cnpm installå®‰è£…ä¾èµ–åŒ…</span></span><br><span class="line"><span class="comment"># npm install -g cnpm --registry=https://registry.npm.taobao.org</span></span><br><span class="line">npm install    //æ³¨æ„ï¼Œè¿™é‡Œä¸€å®šè¦åˆ‡æ¢åˆ°åˆšåˆš<span class="built_in">clone</span>çš„æ–‡ä»¶å¤¹å†…æ‰§è¡Œï¼Œå®‰è£…å¿…è¦çš„æ‰€éœ€ç»„ä»¶ï¼Œä¸ç”¨å†init</span><br><span class="line">hexo d -g   //pushæ›´æ–°å®Œåˆ†æ”¯ä¹‹åå°†è‡ªå·±å†™çš„åšå®¢å¯¹æ¥åˆ°è‡ªå·±æ­çš„åšå®¢ç½‘ç«™ä¸Šï¼ŒåŒæ—¶åŒæ­¥äº†Githubä¸­çš„master</span><br></pre></td></tr></table></figure>

<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/Monkey_LZL/article/details/60870891" target="_blank" rel="noopener external nofollow noreferrer">å¦‚ä½•è§£å†³github+Hexoçš„åšå®¢å¤šç»ˆç«¯åŒæ­¥é—®é¢˜</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitä¸­.gitignoreæ–‡ä»¶çš„ä½¿ç”¨</title>
    <url>/articles/116146055.html</url>
    <content><![CDATA[<h2 id="gitignoreå·¥ä½œåŸç†"><a href="#gitignoreå·¥ä½œåŸç†" class="headerlink" title="gitignoreå·¥ä½œåŸç†"></a>gitignoreå·¥ä½œåŸç†</h2><p>å½“ä½ å¯¹æ–‡ä»¶è¿›è¡Œæºä»£ç ç®¡ç†æ—¶ï¼Œ<code>gitignore</code>æ’ä»¶ä¼šå»æŸ¥æ‰¾å½“å‰ç¼–è¾‘æ–‡ä»¶çš„ç›®å½•æˆ–è€…å…¶ç¥–å…ˆç›®å½•ä¸­æ˜¯å¦å­˜åœ¨<code>.gitignore</code>é…ç½®æ–‡ä»¶ã€‚ å¦‚æœå­˜åœ¨ï¼Œåˆ™<code>.gitignore</code>é…ç½®æ–‡ä»¶ä¸­å¯¹åº”é…ç½®çš„è§„åˆ™ä¼šç”Ÿæ•ˆï¼Œå¿½ç•¥å¯¹åº”çš„æ–‡ä»¶</p>
<h2 id="å¦‚ä½•ä½¿ç”¨gitignore"><a href="#å¦‚ä½•ä½¿ç”¨gitignore" class="headerlink" title="å¦‚ä½•ä½¿ç”¨gitignore"></a>å¦‚ä½•ä½¿ç”¨gitignore</h2><p>gitignoreä½¿ç”¨èµ·æ¥éå¸¸çš„æ–¹ä¾¿</p>
<ul>
<li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª<code>.gitignore</code>çš„æ–‡ä»¶</p>
</li>
<li><p>åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å®šä¹‰éœ€è¦å¿½ç•¥çš„æ–‡ä»¶</p>
</li>
<li><p>ç»™IDEå®‰è£…gitignoreæ’ä»¶</p>
</li>
<li><p><a href="https://github.com/github/gitignore" target="_blank" rel="noopener external nofollow noreferrer">.gitignoreæ–‡ä»¶æ¨¡æ¿</a></p>
</li>
<li><p><a href="https://git-scm.com/docs/gitignore" target="_blank" rel="noopener external nofollow noreferrer">å®˜æ–¹æ–‡æ¡£</a></p>
<a id="more"></a>

</li>
</ul>
<h2 id="gitignoreé…ç½®è¯­æ³•"><a href="#gitignoreé…ç½®è¯­æ³•" class="headerlink" title="gitignoreé…ç½®è¯­æ³•"></a>gitignoreé…ç½®è¯­æ³•</h2><ul>
<li>ä»¥æ–œæ <code>/</code>å¼€å¤´è¡¨ç¤ºç›®å½•</li>
<li>ä»¥æ˜Ÿå·<code>*</code>é€šé…å¤šä¸ªå­—ç¬¦</li>
<li>ä»¥é—®å·<code>?</code>é€šé…å•ä¸ªå­—ç¬¦</li>
<li>ä»¥æ–¹æ‹¬å·<code>[]</code>åŒ…å«å•ä¸ªå­—ç¬¦çš„åŒ¹é…åˆ—è¡¨</li>
<li>ä»¥å¹å·<code>!</code>è¡¨ç¤ºä¸å¿½ç•¥(è·Ÿè¸ª)åŒ¹é…åˆ°çš„æ–‡ä»¶æˆ–ç›®å½•</li>
<li>ä»¥äºŒä¸ªæ˜Ÿå·<code>**</code>å¼€å¤´è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ç›®å½•</li>
<li>ä»¥äºŒä¸ªæ˜Ÿå·<code>/**</code>ç»“å°¾è¡¨ç¤ºåŒ¹é…ç›®å½•é‡Œçš„æ‰€æœ‰</li>
<li>ä»¥æ–œæ ä¸­é—´çš„äºŒä¸ªæ˜Ÿå·<code>/**/</code>è¡¨ç¤º0æˆ–å¤šä¸ªç›®å½•</li>
</ul>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><ol>
<li><p>è§„åˆ™ï¼š<code>fd1/*</code></p>
<p>è¯´æ˜ï¼šå¿½ç•¥ç›®å½• <code>fd1</code> ä¸‹çš„å…¨éƒ¨å†…å®¹ï¼›æ³¨æ„ï¼Œä¸ç®¡æ˜¯æ ¹ç›®å½•ä¸‹çš„ <code>/fd1/</code> ç›®å½•ï¼Œè¿˜æ˜¯æŸä¸ªå­ç›®å½• <code>/child/fd1/</code> ç›®å½•ï¼Œéƒ½ä¼šè¢«å¿½ç•¥ï¼›</p>
</li>
<li><p>è§„åˆ™ï¼š<code>/fd1/*</code> ã€€ã€€ã€€ã€€<br>è¯´æ˜ï¼šå¿½ç•¥æ ¹ç›®å½•ä¸‹çš„ <code>/fd1/</code> ç›®å½•çš„å…¨éƒ¨å†…å®¹ï¼›</p>
</li>
<li><p>è§„åˆ™ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/*</span><br><span class="line">!.gitignore</span><br><span class="line">!/foo</span><br><span class="line">!/foo/bar</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼šå¿½ç•¥å…¨éƒ¨å†…å®¹ï¼Œä½†æ˜¯ä¸å¿½ç•¥ <code>.gitignore</code> æ–‡ä»¶ã€æ ¹ç›®å½•ä¸‹çš„ <code>/foo</code> å’Œ <code>/foo/bar</code>ç›®å½•</p>
</li>
<li><p>å¿½ç•¥æŒ‡å®šæ–‡ä»¶/ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¿½ç•¥æŒ‡å®šæ–‡ä»¶</span></span><br><span class="line">HelloWrold.class</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¿½ç•¥æŒ‡å®šæ–‡ä»¶å¤¹</span></span><br><span class="line">bin/</span><br><span class="line">bin/gen/</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šé…ç¬¦å¿½ç•¥è§„åˆ™</p>
<p>é€šé…ç¬¦è§„åˆ™å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¿½ç•¥.classçš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">*.class</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¿½ç•¥åç§°ä¸­æœ«å°¾ä¸ºignoreçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">*ignore/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¿½ç•¥åç§°ä¸­é—´åŒ…å«ignoreçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">*ignore*/s</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="æŸ¥çœ‹gitignoreè§„åˆ™"><a href="#æŸ¥çœ‹gitignoreè§„åˆ™" class="headerlink" title="æŸ¥çœ‹gitignoreè§„åˆ™"></a>æŸ¥çœ‹gitignoreè§„åˆ™</h2><p>   å¦‚æœä½ å‘ä¸‹<code>.gitignore</code>å†™å¾—æœ‰é—®é¢˜ï¼Œéœ€è¦æ‰¾å‡ºæ¥åˆ°åº•å“ªä¸ªè§„åˆ™å†™é”™äº†ï¼Œå¯ä»¥ç”¨<code>git check-ignore</code>å‘½ä»¤æ£€æŸ¥ï¼š</p>
   <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git check-ignore -v HelloWorld.class</span><br><span class="line">.gitignore:1:*.class    HelloWorld.class</span><br></pre></td></tr></table></figure>

<p>   å¯ä»¥çœ‹åˆ°<code>HelloWorld.class</code>åŒ¹é…åˆ°äº†æˆ‘ä»¬çš„ç¬¬ä¸€æ¡<code>*.class</code>çš„å¿½ç•¥è§„åˆ™æ‰€ä»¥æ–‡ä»¶è¢«å¿½ç•¥äº†ã€‚</p>
<h2 id="ä½¿ç”¨æŠ€å·§"><a href="#ä½¿ç”¨æŠ€å·§" class="headerlink" title="ä½¿ç”¨æŠ€å·§"></a>ä½¿ç”¨æŠ€å·§</h2><p>è¦å¿½ç•¥å·²å­˜åœ¨çš„æ–‡ä»¶æˆ–è·¯å¾„æ—¶ï¼Œå¦‚æœæ­¤æ—¶ä»£ç ä»“åº“å·²å­˜åœ¨è¯¥è·¯å¾„æˆ–æ–‡ä»¶ï¼Œéœ€è¦å…ˆç§»é™¤æœ¬åœ°çš„è·¯å¾„æˆ–æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼Œæœ€åå†pushåˆ°ä»“åº“ï¼š</p>
<ul>
<li>å¦‚æœè¦ç§»é™¤è·¯å¾„ dir</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rm --cached -r dir/</span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœè¦ç§»é™¤æ–‡ä»¶ doc.txt</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rm --cached -r doc.txt</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.jianshu.com/p/a09a9b40ad20" target="_blank" rel="noopener external nofollow noreferrer">Gitå¿½ç•¥æ–‡ä»¶.gitignoreçš„ä½¿ç”¨</a></p>
<p><a href="https://juejin.im/post/5b4a4cd5e51d4519520e5775" target="_blank" rel="noopener external nofollow noreferrer">ä»£ç ç®¡ç†å·¥å…·Gitçš„ä½¿ç”¨â€“gitignore</a></p>
<p><a href="gitignoreä½¿ç”¨å°è®°">gitignoreä½¿ç”¨å°è®°</a>    </p>
<p>â€‹    </p>
<p>â€‹    </p>
<p>â€‹    </p>
<p>â€‹    </p>
<p>â€‹    </p>
<p>â€‹    </p>
<p>â€‹    </p>
<p>â€‹    </p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²hexoåšå®¢</title>
    <url>/articles/4283262726.html</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨<a href="https://travis-ci.com" target="_blank" rel="noopener external nofollow noreferrer">Travis CI</a>ä¸­è¿›è¡ŒæŒç»­é›†æˆï¼Œè‡ªåŠ¨æŠŠhexoåšå®¢çš„æºç ç”Ÿæˆé™æ€ç½‘é¡µï¼Œè®°å½•ä¸€ä¸‹è‡ªå·±é…ç½®è¿‡ç¨‹ã€‚æŒç»­é›†æˆååªéœ€æ¯æ¬¡æäº¤æ–‡ç« çš„markdownæ–‡ä»¶åˆ°åšå®¢ä»“åº“ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆé™æ€ç½‘é¡µï¼Œç„¶åæ›´æ–°ç½‘ç«™ã€‚</p>
<h2 id="ä»£ç ä»“åº“æ·»åŠ Token"><a href="#ä»£ç ä»“åº“æ·»åŠ Token" class="headerlink" title="ä»£ç ä»“åº“æ·»åŠ Token"></a>ä»£ç ä»“åº“æ·»åŠ Token</h2><h3 id="Githubæ·»åŠ Token"><a href="#Githubæ·»åŠ Token" class="headerlink" title="Githubæ·»åŠ Token"></a>Githubæ·»åŠ Token</h3><p>ç™»å½•<a href="https://github.com" target="_blank" rel="noopener external nofollow noreferrer">Github</a>æ‰“å¼€ä¸ªäººè®¾ç½®ï¼Œé€‰æ‹©<code>Developer settings</code> å¹¶åœ¨<code>Personal acces tokens</code>ä¸­ç‚¹å‡»<code>Generate new token</code>ç”Ÿæˆ<code>Travis-ci TOKEN</code></p>
<p> <img src="https://image.ritboy.com/markdown/202004/e0e352ff450de08d72d003b501166fe5.jpg" alt="image-20200421213522559"></p>
<a id="more"></a>

<p>åœ¨<code>New personal access token</code>ç•Œé¢é…ç½®tokençš„ä½œç”¨åŸŸï¼Œå¦‚å›¾é€‰æ‹©ç¬¬ä¸€ä¸ª<code>repo</code>èƒ½PUSHå’ŒPULLä»£ç ï¼Œå…¶ä½™çš„å¦‚æœéœ€è¦è‡ªè¡Œæ–Ÿé…Œã€‚</p>
<p>  <img src="https://image.ritboy.com/markdown/202004/52691566eb6ce813572c1b48018e407f.jpg" alt="image-20200421214124737"></p>
<p>æŠŠç”Ÿæˆçš„TOKENå¤åˆ¶ä¿å­˜ï¼Œç„¶ååœ¨<code>Travis CI</code>ä¸­å¯¹åº”çš„ä»“åº“æ·»åŠ ã€‚<strong>æ³¨æ„</strong>ï¼štokenä¸€æ¬¡æ€§çš„ï¼Œå¦‚æœåˆ·æ–°é¡µé¢åªèƒ½é‡æ–°å†æ¬¡æ·»åŠ ã€‚</p>
<p><img src="https://image.ritboy.com/markdown/202004/2857ba65ec0e902993f2bd236a0169c6.jpg" alt="image-20200421214641334"></p>
<h3 id="Codingä¸­æ·»åŠ Token"><a href="#Codingä¸­æ·»åŠ Token" class="headerlink" title="Codingä¸­æ·»åŠ Token"></a>Codingä¸­æ·»åŠ Token</h3><p>ç™»å½•<a href="https://coding.net" target="_blank" rel="noopener external nofollow noreferrer">Coding</a>æ‰“å¼€ä¸ªäººè®¾ç½®ï¼Œåœ¨<code>è®¿é—®ä»¤ç‰Œ</code>ä¸­é€‰æ‹©<code>æ–°å»ºä»¤ç‰Œ</code>ã€‚</p>
<p> <img src="https://image.ritboy.com/markdown/202004/391162ef6164a62a02101d3445c78851.jpg" alt="image-20200421215022580"></p>
<p>åœ¨æ–°å»ºä»¤ç‰Œç•Œé¢é…ç½®å¥½é‡Œé¢åç§°åï¼Œé€‰æ‹©å›¾ä¸­ç¬¬ä¸€é¡¹å³å¯ï¼Œå…¶ä½™çš„å¦‚æœéœ€è¦è‡ªè¡Œæ–Ÿé…Œã€‚</p>
<p> <img src="https://image.ritboy.com/markdown/202004/ef34348ca915a2187695d184c567646c.jpg" alt="image-20200421221028615"></p>
<p>åˆ›å»ºtokenæˆåŠŸåï¼Œè¯·å¤åˆ¶ä¿å­˜å¥½<code>Token</code>å’Œ<code>ä»¤ç‰Œç”¨æˆ·å</code>ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p>
<p> <img src="https://image.ritboy.com/markdown/202004/63a04f88b0e812104d574bf5c26b4479.jpg" alt="image-20200421221240239"></p>
<h3 id="åœ¨Travisçš„ä»“åº“è®¾ç½®ä¸­æ·»åŠ è·å–çš„Token"><a href="#åœ¨Travisçš„ä»“åº“è®¾ç½®ä¸­æ·»åŠ è·å–çš„Token" class="headerlink" title="åœ¨Travisçš„ä»“åº“è®¾ç½®ä¸­æ·»åŠ è·å–çš„Token"></a>åœ¨Travisçš„ä»“åº“è®¾ç½®ä¸­æ·»åŠ è·å–çš„Token</h3><p>åœ¨ç•Œé¢ä¸Šåˆ†åˆ«æ·»åŠ <code>CODING_TOKEN</code>ï¼Œ<code>CODING_USER</code>ï¼Œ<code>GITHUB_TOKEN</code>ã€‚<strong>æ³¨æ„</strong>ï¼šè¯·æŠŠ<code>DISPLAY VALUE IN BUILD LOG</code>ç¦æ‰é˜²æ­¢TOKENæ³„éœ²ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p>
<p> <img src="https://image.ritboy.com/markdown/202004/e317bf196cf94d8919536c9293cd83ae.jpg" alt="image-20200421221657537"></p>
<h2 id="ç¼–å†™-travis-ymlæ–‡ä»¶"><a href="#ç¼–å†™-travis-ymlæ–‡ä»¶" class="headerlink" title="ç¼–å†™.travis.ymlæ–‡ä»¶"></a>ç¼–å†™.travis.ymlæ–‡ä»¶</h2><p>åœ¨æ‰€æœ‰çš„å‡†å¤‡å·¥ä½œå®Œæˆåå°±æ˜¯è¦å®šåˆ¶æˆ‘ä»¬è‡ªåŠ¨æ„å»ºéƒ¨ç½²çš„å·¥ä½œæµç¨‹äº†ã€‚Travis CI é€šè¿‡ä»“åº“æ ¹ç›®å½•ä¸‹çš„ <code>.travis.yml</code> æ–‡ä»¶æ¥å®šåˆ¶å·¥ä½œæµç¨‹ã€‚</p>
<h3 id="å¦å»ºä¸€ä¸ªä»“åº“ç»™Travisä½¿ç”¨"><a href="#å¦å»ºä¸€ä¸ªä»“åº“ç»™Travisä½¿ç”¨" class="headerlink" title="å¦å»ºä¸€ä¸ªä»“åº“ç»™Travisä½¿ç”¨"></a>å¦å»ºä¸€ä¸ªä»“åº“ç»™Travisä½¿ç”¨</h3><p>Travisä¸Šå¼€æºçš„ä»“åº“æ˜¯å…è´¹çš„ï¼Œç§æœ‰çš„ä»“åº“æœ‰ä½¿ç”¨æ¬¡æ•°ï¼ˆå¥½åƒæ˜¯100æ¬¡å§ï¼‰ã€‚</p>
<p> <img src="https://image.ritboy.com/markdown/202004/dd1346b3481890dc7cf2032f585548ae.jpg" alt="image-20200421225857293"></p>
<p>è‡ªå·±çš„åšå®¢æºç å’Œä¸»é¢˜åœ¨Githubä¸Šä¸ºç§æœ‰ä»“åº“ï¼Œæ‰€ä»¥å•ç‹¬åˆ›å»ºäº†ä¸ªä»“åº“ç»™Travisä½¿ç”¨ã€‚å¹¶ä¸”æŠŠè¿™ä¸ªä»“åº“ä½œä¸ºåšå®¢æºç çš„å­æ¨¡å—ã€‚ç›®å½•ç»“æ„å¦‚ä¸‹</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">â”‚</span> <span class="string">package.json</span></span><br><span class="line"><span class="string">â”‚</span> <span class="string">.gitignore</span></span><br><span class="line"><span class="string">â”‚</span> <span class="string">_config.yml</span></span><br><span class="line"><span class="string">â”‚</span> <span class="string">git-push.sh</span></span><br><span class="line"><span class="string">â”œâ”€scaffolds</span></span><br><span class="line"><span class="string">â”‚</span>      <span class="string">draft.md</span></span><br><span class="line"><span class="string">â”‚</span>      <span class="string">page.md</span></span><br><span class="line"><span class="string">â”‚</span>      <span class="string">post.md</span></span><br><span class="line"><span class="string">â”œâ”€source</span></span><br><span class="line"><span class="string">â”‚</span>   <span class="string">â”œâ”€xxxxxx</span></span><br><span class="line"><span class="string">â”‚</span>   <span class="string">â”œâ”€xxxxxx</span></span><br><span class="line"><span class="string">â”‚</span>   <span class="string">â””â”€_posts</span></span><br><span class="line"><span class="string">â”‚</span>      <span class="string">â”œâ”€xxxxxx</span></span><br><span class="line"><span class="string">â”‚</span>      <span class="string">â””â”€xxxxxx</span>       </span><br><span class="line"><span class="string">â”œâ”€travis</span>		<span class="comment"># å­æ¨¡å—</span></span><br><span class="line"><span class="string">â”‚</span>	  <span class="string">â”œâ”€.travis.yml</span></span><br><span class="line"><span class="string">â”‚</span></span><br><span class="line"><span class="string">â””â”€themes</span></span><br><span class="line">    <span class="string">â””â”€xxxxxx</span></span><br></pre></td></tr></table></figure>



<p>ç¼–å†™äº†ä¸ªç®€å•çš„<code>PUSH</code>è„šæœ¬ï¼Œä½¿å¾—åšå®¢æºç ä»“åº“æ›´æ–°åŒæ—¶æ›´æ–°Travisçš„ä»“åº“ã€‚æœ‰æ–‡ç« æ›´æ–°æ—¶è¿è¡Œè¯¥è„šæœ¬å³å¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line">commit=<span class="variable">$1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># blog code push</span></span><br><span class="line"><span class="comment">#curdate=`date '+%Y%m%d-%H:%M:%S'`</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"blog code repository push"</span></span><br><span class="line">blog_branch=`git symbolic-ref --short -q HEAD`</span><br><span class="line">git status</span><br><span class="line">sleep 1</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"<span class="variable">$commit</span>"</span></span><br><span class="line">git push origin <span class="variable">$blog_branch</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤ travis æ¨¡å—</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"travis repository push"</span></span><br><span class="line"><span class="built_in">cd</span> travis</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"set blog branch to .travis.yml"</span></span><br><span class="line"><span class="comment"># macOS sed</span></span><br><span class="line">sed -i <span class="string">""</span> -e <span class="string">"s#- BLOG_CODE_BRANCH=.*#- BLOG_CODE_BRANCH=<span class="variable">$blog_branch</span>#g"</span> .travis.yml</span><br><span class="line"><span class="comment"># linux sed</span></span><br><span class="line"><span class="comment">#sed -i "s#- BLOG_CODE_BRANCH=.*#- BLOG_CODE_BRANCH=$blog_branch#g" .travis.yml</span></span><br><span class="line"></span><br><span class="line">curdate=`date <span class="string">'+%Y%m%d-%H:%M:%S'</span>`</span><br><span class="line">git checkout master</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$commit</span> <span class="variable">$curdate</span>"</span> &gt; commit-blog.txt</span><br><span class="line">git status</span><br><span class="line">sleep 1</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"<span class="variable">$commit</span>"</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>



<h3 id="å®Œæ•´é…ç½®æ–‡ä»¶"><a href="#å®Œæ•´é…ç½®æ–‡ä»¶" class="headerlink" title="å®Œæ•´é…ç½®æ–‡ä»¶"></a>å®Œæ•´é…ç½®æ–‡ä»¶</h3><p>ä»¥ä¸‹ä¸ºç›®å‰è‡ªå·±æ‰€ä½¿ç”¨çš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span> <span class="string">lts/*</span></span><br><span class="line"><span class="attr">os:</span> <span class="string">linux</span></span><br><span class="line"><span class="attr">dist:</span> <span class="string">trusty</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">BLOG_CODE_DIR=blog-code</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">BLOG_CODE_BRANCH=ritboy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">git:</span></span><br><span class="line">  <span class="attr">depth:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">submodules:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æš‚æ—¶ä¸èƒ½ç”¨ï¼Œå› ä¸ºä½¿ç”¨ç¼“å­˜ågitåšå®¢ä»£ç æ—¶$&#123;BLOG_CODE_DIR&#125;ç›®å½•ä¸ä¸ºç©º</span></span><br><span class="line"><span class="comment">#cache: </span></span><br><span class="line"><span class="comment">#  directories:</span></span><br><span class="line"><span class="comment">#   - $&#123;BLOG_CODE_DIR&#125;/node_modules</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line">  <span class="comment"># Git Config</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">"ritboy"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">"ritboylei@gmail.com"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># clone blog code</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">https://$&#123;GITHUB_TOKEN&#125;@github.com/ritboylei/blog-code-ritboy.git</span> <span class="string">$&#123;BLOG_CODE_DIR&#125;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">./$&#123;BLOG_CODE_DIR&#125;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">checkout</span> <span class="string">$&#123;BLOG_CODE_BRANCH&#125;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">"s#https://github.com/ritboylei/ritboylei.github.io.git#https://$&#123;GITHUB_TOKEN&#125;@github.com/ritboylei/ritboylei.github.io.git#g"</span> <span class="string">_config.yml</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">"s#https://e.coding.net/ritboy/blog.git#https://$&#123;CODING_USER&#125;:$&#123;CODING_TOKEN&#125;@e.coding.net/ritboy/blog.git#g"</span> <span class="string">_config.yml</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Restore last modified time</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"git ls-files -z | while read -d '' path; do touch -d \"$(git log -1 --format=\"@%ct\" \"$path\")\" \"$path\"; done"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Submodules</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">https://$&#123;GITHUB_TOKEN&#125;@github.com/ritboylei/hexo-theme-ritboy.git</span> <span class="string">themes/ritboy</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Deploy history</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">--branch=master</span> <span class="string">--single-branch</span> <span class="string">https://github.com/ritboylei/ritboylei.github.io.git</span> <span class="string">.deploy_git</span></span><br><span class="line"></span><br><span class="line"><span class="attr">install:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">g</span> <span class="string">-d</span></span><br></pre></td></tr></table></figure>



<h3 id="è§£è¯»ä¸‹é…ç½®æ–‡ä»¶"><a href="#è§£è¯»ä¸‹é…ç½®æ–‡ä»¶" class="headerlink" title="è§£è¯»ä¸‹é…ç½®æ–‡ä»¶"></a>è§£è¯»ä¸‹é…ç½®æ–‡ä»¶</h3><p><a href="https://docs.travis-ci.com/user/languages/javascript-with-nodejs" target="_blank" rel="noopener external nofollow noreferrer">traviså®˜ç½‘Node.jsé…ç½®</a>ï¼Œé¦–å…ˆéœ€è¦ç¡®å®šéƒ¨ç½²ç¯å¢ƒï¼ŒHexo æ˜¯åŸºäº nodejs çš„ã€‚</p>
<ul>
<li><code>node</code> æœ€æ–°ç¨³å®šçš„Node.jsç‰ˆæœ¬ ï¼ˆå¯èƒ½è¿è¡ŒæŠ¥é”™ï¼‰</li>
<li><code>lts/*</code>æœ€æ–°é•¿æœŸç»´æŠ¤Node.jsç‰ˆæœ¬ ï¼ˆ<strong>å»ºè®®ç‰ˆæœ¬</strong>ï¼‰</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span> <span class="string">lts/*</span></span><br><span class="line"><span class="attr">os:</span> <span class="string">linux</span></span><br><span class="line"><span class="attr">dist:</span> <span class="string">trusty</span></span><br></pre></td></tr></table></figure>



<p>ç„¶åæˆ‘ä»¬è®¾ç½®ä¸€ä¸‹æ—¶åŒºä»¥ä¾¿ hexo èƒ½æ­£ç¡®æ ¹æ®æ—¶é—´ç”Ÿæˆæ–‡ä»¶å/æ–‡ä»¶ç›®å½•ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿æˆ‘ä»¬åé¢åœ¨ commit ä¿¡æ¯ä¸­è®°å½•æ›´æ–°æ—¶é—´ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">git:</span></span><br><span class="line">  <span class="attr">depth:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">submodules:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>



<p><code>travis.com</code> è¿˜æä¾›äº† <code>cache</code> å‚æ•°å¯ä»¥å¯¹ç‰¹å®šç›®å½•è¿›è¡Œç¼“å­˜ï¼Œæˆ‘ä»¬å¯ä»¥ç¼“å­˜<code>node_modules</code>ç›®å½•ï¼Œç½‘ä¸Šè¯´æ˜¯èƒ½åŠ å¿«åç»­æ„å»ºçš„é€Ÿåº¦ã€‚<strong>æš‚æœªä½¿ç”¨</strong>ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æš‚æ—¶ä¸èƒ½ç”¨ï¼Œå› ä¸ºä½¿ç”¨ç¼“å­˜ågitåšå®¢ä»£ç æ—¶$&#123;BLOG_CODE_DIR&#125;ç›®å½•ä¸ä¸ºç©º</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules</span></span><br></pre></td></tr></table></figure>



<p>ç”±äºæœ¬äººçš„åšå®¢æºç ä½¿ç”¨äº†gitçš„å­æ¨¡å—ï¼Œéœ€è¦é…ç½®ä¸‹gitå¦åˆ™æ„å»ºæ—¶ä¼šæŠ¥é”™ã€‚æ˜¯å› ä¸ºå­æ¨¡å—çš„çš„ä»“åº“æ˜¯ç§æœ‰çš„ï¼Œä¹ˆæœ‰æƒé™ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">git:</span></span><br><span class="line">  <span class="attr">depth:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">submodules:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>



<p>è·å–åšå®¢æºç ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€šè¿‡å¦‚ä¸‹æ ¼å¼çš„ url è®¿é—®æ¥ä¿è¯å¯¹ä»“åº“æœ‰æ“ä½œæƒï¼š<code>https://your-gitHub-personal-access-token@your-repo-url</code>ã€‚ç”±äºæˆ‘ä»¬å‰é¢æŠŠ <code>GitHub Personal Access Token/Coding Token</code> å’Œ <code>GitHub Pages/Coding</code> ä»“åº“é“¾æ¥éƒ½å†™è¿›äº†ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥ç›´æ¥é€šè¿‡ç¯å¢ƒå˜é‡å¼•ç”¨å°±è¡Œäº†ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">before_install:</span></span><br><span class="line">  <span class="comment"># Git Configï¼Œgit pushä¼šæœ‰ç”¨</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">"ritboy"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">"ritboylei@gmail.com"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># clone blog codeï¼Œclone ritboyåˆ†æ”¯</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">https://$&#123;GITHUB_TOKEN&#125;@github.com/ritboylei/blog-code-ritboy.git</span> <span class="string">$&#123;BLOG_CODE_DIR&#125;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">./$&#123;BLOG_CODE_DIR&#125;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">checkout</span> <span class="string">$&#123;BLOG_CODE_BRANCH&#125;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># æ›¿æ¢ä¸»ç«™é…ç½®æ–‡ä»¶ä¸­githubçš„URLï¼Œä¸ºpushåšå‡†å¤‡</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">"s#https://github.com/ritboylei/ritboylei.github.io.git#https://$&#123;GITHUB_TOKEN&#125;@github.com/ritboylei/ritboylei.github.io.git#g"</span> <span class="string">_config.yml</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># æ›¿æ¢ä¸»ç«™é…ç½®æ–‡ä»¶ä¸­codingçš„URLï¼Œä¸ºpushåšå‡†å¤‡</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">"s#https://e.coding.net/ritboy/blog.git#https://$&#123;CODING_USER&#125;:$&#123;CODING_TOKEN&#125;@e.coding.net/ritboy/blog.git#g"</span> <span class="string">_config.yml</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Restore last modified timeï¼Œåšå®¢ä¸­æ–‡ç« æ›´æ–°æ”¹ä¸ºgitä»“åº“ä¸­æœ€åæäº¤æ—¶é—´</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"git ls-files -z | while read -d '' path; do touch -d \"$(git log -1 --format=\"@%ct\" \"$path\")\" \"$path\"; done"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Submodulesï¼Œä¸»é¢˜ä»£ç </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">https://$&#123;GITHUB_TOKEN&#125;@github.com/ritboylei/hexo-theme-ritboy.git</span> <span class="string">themes/ritboy</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Deploy history ä¿ç•™ç”Ÿæˆé™æ€åšå®¢çš„commitå†å²</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">--branch=master</span> <span class="string">--single-branch</span> <span class="string">https://github.com/ritboylei/ritboylei.github.io.git</span> <span class="string">.deploy_git</span></span><br></pre></td></tr></table></figure>



<p>æœ€åå®‰è£…åšå®¢æ‰€éœ€è¦çš„<code>npm</code>åŒ…ï¼Œå¹¶é€šè¿‡<code>hexo</code>å‘½ä»¤éƒ¨ç½²åˆ°Githubå’ŒCodingä»“åº“ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">install:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">g</span> <span class="string">-d</span></span><br></pre></td></tr></table></figure>



<h2 id="è¿è¡Œæ•ˆæœ"><a href="#è¿è¡Œæ•ˆæœ" class="headerlink" title="è¿è¡Œæ•ˆæœ"></a>è¿è¡Œæ•ˆæœ</h2><p>å°†ä¸Šé¢æ‰€æœ‰çš„ä¸œè¥¿é…ç½®å¥½ä¹‹å <code>git push</code> ä¸€ä¸‹å°±å¯ä»¥åœ¨ä½ ç”¨çš„ Travis CI ç½‘ç«™ä¸Šçœ‹åˆ° build è¿‡ç¨‹å•¦ã€‚è‹¥æ— æ„å¤–ï¼Œç¨ç­‰ä¸€ä¼šå„¿å°±èƒ½çœ‹åˆ°ç»¿è‰²çš„<code>build passing</code>å›¾æ ‡ï¼Œåšå®¢å†…å®¹ä¹ŸæˆåŠŸæ›´æ–°å•¦ã€‚</p>
<p>åœ¨Travis CIçš„buildç•Œé¢å¯ä»¥ç‚¹å‡»ç»¿è‰²çš„<code>build passing</code>å›¾æ ‡è·å–é“¾æ¥ï¼Œç„¶åå€’å…¥è‡ªå·±çš„åšå®¢æˆ–è€…gitä»“åº“ä¸­ã€‚</p>
<p> <img src="https://image.ritboy.com/markdown/202004/b97fb3f7fe98f473b9ca622bea6a46a9.jpg" alt="image-20200421224108481"></p>
<h2 id="æ›¾é‡åˆ°çš„é—®é¢˜"><a href="#æ›¾é‡åˆ°çš„é—®é¢˜" class="headerlink" title="æ›¾é‡åˆ°çš„é—®é¢˜"></a>æ›¾é‡åˆ°çš„é—®é¢˜</h2><h3 id="è¿è¡Œhexo-dæ—¶æŠ¥é”™"><a href="#è¿è¡Œhexo-dæ—¶æŠ¥é”™" class="headerlink" title="è¿è¡Œhexo dæ—¶æŠ¥é”™"></a>è¿è¡Œ<code>hexo d</code>æ—¶æŠ¥é”™</h3><p>å‡ºç°<code>TypeError [ERR_INVALID_ARG_TYPE]: The &quot;mode&quot; argument must be integer. Received an instance of Object</code>ï¼Œå¯èƒ½æ˜¯æœ€æ–°çš„node_jsç‰ˆæœ¬é—®é¢˜ï¼Œåœ¨<code>Travis</code>çš„é…ç½®æ–‡ä»¶ä¸­æŠŠnode_jsçš„ç‰ˆæœ¬æ”¹ä¸º<code>lts/*</code></p>
<p> <img src="https://image.ritboy.com/markdown/202004/e7e05a6f13577d36951975b556345d35.jpg" alt="image-20200422223200056"></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://theme-next.org/docs/getting-started/deployment" target="_blank" rel="noopener external nofollow noreferrer">https://theme-next.org/docs/getting-started/deployment</a></p>
<p><a href="https://xirikm.net/2019/826-2" target="_blank" rel="noopener external nofollow noreferrer">https://xirikm.net/2019/826-2</a></p>
<p><a href="https://liyangzone.com/2020/01/16/deploy-hexo-blog-with-travis-ci/" target="_blank" rel="noopener external nofollow noreferrer">https://liyangzone.com/2020/01/16/deploy-hexo-blog-with-travis-ci/</a></p>
<p><a href="https://easyhexo.com/1-Hexo-install-and-config/1-5-continuous-integration.html" target="_blank" rel="noopener external nofollow noreferrer">https://easyhexo.com/1-Hexo-install-and-config/1-5-continuous-integration.html</a></p>
<p><a href="https://michael728.github.io/2019/06/16/cicd-hexo-blog-travis/" target="_blank" rel="noopener external nofollow noreferrer">https://michael728.github.io/2019/06/16/cicd-hexo-blog-travis/</a></p>
<p><a href="https://maologue.com/Auto-deploy-Hexo-with-Travis-CI/" target="_blank" rel="noopener external nofollow noreferrer">https://maologue.com/Auto-deploy-Hexo-with-Travis-CI/</a></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Travis</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7ä¸­ç”¨kubeadmå®‰è£…Kubernetes</title>
    <url>/articles/3827057181.html</url>
    <content><![CDATA[<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>æ¯ä¸ªèŠ‚ç‚¹å‡è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤</p>
<h3 id="å…³é—­é˜²ç«å¢™"><a href="#å…³é—­é˜²ç«å¢™" class="headerlink" title="å…³é—­é˜²ç«å¢™"></a>å…³é—­é˜²ç«å¢™</h3><p>å¦‚æœå„ä¸ªä¸»æœºå¯ç”¨äº†é˜²ç«å¢™ï¼Œéœ€è¦å¼€æ”¾Kuberneteså„ä¸ªç»„ä»¶æ‰€éœ€è¦çš„ç«¯å£ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/" target="_blank" rel="noopener external nofollow noreferrer">Installing kubeadm</a>ä¸­çš„â€Check required portsâ€ä¸€èŠ‚ã€‚ è¿™é‡Œç®€å•èµ·è§åœ¨å„èŠ‚ç‚¹ç¦ç”¨é˜²ç«å¢™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h3 id="ç¦ç”¨SELINUX"><a href="#ç¦ç”¨SELINUX" class="headerlink" title="ç¦ç”¨SELINUX"></a>ç¦ç”¨SELINUX</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸´æ—¶ç¦ç”¨</span><br><span class="line">setenforce 0</span><br><span class="line"></span><br><span class="line"># æ°¸ä¹…ç¦ç”¨ </span><br><span class="line">vim &#x2F;etc&#x2F;selinux&#x2F;config	# æˆ–è€…ä¿®æ”¹&#x2F;etc&#x2F;sysconfig&#x2F;selinux</span><br><span class="line">SELINUX&#x3D;disabled</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹k8s-confæ–‡ä»¶"><a href="#ä¿®æ”¹k8s-confæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹k8s.confæ–‡ä»¶"></a>ä¿®æ”¹k8s.confæ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt;  &#x2F;etc&#x2F;sysctl.d&#x2F;k8s.conf</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables &#x3D; 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables &#x3D; 1</span><br><span class="line">EOF</span><br><span class="line">sysctl --system</span><br></pre></td></tr></table></figure>

<h3 id="å…³é—­swap"><a href="#å…³é—­swap" class="headerlink" title="å…³é—­swap"></a>å…³é—­swap</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸´æ—¶å…³é—­</span><br><span class="line">swapoff -a</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ /etc/fstab æ–‡ä»¶ï¼Œæ³¨é‡Šæ‰ SWAP çš„è‡ªåŠ¨æŒ‚è½½ï¼ˆæ°¸ä¹…å…³é—­swapï¼Œé‡å¯åç”Ÿæ•ˆï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ³¨é‡Šæ‰ä»¥ä¸‹å­—æ®µ</span><br><span class="line">&#x2F;dev&#x2F;mapper&#x2F;cl-swap     swap                    swap    defaults        0 0</span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h2><h3 id="å¸è½½è€ç‰ˆæœ¬çš„Docker"><a href="#å¸è½½è€ç‰ˆæœ¬çš„Docker" class="headerlink" title="å¸è½½è€ç‰ˆæœ¬çš„Docker"></a>å¸è½½è€ç‰ˆæœ¬çš„Docker</h3><p>å¦‚æœæœ‰æ²¡æœ‰è€ç‰ˆæœ¬Dockerï¼Œåˆ™ä¸éœ€è¦è¿™æ­¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum remove docker \</span><br><span class="line">           docker-common \</span><br><span class="line">           docker-selinux \</span><br><span class="line">           docker-engine</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨yumè¿›è¡Œå®‰è£…"><a href="#ä½¿ç”¨yumè¿›è¡Œå®‰è£…" class="headerlink" title="ä½¿ç”¨yumè¿›è¡Œå®‰è£…"></a>ä½¿ç”¨yumè¿›è¡Œå®‰è£…</h3><p>æ¯ä¸ªèŠ‚ç‚¹å‡è¦å®‰è£…ï¼Œç›®å‰å®˜ç½‘å»ºè®®å®‰è£…17.03ç‰ˆæœ¬çš„dockerï¼Œ<a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘é“¾æ¥</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·</span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"># Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯</span><br><span class="line">sudo yum-config-manager --add-repo http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span><br><span class="line"># Step 3: æ›´æ–°å¹¶å®‰è£… Docker-CE</span><br><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum -y install docker-ce docker-ce-selinux</span><br><span class="line"># æ³¨æ„ï¼š</span><br><span class="line"># å®˜æ–¹è½¯ä»¶æºé»˜è®¤å¯ç”¨äº†æœ€æ–°çš„è½¯ä»¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘è½¯ä»¶æºçš„æ–¹å¼è·å–å„ä¸ªç‰ˆæœ¬çš„è½¯ä»¶åŒ…ã€‚ä¾‹å¦‚å®˜æ–¹å¹¶æ²¡æœ‰å°†æµ‹è¯•ç‰ˆæœ¬çš„è½¯ä»¶æºç½®ä¸ºå¯ç”¨ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å¯ã€‚åŒç†å¯ä»¥å¼€å¯å„ç§æµ‹è¯•ç‰ˆæœ¬ç­‰ã€‚</span><br><span class="line"># vim &#x2F;etc&#x2F;yum.repos.d&#x2F;docker-ce.repo</span><br><span class="line">#   å°† [docker-ce-test] ä¸‹æ–¹çš„ enabled&#x3D;0 ä¿®æ”¹ä¸º enabled&#x3D;1</span><br><span class="line">#</span><br><span class="line"># å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE:</span><br><span class="line"># Step 3.1: æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬:</span><br><span class="line"># yum list docker-ce.x86_64 --showduplicates | sort -r</span><br><span class="line">#   Loading mirror speeds from cached hostfile</span><br><span class="line">#   Loaded plugins: branch, fastestmirror, langpacks</span><br><span class="line">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            docker-ce-stable</span><br><span class="line">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            @docker-ce-stable</span><br><span class="line">#   docker-ce.x86_64            17.03.0.ce-1.el7.centos            docker-ce-stable</span><br><span class="line">#   Available Packages</span><br><span class="line"># Step 3.2 : å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: (VERSION ä¾‹å¦‚ä¸Šé¢çš„ 17.03.0.ce.1-1.el7.centos)</span><br><span class="line">sudo yum -y --setopt&#x3D;obsoletes&#x3D;0 install docker-ce-[VERSION] \</span><br><span class="line">docker-ce-selinux-[VERSION]</span><br><span class="line"></span><br><span class="line"># Step 4: å¼€å¯DockeræœåŠ¡</span><br><span class="line">sudo systemctl enable docker &amp;&amp; systemctl start docker</span><br></pre></td></tr></table></figure>

<h3 id="dockerå®‰è£…é—®é¢˜å°ç»“"><a href="#dockerå®‰è£…é—®é¢˜å°ç»“" class="headerlink" title="dockerå®‰è£…é—®é¢˜å°ç»“"></a>dockerå®‰è£…é—®é¢˜å°ç»“</h3><p>é”™è¯¯ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Error: Package: docker-ce-17.03.2.ce-1.el7.centos.x86_64 (docker-ce-stable)</span><br><span class="line">           Requires: docker-ce-selinux &gt;&#x3D; 17.03.2.ce-1.el7.centos</span><br><span class="line">           Available: docker-ce-selinux-17.03.0.ce-1.el7.centos.noarch (docker-ce-stable)</span><br><span class="line">               docker-ce-selinux &#x3D; 17.03.0.ce-1.el7.centos</span><br><span class="line">           Available: docker-ce-selinux-17.03.1.ce-1.el7.centos.noarch (docker-ce-stable)</span><br><span class="line">               docker-ce-selinux &#x3D; 17.03.1.ce-1.el7.centos</span><br><span class="line">           Available: docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch (docker-ce-stable)</span><br><span class="line">               docker-ce-selinux &#x3D; 17.03.2.ce-1.el7.centos</span><br><span class="line"> You could try using --skip-broken to work around the problem</span><br><span class="line"> You could try running: rpm -Va --nofiles --nodigest</span><br></pre></td></tr></table></figure>

<p>è§£å†³åŠæ³•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è¦å…ˆå®‰è£…docker-ce-selinux-17.03.2.ceï¼Œå¦åˆ™å®‰è£…docker-ceä¼šæŠ¥é”™</span><br><span class="line"># æ³¨æ„docker-ce-selinuxçš„ç‰ˆæœ¬ è¦ä¸dockerçš„ç‰ˆæœ¬ä¸€ç›´</span><br><span class="line">yum install -y https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;centos&#x2F;7&#x2F;x86_64&#x2F;stable&#x2F;Packages&#x2F;docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch.rpm</span><br><span class="line"></span><br><span class="line"># æˆ–è€…</span><br><span class="line">yum -y install https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;7&#x2F;x86_64&#x2F;stable&#x2F;Packages&#x2F;docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch.rpm</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒé“¾æ¥</p>
<p><a href="https://blog.csdn.net/csdn_duomaomao/article/details/79019764" target="_blank" rel="noopener external nofollow noreferrer">https://blog.csdn.net/csdn_duomaomao/article/details/79019764</a></p>
<h3 id="å®‰è£…æ ¡éªŒ"><a href="#å®‰è£…æ ¡éªŒ" class="headerlink" title="å®‰è£…æ ¡éªŒ"></a>å®‰è£…æ ¡éªŒ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:      17.03.2-ce</span><br><span class="line"> API version:  1.27</span><br><span class="line"> Go version:   go1.7.5</span><br><span class="line"> Git commit:   f5ec1e2</span><br><span class="line"> Built:        Tue Jun 27 02:21:36 2017</span><br><span class="line"> OS&#x2F;Arch:      linux&#x2F;amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.03.2-ce</span><br><span class="line"> API version:  1.27 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.7.5</span><br><span class="line"> Git commit:   f5ec1e2</span><br><span class="line"> Built:        Tue Jun 27 02:21:36 2017</span><br><span class="line"> OS&#x2F;Arch:      linux&#x2F;amd64</span><br><span class="line"> Experimental: false</span><br></pre></td></tr></table></figure>

<h3 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h3><p><a href="https://yq.aliyun.com/articles/110806" target="_blank" rel="noopener external nofollow noreferrer">https://yq.aliyun.com/articles/110806</a></p>
<h2 id="å®‰è£…kubeadmï¼Œkubeletï¼Œkubectl"><a href="#å®‰è£…kubeadmï¼Œkubeletï¼Œkubectl" class="headerlink" title="å®‰è£…kubeadmï¼Œkubeletï¼Œkubectl"></a>å®‰è£…kubeadmï¼Œkubeletï¼Œkubectl</h2><p>åœ¨å„èŠ‚ç‚¹å®‰è£…kubeadmï¼Œkubeletï¼Œkubectl</p>
<h3 id="ä¿®æ”¹yumå®‰è£…æº"><a href="#ä¿®æ”¹yumå®‰è£…æº" class="headerlink" title="ä¿®æ”¹yumå®‰è£…æº"></a>ä¿®æ”¹yumå®‰è£…æº</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt; &#x2F;etc&#x2F;yum.repos.d&#x2F;kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name&#x3D;Kubernetes</span><br><span class="line">baseurl&#x3D;https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;kubernetes&#x2F;yum&#x2F;repos&#x2F;kubernetes-el7-x86_64&#x2F;</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">gpgcheck&#x3D;1</span><br><span class="line">repo_gpgcheck&#x3D;1</span><br><span class="line">gpgkey&#x3D;https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;kubernetes&#x2F;yum&#x2F;doc&#x2F;yum-key.gpg https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;kubernetes&#x2F;yum&#x2F;doc&#x2F;rpm-package-key.gpg</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…è½¯ä»¶"><a href="#å®‰è£…è½¯ä»¶" class="headerlink" title="å®‰è£…è½¯ä»¶"></a>å®‰è£…è½¯ä»¶</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum install -y kubelet kubeadm kubectl</span><br><span class="line">systemctl enable kubelet &amp;&amp; systemctl start kubelet</span><br></pre></td></tr></table></figure>

<h2 id="åˆå§‹åŒ–MasterèŠ‚ç‚¹"><a href="#åˆå§‹åŒ–MasterèŠ‚ç‚¹" class="headerlink" title="åˆå§‹åŒ–MasterèŠ‚ç‚¹"></a>åˆå§‹åŒ–MasterèŠ‚ç‚¹</h2><h3 id="é…ç½®kubeadm-init-åˆå§‹åŒ–æ–‡ä»¶"><a href="#é…ç½®kubeadm-init-åˆå§‹åŒ–æ–‡ä»¶" class="headerlink" title="é…ç½®kubeadm init åˆå§‹åŒ–æ–‡ä»¶"></a>é…ç½®kubeadm init åˆå§‹åŒ–æ–‡ä»¶</h3><p>é…ç½®æ–‡ä»¶<a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/#config-file" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘ä»‹ç»é“¾æ¥</a></p>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶kubeadm-init.yamlæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apiVersion: kubeadm.k8s.io&#x2F;v1alpha2</span><br><span class="line">kind: MasterConfiguration</span><br><span class="line">kubernetesVersion: v1.11.1	# kubernetesçš„ç‰ˆæœ¬</span><br><span class="line">api:</span><br><span class="line">  advertiseAddress: 172.16.242.129 # Masterçš„IPåœ°å€</span><br><span class="line">networking:</span><br><span class="line">  podSubnet: 192.168.0.0&#x2F;16	# podç½‘ç»œçš„ç½‘æ®µ</span><br><span class="line">imageRepository: registry.cn-hangzhou.aliyuncs.com&#x2F;google_containers # imageçš„ä»“åº“æº</span><br></pre></td></tr></table></figure>

<h3 id="è¿è¡Œåˆå§‹åŒ–å‘½ä»¤"><a href="#è¿è¡Œåˆå§‹åŒ–å‘½ä»¤" class="headerlink" title="è¿è¡Œåˆå§‹åŒ–å‘½ä»¤"></a>è¿è¡Œåˆå§‹åŒ–å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubeadm init --config kubeadm-init.yaml</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">Your Kubernetes master has initialized successfully!</span><br><span class="line"></span><br><span class="line">To start using your cluster, you need to run (as a regular user):</span><br><span class="line"></span><br><span class="line">  mkdir -p $HOME&#x2F;.kube</span><br><span class="line">  sudo cp -i &#x2F;etc&#x2F;kubernetes&#x2F;admin.conf $HOME&#x2F;.kube&#x2F;config</span><br><span class="line">  sudo chown $(id -u):$(id -g) $HOME&#x2F;.kube&#x2F;config</span><br><span class="line"></span><br><span class="line">You should now deploy a pod network to the cluster.</span><br><span class="line">Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the addon options listed at:</span><br><span class="line">  http:&#x2F;&#x2F;kubernetes.io&#x2F;docs&#x2F;admin&#x2F;addons&#x2F;</span><br><span class="line"></span><br><span class="line">You can now join any number of machines by running the following on each node</span><br><span class="line">as root:</span><br><span class="line"></span><br><span class="line">  kubeadm join --token &lt;token&gt; &lt;master-ip&gt;:&lt;master-port&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿kubectlæ­£å¸¸å·¥ä½œ"><a href="#ä½¿kubectlæ­£å¸¸å·¥ä½œ" class="headerlink" title="ä½¿kubectlæ­£å¸¸å·¥ä½œ"></a>ä½¿kubectlæ­£å¸¸å·¥ä½œ</h3><h4 id="érootç”¨æˆ·"><a href="#érootç”¨æˆ·" class="headerlink" title="érootç”¨æˆ·"></a>érootç”¨æˆ·</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -p $HOME&#x2F;.kube</span><br><span class="line">sudo cp -i &#x2F;etc&#x2F;kubernetes&#x2F;admin.conf $HOME&#x2F;.kube&#x2F;config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME&#x2F;.kube&#x2F;config</span><br></pre></td></tr></table></figure>

<h4 id="rootç”¨æˆ·"><a href="#rootç”¨æˆ·" class="headerlink" title="rootç”¨æˆ·"></a>rootç”¨æˆ·</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export KUBECONFIG&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;admin.conf</span><br></pre></td></tr></table></figure>

<h3 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h3><p><a href="https://kubernetes.io/docs/setup/independent/troubleshooting-kubeadm/" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘è§£å†³é—®é¢˜é“¾æ¥</a></p>
<h4 id="å¤šæ¬¡è¿è¡Œkubeadm-initå‘½ä»¤ï¼Œéœ€è¦reset"><a href="#å¤šæ¬¡è¿è¡Œkubeadm-initå‘½ä»¤ï¼Œéœ€è¦reset" class="headerlink" title="å¤šæ¬¡è¿è¡Œkubeadm initå‘½ä»¤ï¼Œéœ€è¦reset"></a>å¤šæ¬¡è¿è¡Œkubeadm initå‘½ä»¤ï¼Œéœ€è¦reset</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubeadm reset</span><br></pre></td></tr></table></figure>

<h4 id="cgroup-driveræŠ¥é”™"><a href="#cgroup-driveræŠ¥é”™" class="headerlink" title="cgroup driveræŠ¥é”™"></a>cgroup driveræŠ¥é”™</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">error: failed to run Kubelet: failed to create kubelet:</span><br><span class="line"> misconfiguration: kubelet cgroup driver: &quot;systemd&quot; is different from docker cgroup driver: &quot;cgroupfs&quot;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦ä¿®æ”¹ /etc/systemd/system/kubelet.service.d/10-kubeadm.conf</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sed -i &quot;s&#x2F;cgroup-driver&#x3D;systemd&#x2F;cgroup-driver&#x3D;cgroupfs&#x2F;g&quot; &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;kubelet.service.d&#x2F;10-kubeadm.conf</span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl restart kubelet</span><br></pre></td></tr></table></figure>

<h4 id="kubeletä¸èƒ½å¯åŠ¨æˆåŠŸåŸå› ä¹‹ä¸€"><a href="#kubeletä¸èƒ½å¯åŠ¨æˆåŠŸåŸå› ä¹‹ä¸€" class="headerlink" title="kubeletä¸èƒ½å¯åŠ¨æˆåŠŸåŸå› ä¹‹ä¸€"></a>kubeletä¸èƒ½å¯åŠ¨æˆåŠŸåŸå› ä¹‹ä¸€</h4><p>åœ¨<code>systemctl status docker</code>ä¸­å¦‚æœå‡ºç°éœ€è¦é•œåƒ<code>k8s.gcr.io/pause:3.1</code>ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ä¸‹æ ‡ç­¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker tag registry.cn-hangzhou.aliyuncs.com&#x2F;google_containers&#x2F;pause:3.1 k8s.gcr.io&#x2F;pause:3.1</span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£…Pod-Network"><a href="#å®‰è£…Pod-Network" class="headerlink" title="å®‰è£…Pod Network"></a>å®‰è£…Pod Network</h2><p><a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘é“¾æ¥</a></p>
<p>æ¥ä¸‹æ¥å®‰è£…pod network add-onï¼Œä»¥å®‰è£…Calicoä¸ºä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl apply -f https://docs.projectcalico.org/v3.1/getting-started/kubernetes/installation/hosted/rbac-kdd.yaml</span><br><span class="line">kubectl apply -f https://docs.projectcalico.org/v3.1/getting-started/kubernetes/installation/hosted/kubernetes-datastore/calico-networking/1.7/calico.yaml</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>kubectl get pod --all-namespaces -o wide</code>ç¡®ä¿æ‰€æœ‰çš„Podéƒ½å¤„äºRunningçŠ¶æ€ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl get pod --all-namespaces -o wide</span><br></pre></td></tr></table></figure>

<h2 id="master-nodeå‚ä¸å·¥ä½œè´Ÿè½½"><a href="#master-nodeå‚ä¸å·¥ä½œè´Ÿè½½" class="headerlink" title="master nodeå‚ä¸å·¥ä½œè´Ÿè½½"></a>master nodeå‚ä¸å·¥ä½œè´Ÿè½½</h2><p>ä½¿ç”¨kubeadmåˆå§‹åŒ–çš„é›†ç¾¤ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘Podä¸ä¼šè¢«è°ƒåº¦åˆ°Master Nodeä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´Master Nodeä¸å‚ä¸å·¥ä½œè´Ÿè½½ã€‚</p>
<p>è¿™é‡Œæ­å»ºçš„æ˜¯æµ‹è¯•ç¯å¢ƒå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿Master Nodeå‚ä¸å·¥ä½œè´Ÿè½½ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl taint nodes node1 node-role.kubernetes.io/master-</span><br><span class="line">node "node1" untainted</span><br></pre></td></tr></table></figure>

<h2 id="å‘Kubernetesé›†ç¾¤æ·»åŠ Node"><a href="#å‘Kubernetesé›†ç¾¤æ·»åŠ Node" class="headerlink" title="å‘Kubernetesé›†ç¾¤æ·»åŠ Node"></a>å‘Kubernetesé›†ç¾¤æ·»åŠ Node</h2><p><a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘é“¾æ¥</a></p>
<ul>
<li><p>æ·»åŠ å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubeadm join --token &lt;token&gt; &lt;master-ip&gt;:&lt;master-port&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹tokençš„å€¼ï¼Œåœ¨masterèŠ‚ç‚¹è¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¦‚æœæ²¡æœ‰tokenï¼Œè¯·ä½¿ç”¨å‘½ä»¤kubeadm token create åˆ›å»º</span><br><span class="line">kubeadm token list</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹hashå€¼ï¼Œåœ¨masterèŠ‚ç‚¹è¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">openssl x509 -pubkey -in &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.crt | openssl rsa -pubin -outform der 2&gt;&#x2F;dev&#x2F;null | \</span><br><span class="line">   openssl dgst -sha256 -hex | sed &#39;s&#x2F;^.* &#x2F;&#x2F;&#39;</span><br></pre></td></tr></table></figure>
</li>
<li><p>node2åŠ å…¥é›†ç¾¤å¾ˆæ˜¯é¡ºåˆ©ï¼Œä¸‹é¢åœ¨masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œå‘½ä»¤æŸ¥çœ‹é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚ä½•ä»é›†ç¾¤ä¸­ç§»é™¤Node</p>
<p>åœ¨masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl drain node2 --delete-local-data --force --ignore-daemonsets</span><br><span class="line">kubectl delete node &lt;node name&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨node2ä¸Šæ‰§è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubeadm reset</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><h3 id="é…ç½®ä»£ç†"><a href="#é…ç½®ä»£ç†" class="headerlink" title="é…ç½®ä»£ç†"></a>é…ç½®ä»£ç†</h3><ul>
<li><p>é…ç½®å…¨å±€ä»£ç†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt;  ~&#x2F;.bashrc</span><br><span class="line">export http_proxy&#x3D;http:&#x2F;&#x2F;username:password@ip:port</span><br><span class="line">export https_proxy&#x3D;http:&#x2F;&#x2F;username:password@ip:port</span><br><span class="line">export no_proxy&#x3D;localhost,127.0.0.1,&lt;your-server-ip&gt;(æœ¬æœºipåœ°å€)</span><br><span class="line">EOF</span><br><span class="line">source ~&#x2F;.bashrc</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®dockerä»£ç†ï¼Œæ‹‰è°·æ­Œé•œåƒè¦ç”¨åˆ°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -p &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d&#x2F;</span><br><span class="line">cat &lt;&lt;EOF &gt; &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d&#x2F;http-proxy.conf</span><br><span class="line">[Service]</span><br><span class="line">Environment&#x3D;&quot;HTTP_PROXY&#x3D;http:&#x2F;&#x2F;username:password@ip:port&quot; &quot;HTTPS_PROXY&#x3D;http:&#x2F;&#x2F;username:password@ip:port&quot; &quot;NO_PROXY&#x3D;localhost,127.0.0.1,&lt;your-server-ip&gt;&quot;</span><br><span class="line">EOF</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/" target="_blank" rel="noopener external nofollow noreferrer">Installing kubeadm</a></li>
<li><a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/" target="_blank" rel="noopener external nofollow noreferrer">Using kubeadm to Create a Cluster</a></li>
<li><a href="https://docs.docker.com/engine/installation/linux/docker-ce/centos/" target="_blank" rel="noopener external nofollow noreferrer">Get Docker CE for CentOS</a></li>
<li><a href="https://github.com/kubernetes/dashboard/wiki/Access-control" target="_blank" rel="noopener external nofollow noreferrer">Kubernetes Dashboard Access-control</a></li>
<li><a href="https://blog.frognew.com/2017/12/kubeadm-install-kubernetes-1.9.html" target="_blank" rel="noopener external nofollow noreferrer">ä½¿ç”¨kubeadmå®‰è£…Kubernetes 1.9</a></li>
</ul>
]]></content>
      <categories>
        <category>Kubernetes</category>
      </categories>
      <tags>
        <tag>Kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>Kubernetes æœ¬åœ°ä¸´æ—¶å­˜å‚¨ç®¡ç†</title>
    <url>/articles/1048089720.html</url>
    <content><![CDATA[<h3 id="èƒŒ-æ™¯"><a href="#èƒŒ-æ™¯" class="headerlink" title="èƒŒ  æ™¯"></a>èƒŒ  æ™¯</h3><p>åœ¨ Kubernetes ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç®¡ç†é™åˆ¶è®¡ç®—èµ„æºï¼Œå¦‚ CPUï¼Œ memeoryï¼Œé€šè¿‡ quota å’Œ limitrange ï¼Œå¯ä»¥é™åˆ¶åœ¨ä¸€ä¸ª namespace ä¸­ï¼Œpod å’Œ container å¯ä»¥ä½¿ç”¨å¤šå°‘çš„ cpu å’Œ memoryï¼Œé€šè¿‡ downward apiï¼Œå¯ä»¥æŠŠè¿™ä¸ªè®¡ç®—èµ„æºé€šè¿‡ç¯å¢ƒå˜é‡çš„æ–¹å¼æ³¨å…¥åˆ° container ä¸­ï¼Œä¾›å®¹å™¨ä½¿ç”¨ã€‚<br>ä½†æ˜¯ï¼Œrelease 1.7 ä¸­è¿˜æ²¡æœ‰ç³»ç»Ÿçš„ç®¡ç†ã€éš”ç¦»æœ¬åœ°ä¸´æ—¶å­˜å‚¨çš„æ–¹æ³•ï¼Œåªæ˜¯åŠ äº†ä¸€äº›ç®€å•çš„ eviction é€»è¾‘å’Œè°ƒåº¦é¢„æµ‹ï¼Œè¿™ä¼šå¯¼è‡´å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ï¼Œä¸€ä¸ª pod å¦‚æœæ²¡æœ‰è®¾ç½®æœ¬åœ°ä¸´æ—¶å­˜å‚¨é™åˆ¶ï¼Œå®ƒå¯ä»¥å æ® node å¾ˆå¤šæœ¬åœ°å­˜å‚¨èµ„æºï¼Œå¯¼è‡´å…¶ä»– pod è¢«å¼‚å¸¸ç»ˆæ­¢ï¼Œæ— æ³•é™åˆ¶ä¸€ä¸ª namespace ä¸­æœ¬åœ°ä¸´æ—¶å­˜å‚¨æ€»é‡ç­‰ç­‰ï¼ŒåŸºäºè¿™äº›é—®é¢˜ï¼Œç»æ‰äº‘ç§‘æŠ€ï¼ˆCaicloudï¼‰å’Œ Google è®¨è®ºï¼Œè®¾è®¡å¹¶å®ç°äº†æœ¬åœ°ä¸´æ—¶å­˜å‚¨ç›¸å…³åŠŸèƒ½ã€‚</p>
<a id="more"></a>
<h3 id="ç°-çŠ¶"><a href="#ç°-çŠ¶" class="headerlink" title="ç°  çŠ¶"></a>ç°  çŠ¶</h3><p>åœ¨ Kubernetes 1.7 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº† alpha ç‰ˆæœ¬çš„ LocalStorageCapacityIsolation featureï¼Œç”¨æ¥æ§åˆ¶æœ¬åœ°ä¸´æ—¶å­˜å‚¨ï¼Œä½†æ˜¯è®¾è®¡å’Œå·¥ä½œè¿˜å¤„äºåˆçº§é˜¶æ®µï¼Œä¸æ˜¯å¾ˆæˆç†Ÿã€‚ åœ¨ 1.7 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æŠŠæœ¬åœ°å­˜å‚¨åˆ†ä¸ºä¸¤ç§èµ„æºï¼šä¸€ç§æ˜¯ scratchï¼Œä»£è¡¨çš„æ˜¯ root åˆ†åŒºï¼ˆ /var/lib/kubelet å’Œ /var/log ç›®å½•, éç³»ç»Ÿæ ¹ç›®å½•ï¼‰ï¼Œå¦ä¸€ç§æ˜¯ overlayï¼Œä»£è¡¨çš„æ˜¯ runtime åˆ†åŒºã€‚<br><strong>å…·ä½“çš„é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</strong></p>
<ul>
<li>scratch èµ„æºï¼ˆä¹Ÿå°±æ˜¯ root åˆ†åŒºï¼‰ç”¨æ¥æ»¡è¶³ /var/lib/kubelet ç›®å½• ä»¥åŠ /var/log ç›®å½•éœ€æ±‚ï¼Œè¢« EmptyDir ä»¥åŠ container log æ¶ˆè´¹ï¼Œå¦‚æœ node èŠ‚ç‚¹æ²¡æœ‰ overlay èµ„æºçš„è¯ï¼Œ container image layers  å’Œ writable layers ä¹Ÿæ˜¯æ¶ˆè´¹çš„ scratch èµ„æº</li>
<li>overlay èµ„æºï¼Œå°±åƒä¸Šé¢è¯´çš„ï¼Œä¸“é—¨ç”¨æ¥æ»¡è¶³ container image layers å’Œ writable layers çš„éœ€æ±‚çš„ã€‚<br>è®¾è®¡å‡ºæ¥ä¹‹åï¼Œæ‰€åšçš„å·¥ä½œæ˜¯ï¼šåœ¨ scheduling éƒ¨åˆ†åŠ ä¸Šäº†æœ¬åœ°ä¸´æ—¶å­˜å‚¨çš„åˆ¤æ–­é€»è¾‘ï¼Œç”¨æ¥æ‰¾åˆ°æ»¡è¶³ pod å¯¹æœ¬åœ°å­˜å‚¨éœ€æ±‚çš„èŠ‚ç‚¹ã€‚<br>ä½†æ˜¯ï¼Œå¯¹æœ¬åœ°å­˜å‚¨çš„é™åˆ¶å’Œéš”ç¦»åŠŸèƒ½å¤§éƒ¨åˆ†éƒ½æ²¡æœ‰åšï¼Œè¿™äº›å·¥ä½œåœ¨ 1.8 ç‰ˆæœ¬ä¸­éƒ½å°†åŠ å…¥ï¼Œå½“ç„¶ï¼Œè¿˜æ˜¯ alpha é˜¶æ®µã€‚</li>
</ul>
<h3 id="ç›®-æ ‡"><a href="#ç›®-æ ‡" class="headerlink" title="ç›®  æ ‡"></a>ç›®  æ ‡</h3><p>åƒç®¡ç†å†…å­˜é‚£æ ·ï¼ŒKubernetes å¯ä»¥ç®¡ç†é™åˆ¶æœ¬åœ°ä¸´æ—¶å­˜å‚¨ï¼Œä»¥åŠé€šè¿‡è·å– node æœ¬åœ°å­˜å‚¨æƒ…å†µï¼ŒæŠŠ pod è°ƒåº¦åˆ°åˆé€‚çš„èŠ‚ç‚¹ã€‚</p>
<h3 id="æ–¹-æ¡ˆ"><a href="#æ–¹-æ¡ˆ" class="headerlink" title="æ–¹  æ¡ˆ"></a>æ–¹  æ¡ˆ</h3><p>ä¸Šé¢è¯´äº†ï¼Œ release 1.7 ä¸­ï¼ŒæŠŠæœ¬åœ°ä¸´æ—¶èµ„æºåˆ†æˆä¸¤ç§ï¼Œåˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªåˆ†åŒºã€‚è¿™æ ·çš„è¯ï¼Œç®¡ç†èµ·æ¥å¾ˆéº»çƒ¦ï¼Œå®ç°é€»è¾‘ä¹Ÿå¾ˆå¤æ‚ï¼Œè€Œä¸” overlay åˆ†åŒºç”¨å¤„ä¸æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥ç»è®¨è®ºæœ€ç»ˆå†³å®šï¼Œåœ¨ 1.8 ç‰ˆæœ¬ä¸­æˆ‘ä»¬åªç®¡ç†ä¸€ä¸ªåˆ†åŒºçš„èµ„æºï¼ˆroot partitionï¼‰ï¼Œç”¨æ¥ç®€åŒ–å®ç°é€»è¾‘ã€‚ <strong>èµ„æºåç§°ä¸ºï¼š</strong>ResourceEphemeralStorage ResourceName=â€ephemeral-storageâ€ã€‚<br>ä¸‹é¢æˆ‘å°†åˆ†åˆ«ä» eviction managerï¼Œscheduling ï¼Œquotaï¼Œlimitrange ä»¥åŠ downward api è¿™äº›æ¨¡å—æ¥ä»‹ç»è¿™ä¸ª feature çš„å…·ä½“å®ç°ã€‚</p>
<h4 id="1evictionï¼š"><a href="#1evictionï¼š" class="headerlink" title="1evictionï¼š"></a>1evictionï¼š</h4><p><strong>æœ¬åœ°ä¸´æ—¶å­˜å‚¨çš„ eviction é€»è¾‘æ€»æœ‰ä¸‰ä¸ªï¼š</strong></p>
<ol>
<li>EmptyDir çš„ä½¿ç”¨é‡è¶…è¿‡äº†ä»–çš„ SizeLimitï¼Œé‚£ä¹ˆè¿™ä¸ª pod å°†ä¼šè¢«é©±é€ï¼›</li>
<li>Container çš„ä½¿ç”¨é‡ï¼ˆlogï¼Œå¦‚æœæ²¡æœ‰ overlay åˆ†åŒºï¼Œåˆ™åŒ…æ‹¬ imagefsï¼‰è¶…è¿‡äº†ä»–çš„ limitï¼Œåˆ™è¿™ä¸ª pod ä¼šè¢«é©±é€ï¼›</li>
<li>Pod å¯¹æœ¬åœ°ä¸´æ—¶å­˜å‚¨æ€»çš„ä½¿ç”¨é‡ï¼ˆæ‰€æœ‰ emptydir å’Œ containerï¼‰è¶…è¿‡äº† pod ä¸­æ‰€æœ‰container çš„ limit ä¹‹å’Œï¼Œåˆ™ pod è¢«é©±é€ã€‚</li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<p><img src="https://image.ritboy.com/markdown/202004/49cd8bda76741c79165e12d68bcef9fe.jpg" alt="img"></p>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­æ˜¯ pod ä½¿ç”¨æœ¬åœ°ä¸´æ—¶å­˜å‚¨å®ä¾‹ï¼Œpod ä¸­åˆ†åˆ«æœ‰ä¸¤ä¸ªå®¹å™¨ï¼Œfooa å’Œ foobï¼Œä»–ä»¬å¯¹æœ¬åœ°ä¸´æ—¶å­˜å‚¨çš„éœ€æ±‚åˆ†åˆ«æ˜¯ 10Gi å’Œ 20Giï¼ˆrequest å’Œ limit ä¸€æ ·ï¼‰ï¼Œ ç„¶åï¼Œpod è¿˜æŒ‚è½½äº†ä¸€ä¸ª EmptyDir volumeï¼Œè¿™ä¸ª volume çš„ sizelimit æ˜¯ 5Giã€‚</p>
<p><strong>ä¸‹é¢ä¸‰ç§æƒ…å†µä¸‹ï¼Œpod å°†ä¼šè¢«ç³»ç»Ÿé©±é€ï¼š</strong></p>
<ol>
<li>fooa ä½¿ç”¨é‡è¶…è¿‡ 10Gi  æˆ–è€… foob ä½¿ç”¨é‡è¶…è¿‡ 20Gi ï¼ˆå®¹å™¨ä½¿ç”¨é‡æ˜¯å¦åŒ…æ‹¬ imagefs è§†ç³»ç»Ÿåˆ†åŒºæƒ…å†µè€Œå®šï¼‰ï¼›</li>
<li>myEmptyDir ä½¿ç”¨é‡è¶…è¿‡ 5Gi ï¼›</li>
<li>pod æ€»çš„ä½¿ç”¨é‡è¶…è¿‡ 30Gi ï¼›</li>
</ol>
<h3 id="2-scheduling"><a href="#2-scheduling" class="headerlink" title="2 scheduling"></a>2 scheduling</h3><p>è¿™éƒ¨åˆ†æ”¹åŠ¨ä¸å¤§ï¼Œåªæ˜¯æŠŠ 1.7 ç‰ˆæœ¬ä¸­å…³äº overlay çš„é€»è¾‘å»æ‰ï¼Œæœ€ç»ˆçš„é€»è¾‘å’Œ cpuï¼Œmemory ç±»ä¼¼ï¼Œæ‰¾åˆ°æ»¡è¶³ pod éœ€æ±‚çš„èŠ‚ç‚¹ï¼Œè°ƒåº¦è¿‡å»ã€‚<br><strong>ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://image.ritboy.com/markdown/202004/49cd8bda76741c79165e12d68bcef9fe.jpg" alt="img"></p>
<p>Node èŠ‚ç‚¹å…³äºæœ¬åœ°ä¸´æ—¶å­˜å‚¨çš„å®šä¹‰ï¼š<br>åœ¨ node çš„ allocatable èµ„æºèƒ½å¤Ÿæ»¡è¶³ pod å¯¹æœ¬åœ°ä¸´æ—¶å­˜å‚¨éœ€æ±‚çš„å‰æä¸‹ï¼Œpod æ‰å¯èƒ½è¢«è°ƒåº¦åˆ°è¯¥ node èŠ‚ç‚¹ã€‚</p>
<h3 id="3-quota"><a href="#3-quota" class="headerlink" title="3. quota"></a>3. quota</h3><p>åœ¨ quota é‡Œé¢åŠ å…¥äº†å¯¹æœ¬åœ°ä¸´æ—¶èµ„æºçš„ç®¡ç†é™åˆ¶ï¼ŒåŒä¸€ä¸ª namespace ä¸­ï¼Œæ‰€æœ‰ pod çš„æœ¬åœ°ä¸´æ—¶å­˜å‚¨æ€»é‡ä¸èƒ½è¶…è¿‡ quota çš„é™é¢ã€‚<br><strong>ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://image.ritboy.com/markdown/202004/49cd8bda76741c79165e12d68bcef9fe.jpg" alt="img"></p>
<h3 id="4-limitrange"><a href="#4-limitrange" class="headerlink" title="4.limitrange"></a>4.limitrange</h3><p>åŒæ ·çš„ï¼ŒåŠ å…¥äº†æœ¬åœ°ä¸´æ—¶å­˜å‚¨ï¼Œå¯ä»¥å¯¹ pod ä¸­ container çš„æœ¬åœ°ä¸´æ—¶å­˜å‚¨è®¾ç½®é™åˆ¶ä»¥åŠé»˜è®¤å€¼ç­‰ï¼Œå’Œ memory ç±»ä¼¼ã€‚<br><strong>ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://image.ritboy.com/markdown/202004/49cd8bda76741c79165e12d68bcef9fe.jpg" alt="img"></p>
<p>å¦‚æœåœ¨è¯¥ namespace ä¸­ï¼Œpod æ²¡æœ‰å¯¹æœ¬åœ°å­˜å‚¨è¿›è¡Œ request/limit å®šä¹‰ï¼Œlimitrange ä¼šå¯¹ pod è¿›è¡Œé»˜è®¤èµ‹å€¼ï¼Œç»“æœç±»ä¼¼ä¸‹é¢ï¼š</p>
<p><img src="https://image.ritboy.com/markdown/202004/49cd8bda76741c79165e12d68bcef9fe.jpg" alt="img"></p>
<h3 id="5downward-api"><a href="#5downward-api" class="headerlink" title="5downward api"></a>5downward api</h3><p>åŒæ ·çš„ï¼Œå®ç°äº†æœ¬åœ°å­˜å‚¨çš„è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡çš„æ–¹å¼ï¼ŒæŠŠ pod ä¸­æŸä¸ª container çš„æœ¬åœ°ä¸´æ—¶å­˜å‚¨éœ€æ±‚ æ³¨å…¥åˆ°ç‰¹å®šçš„å®¹å™¨ä¸­ã€‚<br><strong>ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://image.ritboy.com/markdown/202004/49cd8bda76741c79165e12d68bcef9fe.jpg" alt="img"></p>
<h3 id="å°†-æ¥"><a href="#å°†-æ¥" class="headerlink" title="å°†  æ¥"></a>å°†  æ¥</h3><p>æœ¬åœ°ä¸´æ—¶å­˜å‚¨è¿˜å¤„äºåˆçº§ï¼ˆalphaï¼‰é˜¶æ®µã€‚åé¢ï¼ŒCaicloud å’Œ Google å°†ç»§ç»­åˆä½œï¼Œåœ¨ 1.9 ç‰ˆæœ¬ä¸­å®Œå–„ä¸€äº›åŠŸèƒ½ï¼ŒæŠŠå®ƒæ¨è¿›åˆ° beta ç‰ˆæœ¬ï¼Œä¹‹åè¶Šæ¥è¶Šå®Œå–„ã€‚<br>å…¶ä»–çš„ç¤ºä¾‹éƒ½ç±»ä¼¼ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢é“¾æ¥<a href="https://github.com/kubernetes/community/pull/991https://github.com/kubernetes/community/pull/306" target="_blank" rel="noopener external nofollow noreferrer">https://github.com/kubernetes/community/pull/991https://github.com/kubernetes/community/pull/306</a></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://www.k8smeetup.com/article/VyEncpgA7" target="_blank" rel="noopener external nofollow noreferrer">Kubernetes 1.8 æ–°è¿›å±•ï¼å°†å®ç°æœ¬åœ°ä¸´æ—¶å­˜å‚¨ç®¡ç†</a></p>
]]></content>
      <categories>
        <category>Kubernetes</category>
      </categories>
      <tags>
        <tag>Kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>Kuberneteså®‰è£…ä¹‹Kubespray</title>
    <url>/articles/830826630.html</url>
    <content><![CDATA[<h3 id="åŸºäºkubesprayå®‰è£…k8sé›†ç¾¤"><a href="#åŸºäºkubesprayå®‰è£…k8sé›†ç¾¤" class="headerlink" title="åŸºäºkubesprayå®‰è£…k8sé›†ç¾¤"></a>åŸºäºkubesprayå®‰è£…k8sé›†ç¾¤</h3><ul>
<li><p><strong>ä½¿ç”¨åˆ†æ”¯æ˜¯v2.4.0</strong></p>
<p><a href="https://github.com/kubernetes-incubator/kubespray/tree/v2.4.0" target="_blank" rel="noopener external nofollow noreferrer">https://github.com/kubernetes-incubator/kubespray/tree/v2.4.0</a></p>
</li>
<li><p><strong>ç»„ä»¶å®‰è£…çš„ç‰ˆæœ¬</strong></p>
<p>kubernetes v1.9.2</p>
<p>etcd v3.2.4</p>
<p>calico v2.5.0</p>
<p>docker v1.13</p>
<a id="more"></a>
<h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3></li>
<li><p>ä¸»æœºé…ç½®</p>
<ul>
<li>å†…å­˜ï¼šæœ€å°‘å¤§äº1.5Gï¼Œå¦åˆ™ansibleå®‰è£…æ—¶ä¼šæŠ¥é”™</li>
</ul>
</li>
<li><p>ç™»å…¥ä¸‰å°æœºå™¨å…³é—­é˜²ç«å¢™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ¯å°ä¸»æœºå…³é—­é˜²ç«å¢™</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line"></span><br><span class="line"># æ¯å°ä¸»æœºå…³é—­swap</span><br><span class="line">swapoff -a</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç™»å…¥ansible host</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å®‰è£…yumçš„epelæº</span><br><span class="line">yum install -y epel-release</span><br><span class="line"></span><br><span class="line"># å®‰è£…éœ€æ±‚çš„è½¯ä»¶</span><br><span class="line">yum install -y python-pip python-netaddr ansible git</span><br><span class="line">pip install --upgrade Jinja2</span><br><span class="line"></span><br><span class="line"># é…ç½®sshå…å¯†</span><br><span class="line">ssh-keygen</span><br><span class="line">ssh-copy-id root@172.31.19.29</span><br><span class="line">ssh-copy-id root@172.31.19.30</span><br><span class="line">ssh-copy-id root@172.31.19.31</span><br><span class="line"></span><br><span class="line"># æ‹‰å–kubespray å¹¶åˆ‡æ¢åˆ†æ”¯</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;kubernetes-incubator&#x2F;kubespray.git</span><br><span class="line">cd kubespray</span><br><span class="line">git checkout v2.4.0 -b myv2.4.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹inventory</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¤åˆ¶ä¸»æœºé…ç½®</span><br><span class="line">cp inventory&#x2F;inventory.example inventory&#x2F;inventory.cfg</span><br><span class="line">vim inventory&#x2F;inventory.cfg</span><br><span class="line">[all]</span><br><span class="line">node1 ansible_ssh_host&#x3D;172.31.19.29 ip&#x3D;172.31.19.29</span><br><span class="line">node2 ansible_ssh_host&#x3D;172.31.19.30 ip&#x3D;172.31.19.30</span><br><span class="line">node3 ansible_ssh_host&#x3D;172.31.19.31 ip&#x3D;172.31.19.31</span><br><span class="line"></span><br><span class="line">[kube-master]</span><br><span class="line">node1</span><br><span class="line">node2</span><br><span class="line">node3</span><br><span class="line"></span><br><span class="line">[etcd]</span><br><span class="line">node1</span><br><span class="line">node2</span><br><span class="line">node3</span><br><span class="line"></span><br><span class="line">[kube-node]</span><br><span class="line">node1</span><br><span class="line">node2</span><br><span class="line">node3</span><br><span class="line"></span><br><span class="line">[k8s-cluster:children]</span><br><span class="line">kube-node</span><br><span class="line">kube-master</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤‡ä»½å¹¶ä¿®æ”¹å®‰è£…çš„é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¤‡ä»½</span><br><span class="line">cp inventory&#x2F;group_vars&#x2F;all.yml inventory&#x2F;group_vars&#x2F;all.yml.bak</span><br><span class="line">cp inventory&#x2F;group_vars&#x2F;k8s-cluster.yml inventory&#x2F;group_vars&#x2F;k8s-cluster.yml.bak</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹bootstrapç‰ˆæœ¬</span><br><span class="line">vim inventory&#x2F;group_vars&#x2F;all.yml</span><br><span class="line">bootstrap_os: centos</span><br><span class="line"></span><br><span class="line"># å…³é—­Dashboardå’Œä¿®æ”¹kube_api_pwdå¯†ç </span><br><span class="line">vim inventory&#x2F;group_vars&#x2F;k8s-cluster.yml</span><br><span class="line">dashboard_enabled: false</span><br><span class="line">kube_api_pwd: â€œhello-world8888â€</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ä¸‹è½½çš„åŒ…ï¼Œå°†å›½å¤–ä¸‹è½½æ…¢çš„åŒ…ï¼Œæ”¹æˆç”¨é˜¿é‡Œçš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¿®æ”¹roles&#x2F;download&#x2F;defaults&#x2F;main.ymlä¸­çš„é•œåƒ</span><br><span class="line">sed -i &#39;s#^etcd_image_repo:.*#etcd_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;etcd&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^calicoctl_image_repo:.*#calicoctl_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;ctl&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^calico_node_image_repo:.*#calico_node_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;node&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^calico_cni_image_repo:.*#calico_cni_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;cni&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^calico_policy_image_repo:.*#calico_policy_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;kube-policy-controller&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^calico_rr_image_repo:.*#calico_rr_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;routereflector&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^hyperkube_image_repo:.*#hyperkube_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;hyper-kube&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^pod_infra_image_repo:.*#pod_infra_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;pause-amd64&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^nginx_image_repo:.*#nginx_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;nginx&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^kubedns_image_repo:.*#kubedns_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;k8s-dns-kube-dns-amd64&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^dnsmasq_nanny_image_repo:.*#dnsmasq_nanny_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;k8s-dns-dnsmasq-nanny-amd64&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^dnsmasq_sidecar_image_repo:.*#dnsmasq_sidecar_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;k8s-dns-sidecar-amd64&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^kubednsautoscaler_image_repo:.*#kubednsautoscaler_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;cluster-proportional-autoscaler-amd64&quot;#g&#39; roles&#x2F;download&#x2F;defaults&#x2F;main.yml</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹roles&#x2F;kubernetes-apps&#x2F;ansible&#x2F;defaults&#x2F;main.ymlæ–‡ä»¶çš„é•œåƒæº</span><br><span class="line">sed -i &#39;s#^kubedns_image_repo:.*#kubedns_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;k8s-dns-kube-dns-amd64&quot;#g&#39; roles&#x2F;kubernetes-apps&#x2F;ansible&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^dnsmasq_nanny_image_repo:.*#dnsmasq_nanny_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;k8s-dns-dnsmasq-nanny-amd64&quot;#g&#39; roles&#x2F;kubernetes-apps&#x2F;ansible&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^dnsmasq_sidecar_image_repo:.*#dnsmasq_sidecar_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;k8s-dns-sidecar-amd64&quot;#g&#39; roles&#x2F;kubernetes-apps&#x2F;ansible&#x2F;defaults&#x2F;main.yml</span><br><span class="line">sed -i &#39;s#^kubednsautoscaler_image_repo:.*#kubednsautoscaler_image_repo: &quot;registry.cn-hangzhou.aliyuncs.com&#x2F;linkcloud&#x2F;cluster-proportional-autoscaler-amd64&quot;#g&#39; roles&#x2F;kubernetes-apps&#x2F;ansible&#x2F;defaults&#x2F;main.yml</span><br></pre></td></tr></table></figure>
</li>
<li><p>éƒ¨ç½²</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ansible-playbook -b -i inventory&#x2F;inventory.cfg cluster.yml --flush-cache</span><br></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      <categories>
        <category>Kubernetes</category>
      </categories>
      <tags>
        <tag>Kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSå®‰è£…VPNå®¢æˆ·ç«¯å¹¶è¿æ¥</title>
    <url>/articles/47351249.html</url>
    <content><![CDATA[<h2 id="å®‰è£…vpnå®¢æˆ·ç«¯"><a href="#å®‰è£…vpnå®¢æˆ·ç«¯" class="headerlink" title="å®‰è£…vpnå®¢æˆ·ç«¯"></a>å®‰è£…vpnå®¢æˆ·ç«¯</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install ppp pptp pptp-setup</span><br></pre></td></tr></table></figure>

<h2 id="è¿æ¥vpnæœåŠ¡"><a href="#è¿æ¥vpnæœåŠ¡" class="headerlink" title="è¿æ¥vpnæœåŠ¡"></a>è¿æ¥vpnæœåŠ¡</h2><h3 id="åˆ›å»ºè´¦å·"><a href="#åˆ›å»ºè´¦å·" class="headerlink" title="åˆ›å»ºè´¦å·"></a>åˆ›å»ºè´¦å·</h3><blockquote>
<p>â€“createæ˜¯åˆ›å»ºçš„è¿æ¥åç§°</p>
<p>â€“serveræ˜¯vpnçš„ipåœ°å€</p>
<p>â€“usernameæ˜¯ç”¨æˆ·å</p>
<p>â€“passwordæ˜¯å¯†ç ï¼Œä¹Ÿå¯ä»¥æ²¡è¿™ä¸ªå‚æ•°ï¼Œå‘½ä»¤ç¨åä¼šè‡ªåŠ¨è¯¢é—®ã€‚è¿™æ ·å¯ä»¥ä¿è¯è´¦å·å®‰å…¨</p>
<p>â€“encrypt æ˜¯è¡¨ç¤ºéœ€è¦åŠ å¯†ï¼Œä¸å¿…æŒ‡å®šåŠ å¯†æ–¹å¼ï¼Œå‘½ä»¤ä¼šè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„åŠ å¯†æ–¹å¼</p>
<p>â€“startæ˜¯è¡¨ç¤ºåˆ›å»ºè¿æ¥å®Œåé©¬ä¸Šè¿æ¥</p>
</blockquote>
<a id="more"></a>


<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># pptpsetup --create vpn --server x.x.x.x --username vpntest --password 1234567890 --encrypt --start</span><br><span class="line">Using interface ppp0</span><br><span class="line">Connect: ppp0 &lt;--&gt; &#x2F;dev&#x2F;pts&#x2F;2</span><br><span class="line">CHAP authentication succeeded</span><br><span class="line">MPPE 128-bit stateless compression enabled</span><br><span class="line">local  IP address 10.0.0.10</span><br><span class="line">remote IP address 10.0.0.1</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥çœ‹åˆ›å»ºè´¦å·vpnçš„é…ç½®æ–‡ä»¶"><a href="#æŸ¥çœ‹åˆ›å»ºè´¦å·vpnçš„é…ç½®æ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹åˆ›å»ºè´¦å·vpnçš„é…ç½®æ–‡ä»¶"></a>æŸ¥çœ‹åˆ›å»ºè´¦å·<code>vpn</code>çš„é…ç½®æ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># written by pptpsetup</span><br><span class="line"># cat &#x2F;etc&#x2F;ppp&#x2F;peers&#x2F;vpn </span><br><span class="line">pty &quot;pptp vpn.netkiller.cn --nolaunchpppd&quot;</span><br><span class="line">lock</span><br><span class="line">noauth</span><br><span class="line">nobsdcomp</span><br><span class="line">nodeflate</span><br><span class="line">name neo</span><br><span class="line">remotename vpn</span><br><span class="line">ipparam vpn</span><br></pre></td></tr></table></figure>

<h4 id="å†…æ ¸æ¨¡å—å®‰è£…"><a href="#å†…æ ¸æ¨¡å—å®‰è£…" class="headerlink" title="å†…æ ¸æ¨¡å—å®‰è£…"></a>å†…æ ¸æ¨¡å—å®‰è£…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">for module in nf_nat_pptp nf_conntrack_pptp nf_conntrack_proto_gre</span><br><span class="line">do</span><br><span class="line">    modprobe $module</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="æ‹¨å…¥VPN"><a href="#æ‹¨å…¥VPN" class="headerlink" title="æ‹¨å…¥VPN"></a>æ‹¨å…¥VPN</h3><h4 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># call åé¢æ·»åŠ åˆ›å»ºçš„è´¦å·çš„åç§°</span><br><span class="line">pppd call vpn</span><br></pre></td></tr></table></figure>

<h4 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h4><ul>
<li><p>å…ˆæŠŠç¨‹åºå¤åˆ¶åˆ°ç³»ç»Ÿè·¯å¾„è®©ç³»ç»Ÿè¯†åˆ«</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cp &#x2F;usr&#x2F;share&#x2F;doc&#x2F;ppp-2.4.5&#x2F;scripts&#x2F;pon &#x2F;usr&#x2F;sbin&#x2F; </span><br><span class="line">cp &#x2F;usr&#x2F;share&#x2F;doc&#x2F;ppp-2.4.5&#x2F;scripts&#x2F;poff &#x2F;usr&#x2F;sbin&#x2F; </span><br><span class="line">chmod +x &#x2F;usr&#x2F;sbin&#x2F;pon </span><br><span class="line">chmod +x &#x2F;usr&#x2F;sbin&#x2F;poff</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨ponå¼€å§‹æ‹¨å·, poffç«¯å¼€æ‹¨å·</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è¿æ¥åç§°ä¸ºvpn,vpnæœåŠ¡</span><br><span class="line">pon vpn</span><br><span class="line"></span><br><span class="line"># æ–­å¼€åç§°ä¸ºvpn,vpnæœåŠ¡</span><br><span class="line">poff vpn</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="æŸ¥çœ‹æ—¥å¿—"><a href="#æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹æ—¥å¿—"></a>æŸ¥çœ‹æ—¥å¿—</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># tail -f &#x2F;var&#x2F;log&#x2F;messages | grep pppd</span><br><span class="line">Sep  9 19:09:19 iZ621r6pk9aZ pppd[21801]: pppd 2.4.5 started by root, uid 0</span><br><span class="line">Sep  9 19:09:19 iZ621r6pk9aZ pppd[21801]: Using interface ppp0</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±é…ç½®"><a href="#è·¯ç”±é…ç½®" class="headerlink" title="è·¯ç”±é…ç½®"></a>è·¯ç”±é…ç½®</h3><h4 id="è‡ªåŠ¨é…ç½®è·¯ç”±"><a href="#è‡ªåŠ¨é…ç½®è·¯ç”±" class="headerlink" title="è‡ªåŠ¨é…ç½®è·¯ç”±"></a>è‡ªåŠ¨é…ç½®è·¯ç”±</h4><p>åˆ›å»ºæ–‡ä»¶/etc/ppp/ip-up.localï¼Œå†™å…¥æ·»åŠ è·¯ç”±å‘½ä»¤ï¼Œç„¶åèµ‹äºˆå¯æ‰§è¡Œæƒé™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># cat &#x2F;etc&#x2F;ppp&#x2F;ip-up.local </span><br><span class="line">ip route add default dev ppp0</span><br><span class="line"></span><br><span class="line"># chmod +x &#x2F;etc&#x2F;ppp&#x2F;ip-up.local</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæ–‡ä»¶ /etc/ppp/ip-down.local å†™å…¥åˆ é™¤è·¯ç”±å‘½ä»¤ï¼Œç„¶åèµ‹äºˆå¯æ‰§è¡Œæƒé™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># cat &#x2F;etc&#x2F;ppp&#x2F;ip-down.local</span><br><span class="line">ip route del default dev ppp0</span><br><span class="line"></span><br><span class="line">chmod +x &#x2F;etc&#x2F;ppp&#x2F;ip-down.local</span><br></pre></td></tr></table></figure>

<h4 id="æ‰‹å·¥é…ç½®è·¯ç”±"><a href="#æ‰‹å·¥é…ç½®è·¯ç”±" class="headerlink" title="æ‰‹å·¥é…ç½®è·¯ç”±"></a>æ‰‹å·¥é…ç½®è·¯ç”±</h4><p>æ·»åŠ è·¯ç”±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ip route add default dev ppp0</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹è·¯ç”±è¡¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ip route </span><br><span class="line">default via 47.19.19.27 dev eth1 </span><br><span class="line">1.2.2.2 dev ppp0  proto kernel  scope link  src 2.0.1.8 </span><br><span class="line">10.0.0.0&#x2F;8 via 10.47.47.247 dev eth0 </span><br><span class="line">10.47.40.0&#x2F;21 dev eth0  proto kernel  scope link  src 10.47.40.190 </span><br><span class="line">47.89.36.0&#x2F;22 dev eth1  proto kernel  scope link  src 47.89.36.254 </span><br><span class="line">100.64.0.0&#x2F;10 via 10.47.47.247 dev eth0 </span><br><span class="line">118.142.17.226 via 47.89.39.247 dev eth1  src 47.89.36.254 </span><br><span class="line">169.254.0.0&#x2F;16 dev eth0  scope link  metric 1002 </span><br><span class="line">169.254.0.0&#x2F;16 dev eth1  scope link  metric 1003 </span><br><span class="line">172.16.0.0&#x2F;12 via 10.47.47.247 dev eth0  </span><br><span class="line">192.168.0.0&#x2F;24 dev ppp0  scope link</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤è·¯ç”±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ip route del default dev ppp0</span><br></pre></td></tr></table></figure>

<h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="centosè¿æ¥VpnServer-è¶…æ—¶-æ‰§è¡Œä¸‹é¢å‘½ä»¤"><a href="#centosè¿æ¥VpnServer-è¶…æ—¶-æ‰§è¡Œä¸‹é¢å‘½ä»¤" class="headerlink" title="centosè¿æ¥VpnServer è¶…æ—¶,æ‰§è¡Œä¸‹é¢å‘½ä»¤"></a>centosè¿æ¥VpnServer è¶…æ—¶,æ‰§è¡Œä¸‹é¢å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Delete all rules in  chain or all chains</span><br><span class="line">iptables -F</span><br></pre></td></tr></table></figure>

<h3 id="è¿æ¥vpn-serverï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯"><a href="#è¿æ¥vpn-serverï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯" class="headerlink" title="è¿æ¥vpn serverï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯"></a>è¿æ¥vpn serverï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Using interface ppp0</span><br><span class="line">Connect: ppp0 &lt;--&gt; &#x2F;dev&#x2F;pts&#x2F;2</span><br><span class="line">EAP: unknown authentication type 26; Naking</span><br><span class="line">EAP: peer reports authentication failure</span><br><span class="line">Connection terminated.</span><br></pre></td></tr></table></figure>

<p>è§£å†³åŠæ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;ppp&#x2F;options</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å°†ä¸‹é¢å­—æ®µæ·»åŠ åˆ°&#x2F;etc&#x2F;ppp&#x2F;optionsæ–‡ä»¶ä¸­(rootç”¨æˆ·æƒé™å¯æ›´æ”¹ï¼‰</span><br><span class="line"></span><br><span class="line">refuse-pap</span><br><span class="line">refuse-eap</span><br><span class="line">refuse-chap</span><br><span class="line">refuse-mschap</span><br><span class="line">require-mppe</span><br></pre></td></tr></table></figure>

<h3 id="è¿æ¥æˆåŠŸ-è·¯ç”±ä¿®æ”¹æˆåŠŸï¼Œæ²¡ç½‘"><a href="#è¿æ¥æˆåŠŸ-è·¯ç”±ä¿®æ”¹æˆåŠŸï¼Œæ²¡ç½‘" class="headerlink" title="è¿æ¥æˆåŠŸ,è·¯ç”±ä¿®æ”¹æˆåŠŸï¼Œæ²¡ç½‘"></a>è¿æ¥æˆåŠŸ,è·¯ç”±ä¿®æ”¹æˆåŠŸï¼Œæ²¡ç½‘</h3><blockquote>
<p>é”™è¯¯åŸå› ï¼šDNS æ²¡æœ‰æˆåŠŸè§£æ</p>
</blockquote>
<p>è§£å†³åŠæ³•ï¼š<br>1.ä¿®æ”¹/etc/resolv.confæ–‡ä»¶ï¼Œå°†nameserver é…ç½®æˆVPNæœåŠ¡å™¨ä¸­çš„dnsçš„ipï¼Œæˆ–è€…ç›´æ¥å†™å…¬ç”¨dnsï¼ˆ114.114.114.114æˆ–1.1.1.1æˆ–8.8.8.8ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;resolv.conf</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nameserver 1.1.1.1</span><br></pre></td></tr></table></figure>

<h3 id="é‡å¯æœºå™¨æˆ–è€…é‡å¯networkæœåŠ¡ï¼Œä¼šæ–­å¼€è¿æ¥"><a href="#é‡å¯æœºå™¨æˆ–è€…é‡å¯networkæœåŠ¡ï¼Œä¼šæ–­å¼€è¿æ¥" class="headerlink" title="é‡å¯æœºå™¨æˆ–è€…é‡å¯networkæœåŠ¡ï¼Œä¼šæ–­å¼€è¿æ¥"></a>é‡å¯æœºå™¨æˆ–è€…é‡å¯networkæœåŠ¡ï¼Œä¼šæ–­å¼€è¿æ¥</h3><blockquote>
<p>è§£å†³æ–¹æ³•å¾…ç»­</p>
</blockquote>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://cloud.tencent.com/developer/article/1051293" target="_blank" rel="noopener external nofollow noreferrer">PPTP VPN æœåŠ¡å™¨</a></p>
<p><a href="https://blog.csdn.net/qq_20948497/article/details/53419280" target="_blank" rel="noopener external nofollow noreferrer">linuxè¿æ¥vpnæœåŠ¡</a></p>
<p><a href="http://blog.51cto.com/wutou/1737372" target="_blank" rel="noopener external nofollow noreferrer">Linux centos ***æ‹¨å·å®¢æˆ·ç«¯</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxæ·»åŠ å®šæ—¶ä»»åŠ¡</title>
    <url>/articles/3049896161.html</url>
    <content><![CDATA[<h2 id="1-ä½¿ç”¨-crontab-e-å‘½ä»¤ç¼–è¾‘å®šæ—¶ä»»åŠ¡åˆ—è¡¨"><a href="#1-ä½¿ç”¨-crontab-e-å‘½ä»¤ç¼–è¾‘å®šæ—¶ä»»åŠ¡åˆ—è¡¨" class="headerlink" title="1. ä½¿ç”¨ crontab -e å‘½ä»¤ç¼–è¾‘å®šæ—¶ä»»åŠ¡åˆ—è¡¨"></a>1. ä½¿ç”¨ crontab -e å‘½ä»¤ç¼–è¾‘å®šæ—¶ä»»åŠ¡åˆ—è¡¨</h2><p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ç¼–è¾‘çš„å®šæ—¶ä»»åŠ¡åˆ—è¡¨æ˜¯å±äºç”¨æˆ·çº§åˆ«çš„ï¼Œåˆæ¬¡ç¼–è¾‘ååœ¨ /var/spool/cron ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªä¸ç”¨æˆ·åç›¸åŒçš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å°±æ˜¯æˆ‘ä»¬çš„å®šæ—¶ä»»åŠ¡åˆ—è¡¨ã€‚å¦‚æ²¡æœ‰å®šæ—¶ä»»åŠ¡ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç©ºæ–‡ä»¶ã€‚</p>
<p>crontabå‘½ä»¤è¿˜æœ‰ä¸€äº›å…¶ä»–çš„é€‰é¡¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-u 	#æŒ‡å®šå“ªä¸ªç”¨æˆ·çš„cronæœåŠ¡ï¼Œä¸€èˆ¬æ˜¯rootç”¨æˆ·æ‰§è¡Œè¿™ä¸ªå‘½ä»¤çš„æ—¶å€™éœ€è¦</span><br><span class="line">-l 	#åˆ—å‡ºç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡åˆ—è¡¨ï¼Œé»˜è®¤å½“å‰ç”¨æˆ·</span><br><span class="line">-r 	#åˆ é™¤ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡åˆ—è¡¨ï¼Œé»˜è®¤å½“å‰ç”¨æˆ· </span><br><span class="line">-e 	#ç¼–è¾‘ç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡åˆ—è¡¨ï¼Œé»˜è®¤å½“å‰ç”¨æˆ·</span><br></pre></td></tr></table></figure>

<a id="more"></a>
<p>ä¾‹å­ï¼šåˆ—å‡ºxiaomingç”¨æˆ·çš„cronæœåŠ¡åˆ—è¡¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">crontab -u xiaoming -l</span><br></pre></td></tr></table></figure>



<h2 id="2-ç›´æ¥ç¼–è¾‘-etc-crontab-æ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š"><a href="#2-ç›´æ¥ç¼–è¾‘-etc-crontab-æ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š" class="headerlink" title="2. ç›´æ¥ç¼–è¾‘ /etc/crontab æ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š"></a>2. ç›´æ¥ç¼–è¾‘ /etc/crontab æ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</h2><p>ç¼–è¾‘ /etc/crontab æ–‡ä»¶åªæœ‰ root ç”¨æˆ·æ‰è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;crontab</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¼šçœ‹åˆ°æ–‡ä»¶å†…å®¹ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHELL&#x3D;&#x2F;bin&#x2F;bash</span><br><span class="line">PATH&#x3D;&#x2F;sbin:&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;bin</span><br><span class="line">MAILTO&#x3D;root</span><br><span class="line">HOME&#x3D;&#x2F;</span><br><span class="line"></span><br><span class="line"># For details see man 4 crontabs</span><br><span class="line"></span><br><span class="line"># Example of job definition:</span><br><span class="line"># .---------------- minute (0 - 59)</span><br><span class="line"># |  .------------- hour (0 - 23)</span><br><span class="line"># |  |  .---------- day of month (1 - 31)</span><br><span class="line"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="line"># |  |  |  |  .---- day of week (0 - 6) (Sunday&#x3D;0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"># |  |  |  |  |</span><br><span class="line"># *  *  *  *  * user-name command to be executed</span><br></pre></td></tr></table></figure>

<p>è¿™é…ç½®çš„å®šæ—¶ä»»åŠ¡å±äºç³»ç»Ÿçº§åˆ«çš„ã€‚</p>
<h2 id="3-å…¶ä»–çš„ä¸€äº›åŒºåˆ«"><a href="#3-å…¶ä»–çš„ä¸€äº›åŒºåˆ«" class="headerlink" title="3. å…¶ä»–çš„ä¸€äº›åŒºåˆ«"></a>3. å…¶ä»–çš„ä¸€äº›åŒºåˆ«</h2><p>crontab -e ä¼šè¿›è¡Œè¯­æ³•æ£€æŸ¥ã€ç›´æ¥ç¼–è¾‘ /etc/crontab æ–‡ä»¶åˆ™ä¸ä¼š</p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p> <a href="http://www.cnblogs.com/libra0920/p/6520701.html" target="_blank" rel="noopener external nofollow noreferrer">Linux æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼Œcrontab -e å‘½ä»¤ä¸ç›´æ¥ç¼–è¾‘ /etc/crontab æ–‡ä»¶</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>localeçš„è®¾å®šåŠLANGã€LC_CTYPEã€LC_ALLç¯å¢ƒå˜é‡</title>
    <url>/articles/929099485.html</url>
    <content><![CDATA[<h3 id="localeä»‹ç»"><a href="#localeä»‹ç»" class="headerlink" title="localeä»‹ç»"></a>localeä»‹ç»</h3><ul>
<li><p>localeè¿™ä¸ªå•è¯ä¸­æ–‡ç¿»è¯‘æˆåœ°åŒºæˆ–è€…åœ°åŸŸï¼Œå…¶å®è¿™ä¸ªå•è¯åŒ…å«çš„æ„ä¹‰è¦å®½æ³›å¾ˆå¤šã€‚Localeæ˜¯æ ¹æ®è®¡ç®—æœºç”¨æˆ·æ‰€ä½¿ç”¨çš„è¯­è¨€ï¼Œæ‰€åœ¨å›½å®¶æˆ–è€…åœ°åŒºï¼Œä»¥åŠå½“åœ°çš„æ–‡åŒ–ä¼ ç»Ÿæ‰€å®šä¹‰çš„ä¸€ä¸ªè½¯ä»¶è¿è¡Œæ—¶çš„è¯­è¨€ç¯å¢ƒã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[oracle@game ~]$Â locale</span><br><span class="line">LANG&#x3D;en_US.UTF-8</span><br><span class="line">LC_CTYPE&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_NUMERIC&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_TIME&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_COLLATE&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_MONETARY&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_MESSAGES&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_PAPER&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_NAME&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_ADDRESS&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_TELEPHONE&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_MEASUREMENT&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_IDENTIFICATION&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_ALL&#x3D;en_US.UTF-8</span><br><span class="line">[oracle@game ~]$</span><br></pre></td></tr></table></figure>

<a id="more"></a>
</li>
<li><p>localeæŠŠæŒ‰ç…§æ‰€æ¶‰åŠåˆ°çš„æ–‡åŒ–ä¼ ç»Ÿçš„å„ä¸ªæ–¹é¢åˆ†æˆ12ä¸ªå¤§ç±»ï¼Œè¿™12ä¸ªå¤§ç±»åˆ†åˆ«æ˜¯ï¼š </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1ã€è¯­è¨€ç¬¦å·åŠå…¶åˆ†ç±»(LC_CTYPE)Â </span><br><span class="line">2ã€æ•°å­—(LC_NUMERIC)Â </span><br><span class="line">3ã€æ¯”è¾ƒå’Œæ’åºä¹ æƒ¯(LC_COLLATE)Â </span><br><span class="line">4ã€æ—¶é—´æ˜¾ç¤ºæ ¼å¼(LC_TIME)Â </span><br><span class="line">5ã€è´§å¸å•ä½(LC_MONETARY)Â </span><br><span class="line">6ã€ä¿¡æ¯ä¸»è¦æ˜¯æç¤ºä¿¡æ¯,é”™è¯¯ä¿¡æ¯,çŠ¶æ€ä¿¡æ¯,æ ‡é¢˜,æ ‡ç­¾,æŒ‰é’®å’Œèœå•ç­‰(LC_MESSAGES)Â </span><br><span class="line">7ã€å§“åä¹¦å†™æ–¹å¼(LC_NAME)Â </span><br><span class="line">8ã€åœ°å€ä¹¦å†™æ–¹å¼(LC_ADDRESS)Â </span><br><span class="line">9ã€ç”µè¯å·ç ä¹¦å†™æ–¹å¼(LC_TELEPHONE)Â </span><br><span class="line">10ã€åº¦é‡è¡¡è¡¨è¾¾æ–¹å¼ (LC_MEASUREMENT)Â </span><br><span class="line">11ã€é»˜è®¤çº¸å¼ å°ºå¯¸å¤§å°(LC_PAPER)Â </span><br><span class="line">12ã€å¯¹localeè‡ªèº«åŒ…å«ä¿¡æ¯çš„æ¦‚è¿°(LC_IDENTIFICATION)</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰€ä»¥è¯´ï¼Œlocaleå°±æ˜¯æŸä¸€ä¸ªåœ°åŸŸå†…çš„äººä»¬çš„è¯­è¨€ä¹ æƒ¯å’Œæ–‡åŒ–ä¼ ç»Ÿå’Œç”Ÿæ´»ä¹ æƒ¯ã€‚ä¸€ä¸ªåœ°åŒºçš„localeå°±æ˜¯æ ¹æ®è¿™å‡ å¤§ç±»çš„ä¹ æƒ¯å®šä¹‰çš„ï¼Œè¿™äº›localeå®š ä¹‰æ–‡ä»¶æ”¾åœ¨/usr/share/i18n/localesç›®å½•ä¸‹é¢ï¼Œä¾‹å¦‚en_US, zh_CN and de_DE@euroéƒ½æ˜¯localeçš„å®šä¹‰æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶éƒ½æ˜¯ç”¨æ–‡æœ¬æ ¼å¼ä¹¦å†™çš„ï¼Œä½ å¯ä»¥ç”¨å†™å­—æ¿æ‰“å¼€ï¼Œçœ‹çœ‹é‡Œè¾¹çš„å†…å®¹ï¼Œå½“ç„¶å‡ºäº†æœ‰é™çš„æ³¨é‡Šä»¥å¤–ï¼Œå¤§éƒ¨åˆ† ä¸œè¥¿å¯èƒ½ä½ éƒ½çœ‹ä¸æ‡‚ï¼Œå› ä¸ºæ˜¯ç”¨çš„Unicodeçš„å­—ç¬¦ç´¢å¼•æ–¹å¼ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[oracle@game ~]$Â cd &#x2F;usr&#x2F;share&#x2F;i18n&#x2F;locales</span><br><span class="line">[oracle@game locales]$Â ls</span><br><span class="line">aa_DJÂ Â Â Â Â Â Â  ar_YEÂ Â Â Â Â Â  el_GRÂ Â Â Â Â Â  es_ESÂ Â Â Â Â Â  fr_CHÂ Â Â Â Â Â Â Â Â Â  iso14651_t1 ne_NPÂ Â Â Â Â Â  so_ETÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  translit_hangul</span><br><span class="line">aa_ERÂ Â Â Â Â Â Â  az_AZÂ Â Â Â Â Â  el_GR@euro es_ES@euro fr_FRÂ Â Â Â Â Â Â Â Â Â  it_CHÂ Â Â Â Â Â Â  nl_BEÂ Â Â Â Â Â  so_KEÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  translit_narrow</span><br><span class="line">aa_ER@saaho be_BYÂ Â Â Â Â Â  en_AUÂ Â Â Â Â Â  es_GTÂ Â Â Â Â Â  fr_FR@euroÂ Â Â Â Â  it_ITÂ Â Â Â Â Â Â  nl_BE@euro so_SOÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  translit_neutral</span><br><span class="line">aa_ETÂ Â Â Â Â Â Â  bg_BGÂ Â Â Â Â Â  en_BWÂ Â Â Â Â Â  es_HNÂ Â Â Â Â Â  fr_LUÂ Â Â Â Â Â Â Â Â Â  it_IT@euroÂ Â  nl_NLÂ Â Â Â Â Â  sq_ALÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  translit_small</span><br><span class="line">af_ZAÂ Â Â Â Â Â Â  bn_BDÂ Â Â Â Â Â  en_CAÂ Â Â Â Â Â  es_MXÂ Â Â Â Â Â  fr_LU@euroÂ Â Â Â Â  iw_ILÂ Â Â Â Â Â Â  nl_NL@euro sr_CSÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  translit_wide</span><br><span class="line">am_ETÂ Â Â Â Â Â Â  bn_INÂ Â Â Â Â Â  en_DKÂ Â Â Â Â Â  es_NIÂ Â Â Â Â Â  ga_IEÂ Â Â Â Â Â Â Â Â Â  ja_JPÂ Â Â Â Â Â Â  nn_NOÂ Â Â Â Â Â  st_ZAÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  tr_TR</span><br><span class="line">an_ESÂ Â Â Â Â Â Â  br_FRÂ Â Â Â Â Â  en_GBÂ Â Â Â Â Â  es_PAÂ Â Â Â Â Â  ga_IE@euroÂ Â Â Â Â  ka_GEÂ Â Â Â Â Â Â  no_NOÂ Â Â Â Â Â  sv_FIÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  tt_RU</span><br><span class="line">ar_AEÂ Â Â Â Â Â Â  br_FR@euro en_HKÂ Â Â Â Â Â  es_PEÂ Â Â Â Â Â  gd_GBÂ Â Â Â Â Â Â Â Â Â  kk_KZÂ Â Â Â Â Â Â  oc_FRÂ Â Â Â Â Â  sv_FI@euroÂ Â Â Â Â Â Â Â Â Â Â Â  uk_UA</span><br><span class="line">ar_BHÂ Â Â Â Â Â Â  bs_BAÂ Â Â Â Â Â  en_IEÂ Â Â Â Â Â  es_PRÂ Â Â Â Â Â  gez_ERÂ Â Â Â Â Â Â Â Â  kl_GLÂ Â Â Â Â Â Â  om_ETÂ Â Â Â Â Â  sv_SEÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  ur_PK</span><br><span class="line">ar_DZÂ Â Â Â Â Â Â  byn_ERÂ Â Â Â Â  en_IE@euro es_PYÂ Â Â Â Â Â  gez_ER@abegede kn_INÂ Â Â Â Â Â Â  om_KEÂ Â Â Â Â Â  ta_INÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  uz_UZ</span><br><span class="line">ar_EGÂ Â Â Â Â Â Â  ca_ESÂ Â Â Â Â Â  en_INÂ Â Â Â Â Â  es_SVÂ Â Â Â Â Â  gez_ETÂ Â Â Â Â Â Â Â Â  ko_KRÂ Â Â Â Â Â Â  pa_INÂ Â Â Â Â Â  te_INÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  uz_UZ@cyrillic</span><br><span class="line">ar_INÂ Â Â Â Â Â Â  ca_ES@euro en_NZÂ Â Â Â Â Â  es_USÂ Â Â Â Â Â  gez_ET@abegede kw_GBÂ Â Â Â Â Â Â  pl_PLÂ Â Â Â Â Â  tg_TJÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  vi_VN</span><br><span class="line">ar_IQÂ Â Â Â Â Â Â  cs_CZÂ Â Â Â Â Â  en_PHÂ Â Â Â Â Â  es_UYÂ Â Â Â Â Â  gl_ESÂ Â Â Â Â Â Â Â Â Â  lg_UGÂ Â Â Â Â Â Â  POSIXÂ Â Â Â Â Â  th_THÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  wa_BE</span><br><span class="line">ar_JOÂ Â Â Â Â Â Â  cy_GBÂ Â Â Â Â Â  en_SGÂ Â Â Â Â Â  es_VEÂ Â Â Â Â Â  gl_ES@euroÂ Â Â Â Â  lo_LAÂ Â Â Â Â Â Â  pt_BRÂ Â Â Â Â Â  ti_ERÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  wa_BE@euro</span><br><span class="line">ar_KWÂ Â Â Â Â Â Â  da_DKÂ Â Â Â Â Â  en_USÂ Â Â Â Â Â  et_EEÂ Â Â Â Â Â  gu_INÂ Â Â Â Â Â Â Â Â Â  lt_LTÂ Â Â Â Â Â Â  pt_PTÂ Â Â Â Â Â  ti_ETÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  wal_ET</span><br><span class="line">ar_LBÂ Â Â Â Â Â Â  de_ATÂ Â Â Â Â Â  en_ZAÂ Â Â Â Â Â  eu_ESÂ Â Â Â Â Â  gv_GBÂ Â Â Â Â Â Â Â Â Â  lv_LVÂ Â Â Â Â Â Â  pt_PT@euro tig_ERÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  xh_ZA</span><br><span class="line">ar_LYÂ Â Â Â Â Â Â  de_AT@euro en_ZWÂ Â Â Â Â Â  eu_ES@euro he_ILÂ Â Â Â Â Â Â Â Â Â  mi_NZÂ Â Â Â Â Â Â  ro_ROÂ Â Â Â Â Â  tl_PHÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  yi_US</span><br><span class="line">ar_MAÂ Â Â Â Â Â Â  de_BEÂ Â Â Â Â Â  es_ARÂ Â Â Â Â Â  fa_IRÂ Â Â Â Â Â  hi_INÂ Â Â Â Â Â Â Â Â Â  mk_MKÂ Â Â Â Â Â Â  ru_RUÂ Â Â Â Â Â  translit_circleÂ Â Â Â Â Â Â  zh_CN</span><br><span class="line">ar_OMÂ Â Â Â Â Â Â  de_BE@euro es_BOÂ Â Â Â Â Â  fi_FIÂ Â Â Â Â Â  hr_HRÂ Â Â Â Â Â Â Â Â Â  ml_INÂ Â Â Â Â Â Â  ru_UAÂ Â Â Â Â Â  translit_cjk_compatÂ Â Â  zh_HK</span><br><span class="line">ar_QAÂ Â Â Â Â Â Â  de_CHÂ Â Â Â Â Â  es_CLÂ Â Â Â Â Â  fi_FI@euro hu_HUÂ Â Â Â Â Â Â Â Â Â  mn_MNÂ Â Â Â Â Â Â  se_NOÂ Â Â Â Â Â  translit_cjk_variants zh_SG</span><br><span class="line">ar_SAÂ Â Â Â Â Â Â  de_DEÂ Â Â Â Â Â  es_COÂ Â Â Â Â Â  fo_FOÂ Â Â Â Â Â  hy_AMÂ Â Â Â Â Â Â Â Â Â  mr_INÂ Â Â Â Â Â Â  sid_ETÂ Â Â Â Â  translit_combiningÂ Â Â Â  zh_TW</span><br><span class="line">ar_SDÂ Â Â Â Â Â Â  de_DE@euro es_CRÂ Â Â Â Â Â  fr_BEÂ Â Â Â Â Â  i18nÂ Â Â Â Â Â Â Â Â Â Â  ms_MYÂ Â Â Â Â Â Â  sk_SKÂ Â Â Â Â Â  translit_compatÂ Â Â Â Â Â Â  zu_ZA</span><br><span class="line">ar_SYÂ Â Â Â Â Â Â  de_LUÂ Â Â Â Â Â  es_DOÂ Â Â Â Â Â  fr_BE@euro id_IDÂ Â Â Â Â Â Â Â Â Â  mt_MTÂ Â Â Â Â Â Â  sl_SIÂ Â Â Â Â Â  translit_font</span><br><span class="line">ar_TNÂ Â Â Â Â Â Â  de_LU@euro es_ECÂ Â Â Â Â Â  fr_CAÂ Â Â Â Â Â  is_ISÂ Â Â Â Â Â Â Â Â Â  nb_NOÂ Â Â Â Â Â Â  so_DJÂ Â Â Â Â Â  translit_fraction</span><br><span class="line">[oracle@game locales]$</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯¹äºde_DE@euroçš„ä¸€ç‚¹è¯´æ˜ï¼Œ@åè¾¹æ˜¯ä¿®æ­£é¡¹ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå¾·å›½çš„localeï¼š/usr/share/i18n/locales /de_DE@euroå’Œ/usr/share/i18n/locales/de_DEã€‚æ‰“å¼€è¿™ä¸¤ä¸ªlocaleå®šä¹‰ï¼Œä½ å°±ä¼šçŸ¥é“å®ƒä»¬çš„å·®åˆ«åœ¨äº de_DE@euroä½¿ç”¨çš„æ˜¯æ¬§æ´²çš„æ’åºã€æ¯”è¾ƒå’Œç¼©è¿›ä¹ æƒ¯ï¼Œè€Œde_DEç”¨çš„æ˜¯å¾·å›½çš„æ ‡å‡†ä¹ æƒ¯ã€‚ </p>
</li>
<li><p>ä¸Šé¢æˆ‘ä»¬è¯´åˆ°äº†zh_CN.GB18030çš„å‰åŠéƒ¨åˆ†ï¼ŒååŠéƒ¨åˆ†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¤§éƒ¨åˆ†Linuxç”¨æˆ·éƒ½çŸ¥é“æ˜¯ç³»ç»Ÿé‡‡ç”¨çš„å­—ç¬¦é›†ã€‚ </p>
</li>
<li><p>zh_CN.GB2312åˆ°åº•æ˜¯åœ¨è¯´ä»€ä¹ˆï¼Ÿ Localeæ˜¯è½¯ä»¶åœ¨è¿è¡Œæ—¶çš„è¯­è¨€ç¯å¢ƒ, å®ƒåŒ…æ‹¬è¯­è¨€(Language), åœ°åŸŸ (Territory) å’Œå­—ç¬¦é›†(Codeset)ã€‚ä¸€ä¸ªlocaleçš„ä¹¦å†™æ ¼å¼ä¸º: è¯­è¨€[_åœ°åŸŸ[.å­—ç¬¦é›†]]ã€‚æ‰€ä»¥è¯´å‘¢ï¼Œlocaleæ€»æ˜¯å’Œä¸€å®šçš„å­—ç¬¦é›†ç›¸è”ç³»çš„ã€‚ä¸‹é¢ä¸¾å‡ ä¸ªä¾‹å­ï¼š </p>
<p>1ã€æˆ‘è¯´ä¸­æ–‡ï¼Œèº«å¤„ä¸­åäººæ°‘å…±å’Œå›½ï¼Œä½¿ç”¨å›½æ ‡2312å­—ç¬¦é›†æ¥è¡¨è¾¾å­—ç¬¦ã€‚zh_CN.GB2312ï¼ä¸­æ–‡_ä¸­åäººæ°‘å…±å’Œå›½ï¼‹å›½æ ‡2312å­—ç¬¦é›†ã€‚ </p>
<p>2ã€æˆ‘è¯´ä¸­æ–‡ï¼Œèº«å¤„ä¸­åäººæ°‘å…±å’Œå›½ï¼Œä½¿ç”¨å›½æ ‡18030å­—ç¬¦é›†æ¥è¡¨è¾¾å­—ç¬¦ã€‚zh_CN.GB18030ï¼ä¸­æ–‡_ä¸­åäººæ°‘å…±å’Œå›½ï¼‹å›½æ ‡18030å­—ç¬¦é›†ã€‚ </p>
<p>3ã€æˆ‘è¯´ä¸­æ–‡ï¼Œèº«å¤„ä¸­åäººæ°‘å…±å’Œå›½å°æ¹¾çœï¼Œä½¿ç”¨å›½æ ‡Big5å­—ç¬¦é›†æ¥è¡¨è¾¾å­—ç¬¦ã€‚zh_TW.BIG5=ä¸­æ–‡_å°æ¹¾.å¤§äº”ç å­—ç¬¦é›† </p>
<p>4ã€æˆ‘è¯´è‹±æ–‡ï¼Œèº«å¤„å¤§ä¸åˆ—é¢ ï¼Œä½¿ç”¨ISO-8859-1å­—ç¬¦é›†æ¥è¡¨è¾¾å­—ç¬¦ã€‚ en_GB.ISO-8859-1=è‹±æ–‡_å¤§ä¸åˆ—é¢ .ISO-8859-1å­—ç¬¦é›† </p>
<p>5ã€æˆ‘è¯´å¾·è¯­ï¼Œèº«å¤„å¾·å›½ï¼Œä½¿ç”¨UTF-8å­—ç¬¦é›†ï¼Œä¹ æƒ¯äº†æ¬§æ´²é£æ ¼ã€‚de_DE.UTF-8@euroï¼å¾·è¯­_å¾·å›½.UTF-8å­—ç¬¦é›†@æŒ‰ç…§æ¬§æ´²ä¹ æƒ¯åŠ ä»¥ä¿®æ­£ï¼Œæ³¨æ„ä¸æ˜¯<a href="mailto:de_DE@euro.UTF-8" rel="external nofollow noreferrer">de_DE@euro.UTF-8</a>ï¼Œæ‰€ä»¥å®Œå…¨çš„localeè¡¨è¾¾æ–¹å¼æ˜¯ [è¯­è¨€[_åœ°åŸŸ][.å­—ç¬¦é›†][@ä¿®æ­£å€¼]ã€‚ </p>
</li>
<li><p>å…¶ä¸­ï¼Œä¸ä¸­æ–‡è¾“å…¥å…³ç³»æœ€å¯†åˆ‡çš„å°±æ˜¯LC_CTYPEï¼ŒLC_CTYPEè§„å®šäº†ç³»ç»Ÿå†…æœ‰æ•ˆçš„å­—ç¬¦ä»¥åŠè¿™äº›å­—ç¬¦çš„åˆ†ç±»ï¼Œ è¯¸å¦‚ä»€ä¹ˆæ˜¯å¤§å†™å­—æ¯ï¼Œå°å†™å­—æ¯ï¼Œå¤§å°å†™è½¬æ¢ï¼Œæ ‡ç‚¹ç¬¦å·ã€å¯æ‰“å°å­—ç¬¦å’Œå…¶ä»–çš„å­—ç¬¦å±æ€§ç­‰æ–¹é¢ã€‚è€Œlocaleå®š ä¹‰zh_CNä¸­æœ€æœ€é‡è¦çš„ä¸€é¡¹å°±æ˜¯å®šä¹‰äº†æ±‰å­—(Classâ€œhanziâ€)è¿™ä¸€ä¸ªå¤§ç±»ï¼Œå½“ç„¶ä¹Ÿæ˜¯ç”¨Unicodeæè¿°çš„ï¼Œè¿™å°±è®©ä¸­æ–‡å­—ç¬¦åœ¨Linuxç³»ç»Ÿ ä¸­æˆä¸ºåˆæ³•çš„æœ‰æ•ˆå­—ç¬¦ï¼Œè€Œä¸”ä¸è®ºå®ƒä»¬æ˜¯ç”¨ä»€ä¹ˆå­—ç¬¦é›†ç¼–ç çš„ã€‚ </p>
</li>
</ul>
<h3 id="è®¾å®šlocale"><a href="#è®¾å®šlocale" class="headerlink" title="è®¾å®šlocale"></a>è®¾å®šlocale</h3><ul>
<li><p>è®¾å®šlocaleå°±æ˜¯è®¾å®š12å¤§ç±»çš„localeåˆ†ç±»å±æ€§ï¼Œå³12ä¸ªLC_*ã€‚é™¤äº†è¿™12ä¸ªå˜é‡å¯ä»¥è®¾å®šä»¥å¤–ï¼Œä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œè¿˜æœ‰ä¸¤ä¸ªå˜é‡ï¼š<code>LC_ALLå’ŒLANG</code>ã€‚å®ƒä»¬ä¹‹é—´æœ‰ä¸€ä¸ªä¼˜å…ˆçº§çš„å…³ç³»ï¼š<code>LC_ALL &gt; LC_XXX &gt;LANG</code>ã€‚å¯ä»¥è¿™ä¹ˆè¯´ï¼ŒLC_ALLæ˜¯æœ€ä¸Šçº§è®¾å®šæˆ–è€…å¼ºåˆ¶è®¾å®šï¼Œè€ŒLANGæ˜¯é»˜è®¤è®¾å®šå€¼ã€‚ </p>
<ul>
<li>1ã€å¦‚æœä½ è®¾å®šäº†LC_ALLï¼zh_CN.UTF-8ï¼Œé‚£ä¹ˆä¸ç®¡LC_*å’ŒLANGè®¾å®šæˆä»€ä¹ˆå€¼ï¼Œå®ƒä»¬éƒ½ä¼šè¢«å¼ºåˆ¶æœä»LC_ALLçš„è®¾å®šï¼Œæˆä¸º zh_CN.UTF-8ã€‚ </li>
<li>2ã€å‡å¦‚ä½ è®¾å®šäº†LANGï¼zh_CN.UTF-8ï¼Œè€Œå…¶ä»–çš„LC_*=en_US.UTF-8ï¼Œå¹¶ä¸”æ²¡æœ‰è®¾å®šLC_ALLçš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„localeè®¾å®šä»¥LC_xxx=en_US.UTF-8ã€‚ </li>
<li>3ã€å‡å¦‚ä½ è®¾å®šäº†LANGï¼zh_CN.UTF-8ï¼Œè€Œå…¶ä»–çš„LC_*ï¼Œå’ŒLC_ALLå‡æœªè®¾å®šçš„è¯ï¼Œç³»ç»Ÿä¼šå°†LC_xxxè®¾å®šæˆé»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯LANGçš„å€¼zh_CN.UTF-8ã€‚ </li>
<li>4ã€å‡å¦‚ä½ è®¾å®šäº†LANGï¼zh_CN.UTF-8ï¼Œè€Œå…¶ä»–çš„LC_CTYPE=en_US.UTF-8ï¼Œå…¶ä»–çš„LC_*ï¼Œå’ŒLC_ALLå‡æœªè®¾å®šçš„è¯ï¼Œ é‚£ä¹ˆç³»ç»Ÿçš„localeè®¾å®šå°†æ˜¯ï¼šLC_CTYPE=en_US.UTF-8ï¼Œå…¶ä½™çš„ LC_COLLATEï¼ŒLC_MESSAGESç­‰ç­‰å‡ä¼šé‡‡ç”¨é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯ LANGçš„å€¼ï¼Œä¹Ÿå°±æ˜¯LC_COLLATEï¼LC_MESSAGESï¼â€¦â€¦ï¼ LC_PAPERï¼LANGï¼zh_CN.UTF-8ã€‚ </li>
</ul>
</li>
<li><p>æ‰€ä»¥ï¼Œlocaleæ˜¯è¿™æ ·è®¾å®šçš„ï¼š </p>
<ul>
<li>1ã€å¦‚æœä½ éœ€è¦ä¸€ä¸ªçº¯ä¸­æ–‡çš„ç³»ç»Ÿçš„è¯ï¼Œè®¾å®šLC_ALL= zh_CN.XXXXï¼Œæˆ–è€…LANG=zh_CN.XXXXéƒ½å¯ä»¥ï¼Œå½“ç„¶ä½ å¯ä»¥ä¸¤ä¸ªéƒ½è®¾å®šï¼Œä½†æ­£å¦‚ä¸Šé¢æ‰€è®²ï¼ŒLC_ALLçš„å€¼å°†è¦†ç›–æ‰€æœ‰å…¶ä»–çš„localeè®¾å®šï¼Œä¸è¦ä½œæ— ç”¨åŠŸã€‚ </li>
<li>2ã€å¦‚æœä½ åªæƒ³è¦ä¸€ä¸ªå¯ä»¥è¾“å…¥ä¸­æ–‡çš„ç¯å¢ƒï¼Œè€Œä¿æŒèœå•ã€æ ‡é¢˜ï¼Œç³»ç»Ÿä¿¡æ¯ç­‰ç­‰ä¸ºè‹±æ–‡ç•Œé¢ï¼Œé‚£ä¹ˆåªéœ€è¦è®¾å®š LC_CTYPEï¼zh_CN.XXXXï¼ŒLANG=en_US.XXXXå°±å¯ä»¥äº†ã€‚è¿™æ ·LC_CTYPEï¼zh_CN.XXXXï¼Œè€ŒLC_COLLATEï¼LC_MESSAGESï¼â€¦â€¦ï¼ LC_PAPERï¼LANGï¼en_US.XXXXã€‚ </li>
<li>3ã€å‡å¦‚ä½ é«˜å…´çš„è¯ï¼Œå¯ä»¥æŠŠ12ä¸ªLC_*ä¸€ä¸€è®¾å®šæˆä½ éœ€è¦çš„å€¼ï¼Œæ‰“é€ ä¸€ä¸ªå¤çµç²¾æ€ªçš„ç³»ç»Ÿï¼š LC_CTYPEï¼zh_CN.GBK/GBK(ä½¿ç”¨ä¸­æ–‡ç¼–ç å†…ç GBKå­—ç¬¦é›†)ï¼› LC_NUMERIC=en_GB.ISO-8859-1(ä½¿ç”¨å¤§ä¸åˆ—é¢ çš„æ•°å­—ç³»ç»Ÿ) LC_MEASUREMEN=de_DE@euro.ISO-8859-15(å¾·å›½çš„åº¦é‡è¡¡ä½¿ç”¨ISO-8859-15å­—ç¬¦é›†) ç½—é©¬çš„åœ°å€ä¹¦å†™æ–¹å¼ï¼Œç¾å›½çš„çº¸å¼ è®¾å®šâ€¦â€¦ã€‚ä¼°è®¡æ²¡äººè¿™ä¹ˆå¹²å§ã€‚ </li>
<li>4ã€å‡å¦‚ä½ ä»€ä¹ˆä¹Ÿä¸åšçš„è¯ï¼Œä¹Ÿå°±æ˜¯LC_ALLï¼ŒLANGå’ŒLC_*å‡ä¸æŒ‡å®šç‰¹å®šå€¼çš„è¯ï¼Œç³»ç»Ÿå°†é‡‡ç”¨POSIXä½œä¸ºlcoaleï¼Œä¹Ÿå°±æ˜¯C localeã€‚</li>
</ul>
</li>
<li><p>å¦å¤–LANGå’ŒLANGUAGEæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>LANG - Specifies the default locale for all unset locale variables<br>LANGUAGE - Most programs use this for the language of its interface<br>LANGUAGEæ˜¯è®¾ç½®åº”ç”¨ç¨‹åºçš„ç•Œé¢è¯­è¨€ã€‚è€ŒLANGæ˜¯ä¼˜å…ˆçº§å¾ˆä½çš„ä¸€ä¸ªå˜é‡ï¼Œå®ƒæŒ‡å®šæ‰€æœ‰ä¸localeæœ‰å…³çš„å˜é‡çš„é»˜è®¤å€¼ï¼Œ</p>
</li>
</ul>
<h3 id="MAC-ä¸­è®¾å®šlocale"><a href="#MAC-ä¸­è®¾å®šlocale" class="headerlink" title="MAC ä¸­è®¾å®šlocale"></a>MAC ä¸­è®¾å®šlocale</h3><ul>
<li><p>åœ¨ç»ˆç«¯ä¸‹è¾“å…¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim ~&#x2F;.zshrc</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨å…¶ä»–ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ç¼–è¾‘~/.zshrcæ–‡ä»¶</p>
</li>
<li><p>åœ¨æ–‡ä»¶å†…å®¹æœ«ç«¯æ·»åŠ ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export LC_ALL&#x3D;en_US.UTF-8</span><br><span class="line">export LANG&#x3D;en_US.UTF-8</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¥ç€é‡å¯ä¸€ä¸‹ç»ˆç«¯ï¼Œæˆ–è€…è¾“å…¥source ~/.zshrcä½¿è®¾ç½®ç”Ÿæ•ˆã€‚</p>
<p>è®¾ç½®æˆåŠŸçš„è¯ï¼Œåœ¨æœ¬åœ°å’Œç™»å½•åˆ°æœåŠ¡å™¨è¾“å…¥localeå›è½¦ä¼šæ˜¾ç¤ºä¸‹é¢å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LANG&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_COLLATE&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_CTYPE&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_MESSAGES&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_MONETARY&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_NUMERIC&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_TIME&#x3D;&quot;en_US.UTF-8&quot;</span><br><span class="line">LC_ALL&#x3D;&quot;en_US.UTF-8&quot;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="è®¾å®šlocaleå¯è§£å†³é—®é¢˜å°ç»“"><a href="#è®¾å®šlocaleå¯è§£å†³é—®é¢˜å°ç»“" class="headerlink" title="è®¾å®šlocaleå¯è§£å†³é—®é¢˜å°ç»“"></a>è®¾å®šlocaleå¯è§£å†³é—®é¢˜å°ç»“</h3><ul>
<li><p>ç”¨Macçš„iterm2 sshè¿ä¸Šå»ï¼Œç»ˆç«¯æ˜¾ç¤ºä¸­æ–‡ä¹±ç ï¼Œä¹Ÿä¸èƒ½è¾“å…¥ä¸­æ–‡ï¼Œç„¶è€Œæœ¬åœ°ç»ˆç«¯å¯ä»¥æ˜¾ç¤ºå’Œè¾“å…¥</p>
<blockquote>
<p>è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯ç»ˆç«¯å’ŒæœåŠ¡å™¨çš„å­—ç¬¦é›†ä¸åŒ¹é…ï¼ŒMacOSXä¸‹é»˜è®¤çš„æ˜¯utf8å­—ç¬¦é›†ã€‚<br>è¾“å…¥localeå¯ä»¥æŸ¥çœ‹å­—ç¬¦ç¼–ç è®¾ç½®æƒ…å†µï¼Œè€Œæˆ‘çš„å¯¹åº”å€¼æ˜¯ç©ºçš„ã€‚<br>å› ä¸ºæˆ‘åœ¨æœ¬åœ°å’ŒæœåŠ¡å™¨éƒ½ç”¨zshæ›¿ä»£äº†bashï¼Œè€Œä¸”ä½¿ç”¨äº†oh-my-zshï¼Œè€Œé»˜è®¤çš„.zshrcæ²¡æœ‰è®¾ç½®ä¸ºutf-8ç¼–ç ï¼Œæ‰€ä»¥æœ¬åœ°å’ŒæœåŠ¡å™¨ç«¯éƒ½è¦åœ¨.zshrcè®¾ç½®</p>
</blockquote>
</li>
</ul>
<ul>
<li>sshç™»å½•æç¤ºè­¦å‘Š<code>-bash: warning: setlocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory</code></li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://www.cnblogs.com/xlmeng1988/archive/2013/01/16/locale.html" target="_blank" rel="noopener external nofollow noreferrer">http://www.cnblogs.com/xlmeng1988/archive/2013/01/16/locale.html</a></p>
<p><a href="https://gist.github.com/slow-is-fast/1b0e9e8bbcb7e8b8966d177730c46ba4" target="_blank" rel="noopener external nofollow noreferrer">https://gist.github.com/slow-is-fast/1b0e9e8bbcb7e8b8966d177730c46ba4</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>MacOS</tag>
      </tags>
  </entry>
  <entry>
    <title>sshpasså‘½ä»¤ä½¿ç”¨</title>
    <url>/articles/2936261150.html</url>
    <content><![CDATA[<h3 id="sshpasså®‰è£…"><a href="#sshpasså®‰è£…" class="headerlink" title="sshpasså®‰è£…"></a>sshpasså®‰è£…</h3><h4 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install sshpass</span><br></pre></td></tr></table></figure>

<h3 id="sshpassä½¿ç”¨"><a href="#sshpassä½¿ç”¨" class="headerlink" title="sshpassä½¿ç”¨"></a>sshpassä½¿ç”¨</h3><h4 id="ç›´æ¥è¿œç¨‹è¿æ¥æŸä¸»æœº"><a href="#ç›´æ¥è¿œç¨‹è¿æ¥æŸä¸»æœº" class="headerlink" title="ç›´æ¥è¿œç¨‹è¿æ¥æŸä¸»æœº"></a>ç›´æ¥è¿œç¨‹è¿æ¥æŸä¸»æœº</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sshpass -p &#123;å¯†ç &#125; ssh &#123;ç”¨æˆ·å&#125;@&#123;ä¸»æœºIP&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h4 id="è¿œç¨‹è¿æ¥æŒ‡å®šsshçš„ç«¯å£"><a href="#è¿œç¨‹è¿æ¥æŒ‡å®šsshçš„ç«¯å£" class="headerlink" title="è¿œç¨‹è¿æ¥æŒ‡å®šsshçš„ç«¯å£"></a>è¿œç¨‹è¿æ¥æŒ‡å®šsshçš„ç«¯å£</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sshpass -p &#123;å¯†ç &#125; ssh -p $&#123;ç«¯å£&#125; &#123;ç”¨æˆ·å&#125;@&#123;ä¸»æœºIP&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä»å¯†ç æ–‡ä»¶è¯»å–æ–‡ä»¶å†…å®¹ä½œä¸ºå¯†ç å»è¿œç¨‹è¿æ¥ä¸»æœº"><a href="#ä»å¯†ç æ–‡ä»¶è¯»å–æ–‡ä»¶å†…å®¹ä½œä¸ºå¯†ç å»è¿œç¨‹è¿æ¥ä¸»æœº" class="headerlink" title="ä»å¯†ç æ–‡ä»¶è¯»å–æ–‡ä»¶å†…å®¹ä½œä¸ºå¯†ç å»è¿œç¨‹è¿æ¥ä¸»æœº"></a>ä»å¯†ç æ–‡ä»¶è¯»å–æ–‡ä»¶å†…å®¹ä½œä¸ºå¯†ç å»è¿œç¨‹è¿æ¥ä¸»æœº</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sshpass -f &#123;å¯†ç æ–‡æœ¬æ–‡ä»¶&#125; ssh &#123;ç”¨æˆ·å&#125;@&#123;ä¸»æœºIP&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä»è¿œç¨‹ä¸»æœºä¸Šæ‹‰å–æ–‡ä»¶åˆ°æœ¬åœ°"><a href="#ä»è¿œç¨‹ä¸»æœºä¸Šæ‹‰å–æ–‡ä»¶åˆ°æœ¬åœ°" class="headerlink" title="ä»è¿œç¨‹ä¸»æœºä¸Šæ‹‰å–æ–‡ä»¶åˆ°æœ¬åœ°"></a>ä»è¿œç¨‹ä¸»æœºä¸Šæ‹‰å–æ–‡ä»¶åˆ°æœ¬åœ°</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sshpass -p &#123;å¯†ç &#125; scp &#123;ç”¨æˆ·å&#125;@&#123;ä¸»æœºIP&#125;:$&#123;è¿œç¨‹ä¸»æœºç›®å½•&#125; $&#123;æœ¬åœ°ä¸»æœºç›®å½•&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å°†ä¸»æœºç›®å½•æ–‡ä»¶æ‹·è´è‡³è¿œç¨‹ä¸»æœºç›®å½•"><a href="#å°†ä¸»æœºç›®å½•æ–‡ä»¶æ‹·è´è‡³è¿œç¨‹ä¸»æœºç›®å½•" class="headerlink" title="å°†ä¸»æœºç›®å½•æ–‡ä»¶æ‹·è´è‡³è¿œç¨‹ä¸»æœºç›®å½•"></a>å°†ä¸»æœºç›®å½•æ–‡ä»¶æ‹·è´è‡³è¿œç¨‹ä¸»æœºç›®å½•</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sshpass -p &#123;å¯†ç &#125; scp $&#123;æœ¬åœ°ä¸»æœºç›®å½•&#125; &#123;ç”¨æˆ·å&#125;@&#123;ä¸»æœºIP&#125;:$&#123;è¿œç¨‹ä¸»æœºç›®å½•&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è¿œç¨‹è¿æ¥ä¸»æœºå¹¶æ‰§è¡Œå‘½ä»¤"><a href="#è¿œç¨‹è¿æ¥ä¸»æœºå¹¶æ‰§è¡Œå‘½ä»¤" class="headerlink" title="è¿œç¨‹è¿æ¥ä¸»æœºå¹¶æ‰§è¡Œå‘½ä»¤"></a>è¿œç¨‹è¿æ¥ä¸»æœºå¹¶æ‰§è¡Œå‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sshpass -p &#123;å¯†ç &#125; ssh -o StrictHostKeyChecking&#x3D;no &#123;ç”¨æˆ·å&#125;@&#123;ä¸»æœºIP&#125; &#39;rm -rf &#x2F;tmp&#x2F;test&#39;</span><br><span class="line">-o StrictHostKeyChecking&#x3D;no ï¼šå¿½ç•¥å¯†ç æç¤º</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®è¿œç¨‹ä¸»æœºå…å¯†"><a href="#é…ç½®è¿œç¨‹ä¸»æœºå…å¯†" class="headerlink" title="é…ç½®è¿œç¨‹ä¸»æœºå…å¯†"></a>é…ç½®è¿œç¨‹ä¸»æœºå…å¯†</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sshpass -p &#123;å¯†ç &#125; ssh-copy-id -o StrictHostKeyChecking&#x3D;no -i ~&#x2F;.ssh&#x2F;id_rsa.pub &#123;ç”¨æˆ·å&#125;@&#123;ä¸»æœºIP&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/a632189007/article/details/79310897" target="_blank" rel="noopener external nofollow noreferrer">sshpasså‘½ä»¤ä½¿ç”¨</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Mac OS Xç³»ç»Ÿä¸‹ ç”¨ddå‘½ä»¤å°†isoé•œåƒå†™å…¥uç›˜</title>
    <url>/articles/4213798049.html</url>
    <content><![CDATA[<h3 id="æ“ä½œæ¦‚è¿°"><a href="#æ“ä½œæ¦‚è¿°" class="headerlink" title="æ“ä½œæ¦‚è¿°"></a>æ“ä½œæ¦‚è¿°</h3><p>1ã€æ‰¾å‡ºUç›˜æŒ‚è½½çš„è·¯å¾„ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼šdiskutil list<br>2ã€å°†Uç›˜unmountï¼ˆå°†Næ›¿æ¢ä¸ºæŒ‚è½½è·¯å¾„ï¼‰ï¼šdiskutil unmountDisk /dev/disk[N]<br>3ã€å†™å…¥Uç›˜ï¼šsudo dd if=isoè·¯å¾„ of=/dev/rdisk[N] bs=1m  rdisk ä¸­åŠ å…¥rå¯ä»¥è®©å†™å…¥é€Ÿåº¦åŠ å¿«</p>
<a id="more"></a>
<h3 id="å…·ä½“æ“ä½œæ­¥éª¤"><a href="#å…·ä½“æ“ä½œæ­¥éª¤" class="headerlink" title="å…·ä½“æ“ä½œæ­¥éª¤"></a>å…·ä½“æ“ä½œæ­¥éª¤</h3><ol>
<li>æŸ¥çœ‹uç›˜ç›˜ç¬¦</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ diskutil list</span><br><span class="line">/dev/disk0 (internal, physical):</span><br><span class="line"><span class="meta">#</span><span class="bash">: TYPE NAME SIZE IDENTIFIER</span></span><br><span class="line">0: GUID_partition_scheme *251.0 GB disk0</span><br><span class="line">1: EFI EFI 209.7 MB disk0s1</span><br><span class="line">2: Apple_CoreStorage Macintosh HD 250.1 GB disk0s2</span><br><span class="line">3: Apple_Boot Recovery HD 650.0 MB disk0s3</span><br><span class="line">/dev/disk1 (internal, virtual):</span><br><span class="line"><span class="meta">#</span><span class="bash">: TYPE NAME SIZE IDENTIFIER</span></span><br><span class="line">0: Apple_HFS Macintosh HD +249.8 GB disk1</span><br><span class="line">Logical Volume on disk0s2</span><br><span class="line">E2BD4617-5A22-46A9-A6F4-D54E3EE92BBC</span><br><span class="line">Unencrypted</span><br><span class="line">/dev/disk2 (external, physical):</span><br><span class="line"><span class="meta">#</span><span class="bash">: TYPE NAME SIZE IDENTIFIER</span></span><br><span class="line">0: FDisk_partition_scheme *62.0 GB disk2</span><br><span class="line">1: DOS_FAT_32 UNTITLED 1 62.0 GB disk2s1</span><br><span class="line">/dev/disk3 (disk image):</span><br><span class="line"><span class="meta">#</span><span class="bash">: TYPE NAME SIZE IDENTIFIER</span></span><br><span class="line">0: FDisk_partition_scheme +3.1 GB disk3</span><br><span class="line">1: 0x17 3.0 GB disk3s1</span><br><span class="line">2: DOS_FAT_12 NO NAME 110.1 MB disk3s2</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>å–æ¶ˆæŒ‚è½½Uç›˜</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ diskutil umountDisk &#x2F;dev&#x2F;disk2</span><br><span class="line">Unmount of all volumes on disk2 was successful</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>ç”¨ddå‘½ä»¤å†™å…¥Uç›˜</li>
</ol>
<p>è¯´æ˜ï¼š</p>
<p>ï¼ˆ1ï¼‰sudo dd if=æºè·¯å¾„ of=/dev/rå·æ ‡ bs=1m ï¼»â€˜râ€™ ä¼šè®©å‘½ä»¤æ‰§è¡ŒåŠ å¿«ä¸€ç‚¹ï¼½ ï¼»â€˜bsâ€™ä¸ºä¸€æ¬¡å¡«å……çš„å®¹é‡ï¼½</p>
<p><em>ï¼ˆ2ï¼‰è·å–æ˜ åƒåç§°å’Œå®Œæ•´è·¯å¾„å¯ä»¥ç›´æ¥å°†æ–‡ä»¶æ‹–å…¥ç»ˆç«¯ï¼Œå³åœ¨ç»ˆç«¯ä¸­æ˜¾ç¤º</em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ sudo dd if&#x3D;&#x2F;xxx.iso of&#x3D;&#x2F;dev&#x2F;rdisk2 bs&#x3D;1m</span><br><span class="line">2934+1 records in</span><br><span class="line">2934+1 records out</span><br><span class="line">3076767744 bytes transferred in 149.567568 secs (20571089 bytes&#x2F;sec)</span><br></pre></td></tr></table></figure>



<ol start="4">
<li>æŸ¥çœ‹ç£ç›˜è¿›åº¦ï¼Œå¯ä»¥ç”¨iostatå‘½ä»¤æŸ¥çœ‹ç£ç›˜å†™å…¥çŠ¶æ€</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ iostat -w 2</span><br><span class="line">disk0 disk2 disk3 cpu load average</span><br><span class="line">KB/t tps MB/s KB/t tps MB/s KB/t tps MB/s us sy id 1m 5m 15m</span><br><span class="line">102.71 25 2.49 598.70 0 0.15 24.76 1 0.02 5 4 90 2.04 1.71 1.69</span><br><span class="line">512.00 48 23.93 1024.00 24 23.93 0.00 0 0.00 1 3 96 2.11 1.74 1.69</span><br><span class="line">473.00 26 11.99 1024.00 12 11.98 0.00 0 0.00 3 3 93 2.11 1.74 1.69</span><br><span class="line">491.68 50 23.99 1024.00 24 23.99 0.00 0 0.00 24 8 68 2.11 1.74 1.69</span><br></pre></td></tr></table></figure>



<ol start="5">
<li>æ“ä½œå®Œæ¯•åå°†Uç›˜å¼¹å‡º</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ diskutil eject &#x2F;dev&#x2F;disk2</span><br><span class="line">Disk &#x2F;dev&#x2F;disk2 ejected</span><br></pre></td></tr></table></figure>

<h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><p>å°†isoè½¬æ¢æˆdmg è½¬iso (åˆ»å½•éå¿…é¡»)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">UDRW æ›¿æ¢ä¸º UDTO</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">lapommedeMacBook-Pro:~ lapomme$ sudo hdiutil convert -format UDRW -o &#x2F;linux.dmg kali.iso</span><br><span class="line">Password:</span><br><span class="line">æ­£åœ¨è¯»å–Master Boot Recordï¼ˆMBRï¼š0ï¼‰â€¦</span><br><span class="line">æ­£åœ¨è¯»å–Kali Live ï¼ˆApple_ISOï¼š1ï¼‰â€¦</span><br><span class="line">æ­£åœ¨è¯»å–ï¼ˆWindows_NTFS_Hiddenï¼š2ï¼‰â€¦</span><br><span class="line">............................................................................</span><br><span class="line">æ­£åœ¨è¯»å–ï¼ˆDOS_FAT_12ï¼š3ï¼‰â€¦</span><br><span class="line">..............................................................................</span><br><span class="line">å·²è€—æ—¶ï¼š10.178s</span><br><span class="line">é€Ÿåº¦ï¼š288.3M å­—èŠ‚&#x2F;ç§’</span><br><span class="line">èŠ‚çœï¼š0.0%</span><br><span class="line">created: &#x2F;linux.dmg</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.cnblogs.com/bindong/p/5818497.html" target="_blank" rel="noopener external nofollow noreferrer">https://www.cnblogs.com/bindong/p/5818497.html</a></p>
<p><a href="http://osxdaily.com/2015/06/05/copy-iso-to-usb-drive-mac-os-x-command/" target="_blank" rel="noopener external nofollow noreferrer">http://osxdaily.com/2015/06/05/copy-iso-to-usb-drive-mac-os-x-command/</a></p>
]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>MacOS</tag>
      </tags>
  </entry>
  <entry>
    <title>Vim/Viä¸­æŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œ</title>
    <url>/articles/2635382596.html</url>
    <content><![CDATA[<h3 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h3><p>åœ¨normalæ¨¡å¼ä¸‹æŒ‰ä¸‹<code>/</code>å³å¯è¿›å…¥æŸ¥æ‰¾æ¨¡å¼ï¼Œè¾“å…¥è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å¹¶æŒ‰ä¸‹å›è½¦ã€‚ Vimä¼šè·³è½¬åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ã€‚æŒ‰ä¸‹<code>n</code>æŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼ŒæŒ‰ä¸‹<code>N</code>æŸ¥æ‰¾ä¸Šä¸€ä¸ªã€‚</p>
<p>VimæŸ¥æ‰¾æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¾‹å¦‚<code>/vim$</code>åŒ¹é…è¡Œå°¾çš„<code>&quot;vim&quot;</code>ã€‚ éœ€è¦æŸ¥æ‰¾ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œä¾‹å¦‚<code>/vim\$</code>åŒ¹é…<code>&quot;vim$&quot;</code>ã€‚</p>
<a id="more"></a>
<h4 id="å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾"><a href="#å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾" class="headerlink" title="å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾"></a>å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾</h4><p>åœ¨æŸ¥æ‰¾æ¨¡å¼ä¸­åŠ å…¥<code>\c</code>è¡¨ç¤ºå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ï¼Œ<code>\C</code>è¡¨ç¤ºå¤§å°å†™æ•æ„ŸæŸ¥æ‰¾ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;foo\c</span><br></pre></td></tr></table></figure>

<p>å°†ä¼šæŸ¥æ‰¾æ‰€æœ‰çš„<code>&quot;foo&quot;</code>,<code>&quot;FOO&quot;</code>,<code>&quot;Foo&quot;</code>ç­‰å­—ç¬¦ä¸²ã€‚</p>
<h4 id="å¤§å°å†™æ•æ„Ÿé…ç½®"><a href="#å¤§å°å†™æ•æ„Ÿé…ç½®" class="headerlink" title="å¤§å°å†™æ•æ„Ÿé…ç½®"></a>å¤§å°å†™æ•æ„Ÿé…ç½®</h4><p>Vim é»˜è®¤é‡‡ç”¨å¤§å°å†™æ•æ„Ÿçš„æŸ¥æ‰¾ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¸¸å¸¸å°†å…¶é…ç½®ä¸ºå¤§å°å†™ä¸æ•æ„Ÿï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">" è®¾ç½®é»˜è®¤è¿›è¡Œå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾</span><br><span class="line">set ignorecase</span><br><span class="line">" å¦‚æœæœ‰ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œåˆ™åˆ‡æ¢åˆ°å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾</span><br><span class="line">set smartcase</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å°†ä¸Šè¿°è®¾ç½®ç²˜è´´åˆ°ä½ çš„<code>~/.vimrc</code>ï¼Œé‡æ–°æ‰“å¼€Vimå³å¯ç”Ÿæ•ˆ</p>
</blockquote>
<h4 id="æŸ¥æ‰¾å½“å‰å•è¯"><a href="#æŸ¥æ‰¾å½“å‰å•è¯" class="headerlink" title="æŸ¥æ‰¾å½“å‰å•è¯"></a>æŸ¥æ‰¾å½“å‰å•è¯</h4><p>åœ¨normalæ¨¡å¼ä¸‹æŒ‰ä¸‹<code>*</code>å³å¯æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨å•è¯ï¼ˆwordï¼‰ï¼Œ è¦æ±‚æ¯æ¬¡å‡ºç°çš„å‰åä¸ºç©ºç™½å­—ç¬¦æˆ–æ ‡ç‚¹ç¬¦å·ã€‚ä¾‹å¦‚å½“å‰ä¸º<code>foo</code>ï¼Œ å¯ä»¥åŒ¹é…<code>foo bar</code>ä¸­çš„<code>foo</code>ï¼Œä½†ä¸å¯åŒ¹é…<code>foobar</code>ä¸­çš„<code>foo</code>ã€‚ è¿™åœ¨æŸ¥æ‰¾å‡½æ•°åã€å˜é‡åæ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<p>æŒ‰ä¸‹<code>g*</code>å³å¯æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨å•è¯çš„å­—ç¬¦åºåˆ—ï¼Œæ¯æ¬¡å‡ºç°å‰åå­—ç¬¦æ— è¦æ±‚ã€‚ å³<code>foo bar</code>å’Œ<code>foobar</code>ä¸­çš„<code>foo</code>å‡å¯è¢«åŒ¹é…åˆ°ã€‚</p>
<h3 id="æŸ¥æ‰¾ä¸æ›¿æ¢"><a href="#æŸ¥æ‰¾ä¸æ›¿æ¢" class="headerlink" title="æŸ¥æ‰¾ä¸æ›¿æ¢"></a>æŸ¥æ‰¾ä¸æ›¿æ¢</h3><p><code>:s</code>ï¼ˆsubstituteï¼‰å‘½ä»¤ç”¨æ¥æŸ¥æ‰¾å’Œæ›¿æ¢å­—ç¬¦ä¸²ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:&#123;ä½œç”¨èŒƒå›´&#125;s/&#123;ç›®æ ‡&#125;/&#123;æ›¿æ¢&#125;/&#123;æ›¿æ¢æ ‡å¿—&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚<code>:%s/foo/bar/g</code>ä¼šåœ¨å…¨å±€èŒƒå›´(<code>%</code>)æŸ¥æ‰¾<code>foo</code>å¹¶æ›¿æ¢ä¸º<code>bar</code>ï¼Œæ‰€æœ‰å‡ºç°éƒ½ä¼šè¢«æ›¿æ¢ï¼ˆ<code>g</code>ï¼‰</p>
<h4 id="ä½œç”¨èŒƒå›´"><a href="#ä½œç”¨èŒƒå›´" class="headerlink" title="ä½œç”¨èŒƒå›´"></a>ä½œç”¨èŒƒå›´</h4><p>ä½œç”¨èŒƒå›´åˆ†ä¸ºå½“å‰è¡Œã€å…¨æ–‡ã€é€‰åŒºç­‰ç­‰ã€‚</p>
<p>å½“å‰è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:s/foo/bar/g</span><br></pre></td></tr></table></figure>

<p>å…¨æ–‡ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:%s/foo/bar/g</span><br></pre></td></tr></table></figure>

<p>é€‰åŒºï¼Œåœ¨Visualæ¨¡å¼ä¸‹é€‰æ‹©åŒºåŸŸåè¾“å…¥<code>:</code>ï¼ŒVimå³å¯è‡ªåŠ¨è¡¥å…¨ä¸º `:â€™&lt;,â€™&gt;</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:'&lt;,'&gt;s/foo/bar/g</span><br></pre></td></tr></table></figure>

<p>2-11è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">:5,12s&#x2F;foo&#x2F;bar&#x2F;g</span><br></pre></td></tr></table></figure>

<p>å½“å‰è¡Œ<code>.</code>ä¸æ¥ä¸‹æ¥ä¸¤è¡Œ<code>+2</code>ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:.,+2s/foo/bar/g</span><br></pre></td></tr></table></figure>

<h3 id="æ›¿æ¢æ ‡å¿—"><a href="#æ›¿æ¢æ ‡å¿—" class="headerlink" title="æ›¿æ¢æ ‡å¿—"></a>æ›¿æ¢æ ‡å¿—</h3><p>ä¸Šæ–‡ä¸­å‘½ä»¤ç»“å°¾çš„<code>g</code>å³æ˜¯æ›¿æ¢æ ‡å¿—ä¹‹ä¸€ï¼Œè¡¨ç¤ºå…¨å±€<code>global</code>æ›¿æ¢ï¼ˆå³æ›¿æ¢ç›®æ ‡çš„æ‰€æœ‰å‡ºç°ï¼‰ã€‚ è¿˜æœ‰å¾ˆå¤šå…¶ä»–æœ‰ç”¨çš„æ›¿æ¢æ ‡å¿—ï¼š</p>
<p>ç©ºæ›¿æ¢æ ‡å¿—è¡¨ç¤ºåªæ›¿æ¢ä»å…‰æ ‡ä½ç½®å¼€å§‹ï¼Œç›®æ ‡çš„ç¬¬ä¸€æ¬¡å‡ºç°ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:%s/foo/bar</span><br></pre></td></tr></table></figure>

<p><code>i</code>è¡¨ç¤ºå¤§å°å†™ä¸æ•æ„ŸæŸ¥æ‰¾ï¼Œ<code>I</code>è¡¨ç¤ºå¤§å°å†™æ•æ„Ÿï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:%s/foo/bar/i</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç­‰æ•ˆäºæ¨¡å¼ä¸­çš„\cï¼ˆä¸æ•æ„Ÿï¼‰æˆ–\Cï¼ˆæ•æ„Ÿï¼‰</span></span><br><span class="line">:%s/foo\c/bar</span><br></pre></td></tr></table></figure>

<p><code>c</code>è¡¨ç¤ºéœ€è¦ç¡®è®¤ï¼Œä¾‹å¦‚å…¨å±€æŸ¥æ‰¾<code>&quot;foo&quot;</code>æ›¿æ¢ä¸º<code>&quot;bar&quot;</code>å¹¶ä¸”éœ€è¦ç¡®è®¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">:%s/foo/bar/gc</span><br></pre></td></tr></table></figure>

<p>å›è½¦åVimä¼šå°†å…‰æ ‡ç§»åŠ¨åˆ°æ¯ä¸€æ¬¡<code>&quot;foo&quot;</code>å‡ºç°çš„ä½ç½®ï¼Œå¹¶æç¤º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">replace with bar (y/n/a/q/l/^E/^Y)?</span><br></pre></td></tr></table></figure>

<p>æŒ‰ä¸‹<code>y</code>è¡¨ç¤ºæ›¿æ¢ï¼Œ<code>n</code>è¡¨ç¤ºä¸æ›¿æ¢ï¼Œ<code>a</code>è¡¨ç¤ºæ›¿æ¢æ‰€æœ‰ï¼Œ<code>q</code>è¡¨ç¤ºé€€å‡ºæŸ¥æ‰¾æ¨¡å¼ï¼Œ <code>l</code>è¡¨ç¤ºæ›¿æ¢å½“å‰ä½ç½®å¹¶é€€å‡ºã€‚<code>^E</code>ä¸<code>^Y</code>æ˜¯å…‰æ ‡ç§»åŠ¨å¿«æ·é”®ï¼Œå‚è€ƒï¼š <a href="http://harttle.com/2015/11/07/vim-cursor.html" target="_blank" rel="noopener external nofollow noreferrer">Vimä¸­å¦‚ä½•å¿«é€Ÿè¿›è¡Œå…‰æ ‡ç§»</a></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="http://www.cnblogs.com/huxinga/p/7942194.html" target="_blank" rel="noopener external nofollow noreferrer">å…³äºåœ¨vimä¸­çš„æŸ¥æ‰¾å’Œæ›¿æ¢</a></li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Macä¸­ä½¿ç”¨sedä¿®æ”¹æ–‡ä»¶å‡ºé”™è§£å†³æ–¹æ³•</title>
    <url>/articles/2290993714.html</url>
    <content><![CDATA[<h2 id="Macä¸­ä½¿ç”¨sedä¿®æ”¹æ–‡ä»¶å‡ºé”™è§£å†³æ–¹æ³•"><a href="#Macä¸­ä½¿ç”¨sedä¿®æ”¹æ–‡ä»¶å‡ºé”™è§£å†³æ–¹æ³•" class="headerlink" title="Macä¸­ä½¿ç”¨sedä¿®æ”¹æ–‡ä»¶å‡ºé”™è§£å†³æ–¹æ³•"></a>Macä¸­ä½¿ç”¨sedä¿®æ”¹æ–‡ä»¶å‡ºé”™è§£å†³æ–¹æ³•</h2><p>sedæ˜¯linuxå‘½ä»¤ï¼Œç”¨äºå¤„ç†æ–‡ä»¶å†…å®¹ï¼ˆä¿®æ”¹ï¼Œæ›¿æ¢ç­‰ï¼‰ï¼Œmacä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä½†å‘ç°ç›¸åŒçš„æ›¿æ¢å‘½ä»¤åœ¨linuxå¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œåœ¨macåˆ™æ‰§è¡Œå¤±è´¥</p>
<a id="more"></a>

<h3 id="å‡ºé”™åŸå› "><a href="#å‡ºé”™åŸå› " class="headerlink" title="å‡ºé”™åŸå› "></a>å‡ºé”™åŸå› </h3><p>åœ¨linuxæ‰§è¡Œæ­£å¸¸ï¼Œä½†åœ¨macç¯å¢ƒä¸‹æ‰§è¡Œå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å‘½ä»¤</span><br><span class="line">sed -i &quot;s&#x2F;shell&#x2F;test&#x2F;g&quot; $(grep &#39;shell&#39; -rl .&#x2F;)</span><br><span class="line">#é”™è¯¯ä¿¡æ¯</span><br><span class="line">sed: 1: &quot;.&#x2F;&#x2F;make-RobotFramework- ...&quot;: invalid command code .</span><br></pre></td></tr></table></figure>

<p>man sed æŸ¥çœ‹åŸå› ï¼Œæ‰¾åˆ° -i å‚æ•°çš„è¯´æ˜</p>
<blockquote>
<p>-i extension<br>Edit files in-place, saving backups with the specified extension. If a zero-length extension is given, no backup will be saved. It is not recommended to<br>give a zero-length extension when in-place editing files, as you risk corruption or partial content in situations where disk space is exhausted, etc.</p>
</blockquote>
<p>åŸæ¥sed -iéœ€è¦å¸¦ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå¤‡ä»½æºæ–‡ä»¶çš„æ–‡ä»¶åç§°ï¼Œå¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²é•¿åº¦ä¸º0ï¼Œåˆ™ä¸å¤‡ä»½ã€‚<br>ä¾‹å¦‚æ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># åŠ _bakå¤‡ä»½,åˆ™ä¼šåˆ›å»ºä¸€ä¸ªxxx_bakçš„å¤‡ä»½æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸ºä¿®æ”¹å‰çš„xxxå†…å®¹</span><br><span class="line">sed -i &quot;_bak&quot; &quot;s&#x2F;shell&#x2F;test&#x2F;g&quot; $(grep &#39;shell&#39; -rl .&#x2F;)</span><br><span class="line"></span><br><span class="line"># ç©ºå­—ç¬¦ä¸å¤‡ä»½</span><br><span class="line">sed -i &quot;&quot; &quot;s&#x2F;shell&#x2F;test&#x2F;g&quot; $(grep &#39;shell&#39; -rl .&#x2F;)</span><br></pre></td></tr></table></figure>



<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/fdipzone/article/details/51253955" target="_blank" rel="noopener external nofollow noreferrer">macç¯å¢ƒä½¿ç”¨sedä¿®æ”¹æ–‡ä»¶å‡ºé”™çš„è§£å†³æ–¹æ³•</a></p>
<p><a href="https://blog.csdn.net/beijihukk/article/details/68947083" target="_blank" rel="noopener external nofollow noreferrer">sed: 1: â€œâ€¦â€: invalid command code on Mac OS</a></p>
]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>MacOS</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac OS æ“ä½œ</title>
    <url>/articles/2596788713.html</url>
    <content><![CDATA[<h3 id="MAC-OSä¸Šé…ç½®Lanternä»£ç†"><a href="#MAC-OSä¸Šé…ç½®Lanternä»£ç†" class="headerlink" title="MAC OSä¸Šé…ç½®Lanternä»£ç†"></a>MAC OSä¸Šé…ç½®Lanternä»£ç†</h3><ol>
<li><p>é¦–å…ˆç¡®ä¿è®¾å¤‡åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…</p>
</li>
<li><p>å…ˆå…³é—­ä½ çš„ Lanternï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨ Lanternï¼Œåœ¨ç”µè„‘ç»ˆç«¯è¾“å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;Applications&#x2F;Lantern.app&#x2F;Contents&#x2F;MacOS&#x2F;lantern -addr 0.0.0.0:8787</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾åˆ°Macçš„IPåœ°å€ï¼Œåœ¨éœ€è¦ä»£ç†çš„æœºå™¨ä¸Šé…ç½®<mac-ip>:8787</p>
<a id="more"></a>

</li>
</ol>
<h3 id="MAC-OSä¸Šè·å–Finderä¸­æ–‡ä»¶è·¯å¾„"><a href="#MAC-OSä¸Šè·å–Finderä¸­æ–‡ä»¶è·¯å¾„" class="headerlink" title="MAC OSä¸Šè·å–Finderä¸­æ–‡ä»¶è·¯å¾„"></a>MAC OSä¸Šè·å–Finderä¸­æ–‡ä»¶è·¯å¾„</h3><ul>
<li><p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼ŒFinderå°±èƒ½åœ¨é¡¶éƒ¨çœ‹è§å®Œæ•´çš„åœ°å€äº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.finder _FXShowPosixPathInTitle -bool YES</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li>åœ¨Finderé‡Œï¼Œå¯¹é€‰ä¸­çš„æ–‡ä»¶ï¼Œcommand+option+cï¼Œå¤åˆ¶åˆ°å‰ªè´´æ¿</li>
</ul>
]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>MacOS</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux-è¿›ç¨‹åœ¨åå°å¯é è¿è¡Œçš„å‡ ç§æ–¹æ³•</title>
    <url>/articles/600435499.html</url>
    <content><![CDATA[<p>æˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œç”¨ telnet/ssh ç™»å½•äº†è¿œç¨‹çš„ Linux æœåŠ¡å™¨ï¼Œè¿è¡Œäº†ä¸€äº›è€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡ï¼Œ ç»“æœå´ç”±äºç½‘ç»œçš„ä¸ç¨³å®šå¯¼è‡´ä»»åŠ¡ä¸­é€”å¤±è´¥ã€‚å¦‚ä½•è®©å‘½ä»¤æäº¤åä¸å—æœ¬åœ°å…³é—­ç»ˆç«¯çª—å£/ç½‘ç»œæ–­å¼€è¿æ¥çš„å¹²æ‰°å‘¢ï¼Ÿä¸‹é¢ä¸¾äº†ä¸€äº›ä¾‹å­ï¼Œ æ‚¨å¯ä»¥é’ˆå¯¹ä¸åŒçš„åœºæ™¯é€‰æ‹©ä¸åŒçš„æ–¹å¼æ¥å¤„ç†è¿™ä¸ªé—®é¢˜</p>
<a id="more"></a>
<h3 id="nohup-setsid-amp"><a href="#nohup-setsid-amp" class="headerlink" title="nohup/setsid/&amp;"></a>nohup/setsid/&amp;</h3><hr>
<ul>
<li><h4 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h4><p>å¦‚æœåªæ˜¯ä¸´æ—¶æœ‰ä¸€ä¸ªå‘½ä»¤éœ€è¦é•¿æ—¶é—´è¿è¡Œï¼Œä»€ä¹ˆæ–¹æ³•èƒ½æœ€ç®€ä¾¿çš„ä¿è¯å®ƒåœ¨åå°ç¨³å®šè¿è¡Œå‘¢ï¼Ÿ</p>
</li>
</ul>
<ul>
<li><h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>æˆ‘ä»¬çŸ¥é“ï¼Œå½“ç”¨æˆ·æ³¨é”€ï¼ˆlogoutï¼‰æˆ–è€…ç½‘ç»œæ–­å¼€æ—¶ï¼Œç»ˆç«¯ä¼šæ”¶åˆ° HUPï¼ˆhangupï¼‰ä¿¡å·ä»è€Œå…³é—­å…¶æ‰€æœ‰å­è¿›ç¨‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„è§£å†³åŠæ³•å°±æœ‰ä¸¤ç§é€”å¾„ï¼šè¦ä¹ˆè®©è¿›ç¨‹å¿½ç•¥ HUP ä¿¡å·ï¼Œè¦ä¹ˆè®©è¿›ç¨‹è¿è¡Œåœ¨æ–°çš„ä¼šè¯é‡Œä»è€Œæˆä¸ºä¸å±äºæ­¤ç»ˆç«¯çš„å­è¿›ç¨‹</p>
<ul>
<li><p><strong>nohup</strong></p>
<p>nohup æ— ç–‘æ˜¯æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„åŠæ³•ã€‚é¡¾åæ€ä¹‰ï¼Œnohup çš„ç”¨é€”å°±æ˜¯è®©æäº¤çš„å‘½ä»¤å¿½ç•¥ hangup ä¿¡å·ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ nohup çš„å¸®åŠ©ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">NOHUP(1)                        User Commands                        NOHUP(1)</span><br><span class="line"> </span><br><span class="line">NAME</span><br><span class="line">       nohup - run a command immune to hangups, with output to a non-tty</span><br><span class="line"> </span><br><span class="line">SYNOPSIS</span><br><span class="line">       nohup COMMAND [ARG]...</span><br><span class="line">       nohup OPTION</span><br><span class="line"> </span><br><span class="line">DESCRIPTION</span><br><span class="line">       Run COMMAND, ignoring hangup signals.</span><br><span class="line"> </span><br><span class="line">       --help display this help and exit</span><br><span class="line"> </span><br><span class="line">       --version</span><br><span class="line">              output version information and exit</span><br></pre></td></tr></table></figure>

<p>â€‹</p>
<p>å¯è§ï¼Œnohup çš„ä½¿ç”¨æ˜¯ååˆ†æ–¹ä¾¿çš„ï¼Œåªéœ€åœ¨è¦å¤„ç†çš„å‘½ä»¤å‰åŠ ä¸Š nohup å³å¯ï¼Œæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ç¼ºçœä¼šè¢«é‡å®šå‘åˆ° nohup.out æ–‡ä»¶ä¸­ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯åœ¨ç»“å°¾åŠ ä¸Š<strong>â€œ&amp;â€</strong>æ¥å°†å‘½ä»¤åŒæ—¶æ”¾å…¥åå°è¿è¡Œï¼Œä¹Ÿå¯ç”¨<code>&quot;&gt;*filename* 2&gt;&amp;1&quot;</code>æ¥æ›´æ”¹ç¼ºçœçš„é‡å®šå‘æ–‡ä»¶å</p>
<h5 id="nohup-ç¤ºä¾‹"><a href="#nohup-ç¤ºä¾‹" class="headerlink" title="nohup ç¤ºä¾‹"></a>nohup ç¤ºä¾‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@pvcent107 ~]# nohup ping www.ibm.com &amp;</span><br><span class="line">[1] 3059</span><br><span class="line">nohup: appending output to &#96;nohup.out&#39;</span><br><span class="line">[root@pvcent107 ~]# ps -ef |grep 3059</span><br><span class="line">root      3059   984  0 21:06 pts&#x2F;3    00:00:00 ping www.ibm.com</span><br><span class="line">root      3067   984  0 21:06 pts&#x2F;3    00:00:00 grep 3059</span><br><span class="line">[root@pvcent107 ~]# jobs -l</span><br></pre></td></tr></table></figure>

<p>â€‹</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p><strong>setsid</strong></p>
<p>nohup æ— ç–‘èƒ½é€šè¿‡å¿½ç•¥ HUP ä¿¡å·æ¥ä½¿æˆ‘ä»¬çš„è¿›ç¨‹é¿å…ä¸­é€”è¢«ä¸­æ–­ï¼Œä½†å¦‚æœæˆ‘ä»¬æ¢ä¸ªè§’åº¦æ€è€ƒï¼Œå¦‚æœæˆ‘ä»¬çš„è¿›ç¨‹ä¸å±äºæ¥å— HUP ä¿¡å·çš„ç»ˆç«¯çš„å­è¿›ç¨‹ï¼Œé‚£ä¹ˆè‡ªç„¶ä¹Ÿå°±ä¸ä¼šå—åˆ° HUP ä¿¡å·çš„å½±å“äº†ã€‚setsid å°±èƒ½å¸®åŠ©æˆ‘ä»¬åšåˆ°è¿™ä¸€ç‚¹ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ setsid çš„å¸®åŠ©ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SETSID(8)                 Linux Programmerâ€™s Manual                 SETSID(8)</span><br><span class="line"> </span><br><span class="line">NAME</span><br><span class="line">       setsid - run a program in a new session</span><br><span class="line"> </span><br><span class="line">SYNOPSIS</span><br><span class="line">       setsid program [ arg ... ]</span><br><span class="line"> </span><br><span class="line">DESCRIPTION</span><br><span class="line">       setsid runs a program in a new session.</span><br></pre></td></tr></table></figure>

<p>å¯è§ setsid çš„ä½¿ç”¨ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œä¹Ÿåªéœ€åœ¨è¦å¤„ç†çš„å‘½ä»¤å‰åŠ ä¸Š setsid å³å¯ã€‚</p>
<h5 id="setsid-ç¤ºä¾‹"><a href="#setsid-ç¤ºä¾‹" class="headerlink" title="setsid ç¤ºä¾‹"></a>setsid ç¤ºä¾‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@pvcent107 ~]# setsid ping www.ibm.com</span><br><span class="line">[root@pvcent107 ~]# ps -ef |grep www.ibm.com</span><br><span class="line">root     31094     1  0 07:28 ?        00:00:00 ping www.ibm.com</span><br><span class="line">root     31102 29217  0 07:29 pts&#x2F;4    00:00:00 grep www.ibm.com</span><br><span class="line">[root@pvcent107 ~]#</span><br></pre></td></tr></table></figure>

<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šä¾‹ä¸­æˆ‘ä»¬çš„è¿›ç¨‹ ID(PID)ä¸º31094ï¼Œè€Œå®ƒçš„çˆ¶ IDï¼ˆPPIDï¼‰ä¸º1ï¼ˆå³ä¸º init è¿›ç¨‹ IDï¼‰ï¼Œå¹¶ä¸æ˜¯å½“å‰ç»ˆç«¯çš„è¿›ç¨‹ IDã€‚è¯·å°†æ­¤ä¾‹ä¸<a href="https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/index.html#nohup" target="_blank" rel="noopener external nofollow noreferrer">nohup ä¾‹</a>ä¸­çš„çˆ¶ ID åšæ¯”è¾ƒ</p>
</li>
<li><p><strong>&amp;</strong></p>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå…³äº subshell çš„å°æŠ€å·§ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå°†ä¸€ä¸ªæˆ–å¤šä¸ªå‘½ååŒ…å«åœ¨â€œ()â€ä¸­å°±èƒ½è®©è¿™äº›å‘½ä»¤åœ¨å­ shell ä¸­è¿è¡Œä¸­ï¼Œä»è€Œæ‰©å±•å‡ºå¾ˆå¤šæœ‰è¶£çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ç°åœ¨è¦è®¨è®ºçš„å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚</p>
<p>å½“æˆ‘ä»¬å°†â€&amp;â€ä¹Ÿæ”¾å…¥â€œ()â€å†…ä¹‹åï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°æ‰€æäº¤çš„ä½œä¸šå¹¶ä¸åœ¨ä½œä¸šåˆ—è¡¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯æ— æ³•é€šè¿‡<code>jobs</code>æ¥æŸ¥çœ‹çš„ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆè¿™æ ·å°±èƒ½èº²è¿‡ HUP ä¿¡å·çš„å½±å“å§ã€‚</p>
<h5 id="subshell-ç¤ºä¾‹"><a href="#subshell-ç¤ºä¾‹" class="headerlink" title="subshell ç¤ºä¾‹"></a>subshell ç¤ºä¾‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@pvcent107 ~]# (ping www.ibm.com &amp;)</span><br><span class="line">[root@pvcent107 ~]# ps -ef |grep www.ibm.com</span><br><span class="line">root     16270     1  0 14:13 pts&#x2F;4    00:00:00 ping www.ibm.com</span><br><span class="line">root     16278 15362  0 14:13 pts&#x2F;4    00:00:00 grep www.ibm.com</span><br><span class="line">[root@pvcent107 ~]#</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šä¾‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ–°æäº¤çš„è¿›ç¨‹çš„çˆ¶ IDï¼ˆPPIDï¼‰ä¸º1ï¼ˆinit è¿›ç¨‹çš„ PIDï¼‰ï¼Œå¹¶ä¸æ˜¯å½“å‰ç»ˆç«¯çš„è¿›ç¨‹ IDã€‚å› æ­¤å¹¶ä¸å±äºå½“å‰ç»ˆç«¯çš„å­è¿›ç¨‹ï¼Œä»è€Œä¹Ÿå°±ä¸ä¼šå—åˆ°å½“å‰ç»ˆç«¯çš„ HUP ä¿¡å·çš„å½±å“äº†ã€‚</p>
</li>
</ul>
<h3 id="disown"><a href="#disown" class="headerlink" title="disown"></a>disown</h3><hr>
<ul>
<li><h4 id="åœºæ™¯-1"><a href="#åœºæ™¯-1" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h4><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œå¦‚æœäº‹å…ˆåœ¨å‘½ä»¤å‰åŠ ä¸Š nohup æˆ–è€… setsid å°±å¯ä»¥é¿å… HUP ä¿¡å·çš„å½±å“ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æœªåŠ ä»»ä½•å¤„ç†å°±å·²ç»æäº¤äº†å‘½ä»¤ï¼Œè¯¥å¦‚ä½•è¡¥æ•‘æ‰èƒ½è®©å®ƒé¿å… HUP ä¿¡å·çš„å½±å“å‘¢ï¼Ÿ</p>
</li>
<li><h4 id="è§£å†³æ–¹æ³•-1"><a href="#è§£å†³æ–¹æ³•-1" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>è¿™æ—¶æƒ³åŠ  nohup æˆ–è€… setsid å·²ç»ä¸ºæ—¶å·²æ™šï¼Œåªèƒ½é€šè¿‡ä½œä¸šè°ƒåº¦å’Œ disown æ¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ disown çš„å¸®åŠ©ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">disown [-ar] [-h] [jobspec ...]</span><br><span class="line">    Without options, each jobspec is  removed  from  the  table  of</span><br><span class="line">    active  jobs.   If  the -h option is given, each jobspec is not</span><br><span class="line">    removed from the table, but is marked so  that  SIGHUP  is  not</span><br><span class="line">    sent  to the job if the shell receives a SIGHUP.  If no jobspec</span><br><span class="line">    is present, and neither the -a nor the -r option  is  supplied,</span><br><span class="line">    the  current  job  is  used.  If no jobspec is supplied, the -a</span><br><span class="line">    option means to remove or mark all jobs; the -r option  without</span><br><span class="line">    a  jobspec  argument  restricts operation to running jobs.  The</span><br><span class="line">    return value is 0 unless a jobspec does  not  specify  a  valid</span><br><span class="line">    job.</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼æ¥è¾¾æˆæˆ‘ä»¬çš„ç›®çš„ã€‚</p>
<ul>
<li><p>çµæ´»è¿ç”¨ CTRL+Z</p>
<p><code>åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ CTRL+Z æ¥å°†å½“å‰è¿›ç¨‹æŒ‚èµ·åˆ°åå°æš‚åœè¿è¡Œï¼Œæ‰§è¡Œä¸€äº›åˆ«çš„æ“ä½œï¼Œç„¶åå†ç”¨ fg æ¥å°†æŒ‚èµ·çš„è¿›ç¨‹é‡æ–°æ”¾å›å‰å°ï¼ˆä¹Ÿå¯ç”¨ bg æ¥å°†æŒ‚èµ·çš„è¿›ç¨‹æ”¾åœ¨åå°ï¼‰ç»§ç»­è¿è¡Œã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸€ä¸ªç»ˆç«¯å†…çµæ´»åˆ‡æ¢è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼Œè¿™ä¸€ç‚¹åœ¨è°ƒè¯•ä»£ç æ—¶å°¤ä¸ºæœ‰ç”¨ã€‚å› ä¸ºå°†ä»£ç ç¼–è¾‘å™¨æŒ‚èµ·åˆ°åå°å†é‡æ–°æ”¾å›æ—¶ï¼Œå…‰æ ‡å®šä½ä»ç„¶åœç•™åœ¨ä¸Šæ¬¡æŒ‚èµ·æ—¶çš„ä½ç½®ï¼Œé¿å…äº†é‡æ–°å®šä½çš„éº»çƒ¦ã€‚</code></p>
</li>
<li><p>ç”¨<code>disown -h *jobspec*</code>æ¥ä½¿<strong>æŸä¸ªä½œä¸š</strong>å¿½ç•¥HUPä¿¡å·ã€‚</p>
</li>
<li><p>ç”¨<code>disown -ah</code>æ¥ä½¿<strong>æ‰€æœ‰çš„ä½œä¸š</strong>éƒ½å¿½ç•¥HUPä¿¡å·ã€‚</p>
</li>
<li><p>ç”¨<code>disown -rh</code>æ¥ä½¿<strong>æ­£åœ¨è¿è¡Œçš„ä½œä¸š</strong>å¿½ç•¥HUPä¿¡å·ã€‚</p>
</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½¿ç”¨è¿‡ disown ä¹‹åï¼Œä¼šå°†æŠŠç›®æ ‡ä½œä¸šä»ä½œä¸šåˆ—è¡¨ä¸­ç§»é™¤ï¼Œæˆ‘ä»¬å°†ä¸èƒ½å†ä½¿ç”¨<code>jobs</code>æ¥æŸ¥çœ‹å®ƒï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿç”¨<code>ps -ef</code>æŸ¥æ‰¾åˆ°å®ƒã€‚</p>
<p>ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ç§æ–¹æ³•çš„æ“ä½œå¯¹è±¡æ˜¯ä½œä¸šï¼Œå¦‚æœæˆ‘ä»¬åœ¨è¿è¡Œå‘½ä»¤æ—¶åœ¨ç»“å°¾åŠ äº†<strong>â€œ&amp;â€</strong>æ¥ä½¿å®ƒæˆä¸ºä¸€ä¸ªä½œä¸šå¹¶åœ¨åå°è¿è¡Œï¼Œé‚£ä¹ˆå°±ä¸‡äº‹å¤§å‰äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>jobs</code>å‘½ä»¤æ¥å¾—åˆ°æ‰€æœ‰ä½œä¸šçš„åˆ—è¡¨ã€‚ä½†æ˜¯å¦‚æœå¹¶æ²¡æœ‰æŠŠå½“å‰å‘½ä»¤ä½œä¸ºä½œä¸šæ¥è¿è¡Œï¼Œå¦‚ä½•æ‰èƒ½å¾—åˆ°å®ƒçš„ä½œä¸šå·å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ç”¨ CTRL+Zï¼ˆæŒ‰ä½Ctrlé”®çš„åŒæ—¶æŒ‰ä½zé”®ï¼‰äº†ï¼</p>
<p>CTRL+Z çš„ç”¨é€”å°±æ˜¯å°†å½“å‰è¿›ç¨‹æŒ‚èµ·ï¼ˆSuspendï¼‰ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ç”¨<code>jobs</code>å‘½ä»¤æ¥æŸ¥è¯¢å®ƒçš„ä½œä¸šå·ï¼Œå†ç”¨<code>bg *jobspec*</code>æ¥å°†å®ƒæ”¾å…¥åå°å¹¶ç»§ç»­è¿è¡Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæŒ‚èµ·ä¼šå½±å“å½“å‰è¿›ç¨‹çš„è¿è¡Œç»“æœï¼Œè¯·æ…ç”¨æ­¤æ–¹æ³•ã€‚</p>
<h5 id="disown-ç¤ºä¾‹1ï¼ˆå¦‚æœæäº¤å‘½ä»¤æ—¶å·²ç»ç”¨â€œ-amp-â€å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨â€œdisownâ€ï¼‰"><a href="#disown-ç¤ºä¾‹1ï¼ˆå¦‚æœæäº¤å‘½ä»¤æ—¶å·²ç»ç”¨â€œ-amp-â€å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨â€œdisownâ€ï¼‰" class="headerlink" title="disown ç¤ºä¾‹1ï¼ˆå¦‚æœæäº¤å‘½ä»¤æ—¶å·²ç»ç”¨â€œ&amp;â€å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨â€œdisownâ€ï¼‰"></a>disown ç¤ºä¾‹1ï¼ˆå¦‚æœæäº¤å‘½ä»¤æ—¶å·²ç»ç”¨â€œ&amp;â€å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨â€œdisownâ€ï¼‰</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@pvcent107 build]# cp -r testLargeFile largeFile &amp;</span><br><span class="line">[1] 4825</span><br><span class="line">[root@pvcent107 build]# jobs</span><br><span class="line">[1]+  Running                 cp -i -r testLargeFile largeFile &amp;</span><br><span class="line">[root@pvcent107 build]# disown -h %1</span><br><span class="line">[root@pvcent107 build]# ps -ef |grep largeFile</span><br><span class="line">root      4825   968  1 09:46 pts&#x2F;4    00:00:00 cp -i -r testLargeFile largeFile</span><br><span class="line">root      4853   968  0 09:46 pts&#x2F;4    00:00:00 grep largeFile</span><br><span class="line">[root@pvcent107 build]# logout</span><br></pre></td></tr></table></figure>

<h5 id="disown-ç¤ºä¾‹2ï¼ˆå¦‚æœæäº¤å‘½ä»¤æ—¶æœªä½¿ç”¨â€œ-amp-â€å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œå¯ä½¿ç”¨-CTRL-Z-å’Œâ€œbgâ€å°†å…¶æ”¾å…¥åå°ï¼Œå†ä½¿ç”¨â€œdisownâ€ï¼‰"><a href="#disown-ç¤ºä¾‹2ï¼ˆå¦‚æœæäº¤å‘½ä»¤æ—¶æœªä½¿ç”¨â€œ-amp-â€å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œå¯ä½¿ç”¨-CTRL-Z-å’Œâ€œbgâ€å°†å…¶æ”¾å…¥åå°ï¼Œå†ä½¿ç”¨â€œdisownâ€ï¼‰" class="headerlink" title="disown ç¤ºä¾‹2ï¼ˆå¦‚æœæäº¤å‘½ä»¤æ—¶æœªä½¿ç”¨â€œ&amp;â€å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œå¯ä½¿ç”¨ CTRL+Z å’Œâ€œbgâ€å°†å…¶æ”¾å…¥åå°ï¼Œå†ä½¿ç”¨â€œdisownâ€ï¼‰"></a>disown ç¤ºä¾‹2ï¼ˆå¦‚æœæäº¤å‘½ä»¤æ—¶æœªä½¿ç”¨â€œ&amp;â€å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œå¯ä½¿ç”¨ CTRL+Z å’Œâ€œbgâ€å°†å…¶æ”¾å…¥åå°ï¼Œå†ä½¿ç”¨â€œdisownâ€ï¼‰</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@pvcent107 build]# cp -r testLargeFile largeFile2</span><br><span class="line"> </span><br><span class="line">[1]+  Stopped                 cp -i -r testLargeFile largeFile2</span><br><span class="line">[root@pvcent107 build]# bg %1</span><br><span class="line">[1]+ cp -i -r testLargeFile largeFile2 &amp;</span><br><span class="line">[root@pvcent107 build]# jobs</span><br><span class="line">[1]+  Running                 cp -i -r testLargeFile largeFile2 &amp;</span><br><span class="line">[root@pvcent107 build]# disown -h %1</span><br><span class="line">[root@pvcent107 build]# ps -ef |grep largeFile2</span><br><span class="line">root      5790  5577  1 10:04 pts&#x2F;3    00:00:00 cp -i -r testLargeFile largeFile2</span><br><span class="line">root      5824  5577  0 10:05 pts&#x2F;3    00:00:00 grep largeFile2</span><br><span class="line">[root@pvcent107 build]</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="screen"><a href="#screen" class="headerlink" title="screen"></a>screen</h3><hr>
<ul>
<li><h4 id="åœºæ™¯ï¼š"><a href="#åœºæ™¯ï¼š" class="headerlink" title="åœºæ™¯ï¼š"></a>åœºæ™¯ï¼š</h4><p>æˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•è®©è¿›ç¨‹å…å— HUP ä¿¡å·çš„å½±å“ï¼Œä½†æ˜¯å¦‚æœæœ‰å¤§é‡è¿™ç§å‘½ä»¤éœ€è¦åœ¨ç¨³å®šçš„åå°é‡Œè¿è¡Œï¼Œå¦‚ä½•é¿å…å¯¹æ¯æ¡å‘½ä»¤éƒ½åšè¿™æ ·çš„æ“ä½œå‘¢ï¼Ÿ</p>
</li>
<li><h4 id="è§£å†³æ–¹æ³•-2"><a href="#è§£å†³æ–¹æ³•-2" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>æ­¤æ—¶æœ€æ–¹ä¾¿çš„æ–¹æ³•å°±æ˜¯ screen äº†ã€‚ç®€å•çš„è¯´ï¼Œscreen æä¾›äº† ANSI/VT100 çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œä½¿å®ƒèƒ½å¤Ÿåœ¨ä¸€ä¸ªçœŸå®ç»ˆç«¯ä¸‹è¿è¡Œå¤šä¸ªå…¨å±çš„ä¼ªç»ˆç«¯ã€‚screen çš„å‚æ•°å¾ˆå¤šï¼Œå…·æœ‰å¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨æ­¤ä»…ä»‹ç»å…¶å¸¸ç”¨åŠŸèƒ½ä»¥åŠç®€è¦åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆä½¿ç”¨ screen èƒ½å¤Ÿé¿å… HUP ä¿¡å·çš„å½±å“ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ screen çš„å¸®åŠ©ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SCREEN(1)                                                           SCREEN(1)</span><br><span class="line"> </span><br><span class="line">NAME</span><br><span class="line">       screen - screen manager with VT100&#x2F;ANSI terminal emulation</span><br><span class="line"> </span><br><span class="line">SYNOPSIS</span><br><span class="line">       screen [ -options ] [ cmd [ args ] ]</span><br><span class="line">       screen -r [[pid.]tty[.host]]</span><br><span class="line">       screen -r sessionowner&#x2F;[[pid.]tty[.host]]</span><br><span class="line"> </span><br><span class="line">DESCRIPTION</span><br><span class="line">       Screen  is  a  full-screen  window manager that multiplexes a physical</span><br><span class="line">       terminal between several  processes  (typically  interactive  shells).</span><br><span class="line">       Each  virtual  terminal provides the functions of a DEC VT100 terminal</span><br><span class="line">       and, in addition, several control functions from the  ISO  6429  (ECMA</span><br><span class="line">       48,  ANSI  X3.64)  and ISO 2022 standards (e.g. insert&#x2F;delete line and</span><br><span class="line">       support for multiple character sets).  There is a  scrollback  history</span><br><span class="line">       buffer  for  each virtual terminal and a copy-and-paste mechanism that</span><br><span class="line">       allows moving text regions between windows.</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ screen å¾ˆæ–¹ä¾¿ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨é€‰é¡¹ï¼š</p>
<ul>
<li>ç”¨<code>screen -dmS *session name*</code>æ¥å»ºç«‹ä¸€ä¸ªå¤„äºæ–­å¼€æ¨¡å¼ä¸‹çš„ä¼šè¯ï¼ˆå¹¶æŒ‡å®šå…¶ä¼šè¯åï¼‰ã€‚</li>
<li>ç”¨<code>screen -list</code>æ¥åˆ—å‡ºæ‰€æœ‰ä¼šè¯ã€‚</li>
<li>ç”¨<code>screen -r *session name*</code>æ¥é‡æ–°è¿æ¥æŒ‡å®šä¼šè¯ã€‚</li>
<li>ç”¨å¿«æ·é”®<code>CTRL-a d</code>æ¥æš‚æ—¶æ–­å¼€å½“å‰ä¼šè¯ã€‚</li>
</ul>
<h5 id="screen-ç¤ºä¾‹"><a href="#screen-ç¤ºä¾‹" class="headerlink" title="screen ç¤ºä¾‹"></a>screen ç¤ºä¾‹</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@pvcent107 ~]# screen -dmS Urumchi</span><br><span class="line">[root@pvcent107 ~]# screen -list</span><br><span class="line">There is a screen on:</span><br><span class="line">        12842.Urumchi   (Detached)</span><br><span class="line">1 Socket in &#x2F;tmp&#x2F;screens&#x2F;S-root.</span><br><span class="line"> </span><br><span class="line">[root@pvcent107 ~]# screen -r Urumchi</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬ç”¨â€œ-râ€è¿æ¥åˆ° screen ä¼šè¯åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ä¸ªä¼ªç»ˆç«¯é‡Œé¢ä¸ºæ‰€æ¬²ä¸ºï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒ HUP ä¿¡å·ä¼šå¯¹æˆ‘ä»¬çš„è¿›ç¨‹é€ æˆå½±å“ï¼Œä¹Ÿä¸ç”¨ç»™æ¯ä¸ªå‘½ä»¤å‰éƒ½åŠ ä¸Šâ€œnohupâ€æˆ–è€…â€œsetsidâ€äº†ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘æ¥çœ‹ä¸€ä¸‹ä¸‹é¢ä¸¤ä¸ªä¾‹å­å§</p>
<h5 id="1-æœªä½¿ç”¨-screen-æ—¶æ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘"><a href="#1-æœªä½¿ç”¨-screen-æ—¶æ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘" class="headerlink" title="1. æœªä½¿ç”¨ screen æ—¶æ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘"></a>1. æœªä½¿ç”¨ screen æ—¶æ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@pvcent107 ~]# ping www.google.com &amp;</span><br><span class="line">[1] 9499</span><br><span class="line">[root@pvcent107 ~]# pstree -H 9499</span><br><span class="line">initâ”€â”¬â”€Xvnc</span><br><span class="line">     â”œâ”€acpid</span><br><span class="line">     â”œâ”€atd</span><br><span class="line">     â”œâ”€2*[sendmail] </span><br><span class="line">     â”œâ”€sshdâ”€â”¬â”€sshdâ”€â”€â”€bashâ”€â”€â”€pstree</span><br><span class="line">     â”‚       â””â”€sshdâ”€â”€â”€bashâ”€â”€â”€ping</span><br></pre></td></tr></table></figure>

<h5 id="2-ä½¿ç”¨äº†-screen-åæ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘"><a href="#2-ä½¿ç”¨äº†-screen-åæ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘" class="headerlink" title="2. ä½¿ç”¨äº† screen åæ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘"></a>2. ä½¿ç”¨äº† screen åæ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@pvcent107 ~]# screen -r Urumchi</span><br><span class="line">[root@pvcent107 ~]# ping www.ibm.com &amp;</span><br><span class="line">[1] 9488</span><br><span class="line">[root@pvcent107 ~]# pstree -H 9488</span><br><span class="line">initâ”€â”¬â”€Xvnc</span><br><span class="line">     â”œâ”€acpid</span><br><span class="line">     â”œâ”€atd</span><br><span class="line">     â”œâ”€screenâ”€â”€â”€bashâ”€â”€â”€ping</span><br><span class="line">     â”œâ”€2*[sendmail]</span><br></pre></td></tr></table></figure>

<p>è€Œä½¿ç”¨äº† screen åå°±ä¸åŒäº†ï¼Œæ­¤æ—¶ bash æ˜¯ screen çš„å­è¿›ç¨‹ï¼Œè€Œ screen æ˜¯ initï¼ˆPIDä¸º1ï¼‰çš„å­è¿›ç¨‹ã€‚é‚£ä¹ˆå½“ ssh æ–­å¼€è¿æ¥æ—¶ï¼ŒHUP ä¿¡å·è‡ªç„¶ä¸ä¼šå½±å“åˆ° screen ä¸‹é¢çš„å­è¿›ç¨‹äº†</p>
</li>
</ul>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><hr>
<p>ç°åœ¨å‡ ç§æ–¹æ³•å·²ç»ä»‹ç»å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯æ¥é€‰æ‹©ä¸åŒçš„æ–¹æ¡ˆã€‚nohup/setsid æ— ç–‘æ˜¯ä¸´æ—¶éœ€è¦æ—¶æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼Œdisown èƒ½å¸®åŠ©æˆ‘ä»¬æ¥äº‹åè¡¥æ•‘å½“å‰å·²ç»åœ¨è¿è¡Œäº†çš„ä½œä¸šï¼Œè€Œ screen åˆ™æ˜¯åœ¨å¤§æ‰¹é‡æ“ä½œæ—¶ä¸äºŒçš„é€‰æ‹©äº†ã€‚</p>
<h4 id="ç›¸å…³ä¸»é¢˜"><a href="#ç›¸å…³ä¸»é¢˜" class="headerlink" title="ç›¸å…³ä¸»é¢˜"></a>ç›¸å…³ä¸»é¢˜</h4><ul>
<li>â€œ<a href="http://www.ibm.com/developerworks/cn/aix/library/es-unix-sysadmin1.html" target="_blank" rel="noopener external nofollow noreferrer">ç³»ç»Ÿç®¡ç†å‘˜å·¥å…·åŒ…ï¼šè¿›ç¨‹ç®¡ç†æŠ€å·§</a>â€ï¼ˆdeveloperWorks ä¸­å›½ï¼Œ2006 å¹´ 5 æœˆï¼‰ä»‹ç»äº† Linux è¿›ç¨‹ç®¡ç†çš„æ›´å¤šæŠ€å·§ã€‚</li>
<li>â€œ<a href="http://www.ibm.com/developerworks/cn/linux/l-cn-screen/" target="_blank" rel="noopener external nofollow noreferrer">Linux æŠ€å·§ï¼šä½¿ç”¨ screen ç®¡ç†ä½ çš„è¿œç¨‹ä¼šè¯</a>â€ï¼ˆdeveloperWorks ä¸­å›½ï¼Œ2007 å¹´ 7 æœˆï¼‰ä»‹ç»äº† screen çš„æ›´å¤šæŠ€å·§ã€‚</li>
<li>åœ¨ <a href="http://www.ibm.com/developerworks/cn/linux/" target="_blank" rel="noopener external nofollow noreferrer">developerWorks ä¸­å›½ç½‘ç«™ Linux ä¸“åŒº</a>ä¸­å­¦ä¹ æ›´å¤š Linux æ–¹é¢çš„çŸ¥è¯†ã€‚</li>
</ul>
<h3 id="è½¬è½½"><a href="#è½¬è½½" class="headerlink" title="è½¬è½½"></a>è½¬è½½</h3><p>â€‹    <a href="https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/index.html" target="_blank" rel="noopener external nofollow noreferrer">Linux æŠ€å·§ï¼šè®©è¿›ç¨‹åœ¨åå°å¯é è¿è¡Œçš„å‡ ç§æ–¹æ³•</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSç³»ç»Ÿä¸­vscodeç»ˆç«¯å­—ä½“é…ç½®(ç»ˆç«¯æ˜¾ç¤ºå¼‚å¸¸)</title>
    <url>/articles/3176366975.html</url>
    <content><![CDATA[<h1 id="Macä¸‹é…ç½®vscodeç»ˆç«¯å­—ä½“"><a href="#Macä¸‹é…ç½®vscodeç»ˆç«¯å­—ä½“" class="headerlink" title="Macä¸‹é…ç½®vscodeç»ˆç«¯å­—ä½“"></a><strong>Macä¸‹é…ç½®vscodeç»ˆç«¯å­—ä½“</strong></h1><h3 id="ä¸‹è½½å­—ä½“"><a href="#ä¸‹è½½å­—ä½“" class="headerlink" title="ä¸‹è½½å­—ä½“"></a>ä¸‹è½½å­—ä½“</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;Library&#x2F;Fonts</span><br><span class="line">sudo git clone https:&#x2F;&#x2F;github.com&#x2F;abertsch&#x2F;Menlo-for-Powerline.git</span><br></pre></td></tr></table></figure>

<h3 id="vscodeä¸­è®¾ç½®å­—ä½“"><a href="#vscodeä¸­è®¾ç½®å­—ä½“" class="headerlink" title="vscodeä¸­è®¾ç½®å­—ä½“"></a>vscodeä¸­è®¾ç½®å­—ä½“</h3><ul>
<li>ä½¿ç”¨å¿«æ·é”®<code>command+shift+p</code>,  è¾“å…¥<code>Open Settings(JSON)</code></li>
</ul>
<p><img src="https://image.ritboy.com/markdown/202004/9e1c53f7fe10377e378d8b96e2b0af5b.jpg" alt="image-20190510100611190"></p>
<a id="more"></a>

<ul>
<li>åœ¨JSONæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å­—æ®µ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;editor.fontFamily&quot;: &quot;Menlo for Powerline&quot;</span><br></pre></td></tr></table></figure>

<p> <img src="https://image.ritboy.com/markdown/202004/ef1bb7143b671887c8301a58f2600c42.jpg" alt="image-20190510100803027"></p>
<h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><p><img src="https://image.ritboy.com/markdown/202004/b98e9284e2f59a5bf6c1fef858fc7aef.jpg" alt="image-20190510100136153"></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/chenghai37/article/details/81417293" target="_blank" rel="noopener external nofollow noreferrer">é…ç½®vscodeç»ˆç«¯å­—ä½“</a></p>
<p><a href="https://vscode.readthedocs.io/en/latest/getstarted/settings/" target="_blank" rel="noopener external nofollow noreferrer">https://vscode.readthedocs.io/en/latest/getstarted/settings/</a></p>
]]></content>
      <categories>
        <category>MacOS</category>
        <category>vscode</category>
      </categories>
      <tags>
        <tag>MacOS</tag>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>Centos7çº¯æ‰‹å·¥å®‰è£…kubernetes</title>
    <url>/articles/3267317514.html</url>
    <content><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote>
<p>æœ¬æ–‡ç« ä¸»è¦ä»‹ç»å¦‚ä½•é€šè¿‡ä½¿ç”¨å®˜æ–¹æä¾›çš„äºŒè¿›åˆ¶åŒ…å®‰è£…é…ç½®k8sé›†ç¾¤</p>
</blockquote>
<h2 id="å®éªŒç¯å¢ƒè¯´æ˜"><a href="#å®éªŒç¯å¢ƒè¯´æ˜" class="headerlink" title="å®éªŒç¯å¢ƒè¯´æ˜"></a>å®éªŒç¯å¢ƒè¯´æ˜</h2><blockquote>
<p>VMWareä¸Šå®‰è£…ä¸‰å°è™šæ‹Ÿæœº</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ray01: master 172.16.242.129</span><br><span class="line">ray02: node 172.16.242.130</span><br><span class="line">ray03: node 172.16.242.131</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="è½¯ä»¶å®‰è£…å‰å‡†å¤‡å·¥ä½œ"><a href="#è½¯ä»¶å®‰è£…å‰å‡†å¤‡å·¥ä½œ" class="headerlink" title="è½¯ä»¶å®‰è£…å‰å‡†å¤‡å·¥ä½œ"></a>è½¯ä»¶å®‰è£…å‰å‡†å¤‡å·¥ä½œ</h3><blockquote>
<p>éœ€è¦åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šåšå¦‚ä¸‹æ“ä½œ</p>
</blockquote>
<h4 id="å…³é—­é˜²ç«å¢™"><a href="#å…³é—­é˜²ç«å¢™" class="headerlink" title="å…³é—­é˜²ç«å¢™"></a>å…³é—­é˜²ç«å¢™</h4><blockquote>
<p>å¦‚æœå„ä¸ªä¸»æœºå¯ç”¨äº†é˜²ç«å¢™ï¼Œéœ€è¦å¼€æ”¾Kuberneteså„ä¸ªç»„ä»¶æ‰€éœ€è¦çš„ç«¯å£ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/" target="_blank" rel="noopener external nofollow noreferrer">Installing kubeadm</a>ä¸­çš„â€Check required portsâ€ä¸€èŠ‚ã€‚ è¿™é‡Œç®€å•èµ·è§åœ¨å„èŠ‚ç‚¹ç¦ç”¨é˜²ç«å¢™ï¼š</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure>

<h4 id="ç¦ç”¨SELINUX"><a href="#ç¦ç”¨SELINUX" class="headerlink" title="ç¦ç”¨SELINUX"></a>ç¦ç”¨SELINUX</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸´æ—¶ç¦ç”¨</span><br><span class="line">setenforce 0</span><br><span class="line"></span><br><span class="line"># æ°¸ä¹…ç¦ç”¨ SELINUXå­—æ®µæ”¹ä¸ºdisabled</span><br><span class="line">vim &#x2F;etc&#x2F;selinux&#x2F;config	# æˆ–è€…ä¿®æ”¹&#x2F;etc&#x2F;sysconfig&#x2F;selinux</span><br><span class="line">SELINUX&#x3D;disabled</span><br></pre></td></tr></table></figure>

<h4 id="ä¿®æ”¹k8s-confæ–‡ä»¶"><a href="#ä¿®æ”¹k8s-confæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹k8s.confæ–‡ä»¶"></a>ä¿®æ”¹k8s.confæ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt;  &#x2F;etc&#x2F;sysctl.d&#x2F;k8s.conf</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables &#x3D; 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables &#x3D; 1</span><br><span class="line">vm.swappiness &#x3D; 0</span><br><span class="line">EOF</span><br><span class="line">sysctl --system</span><br></pre></td></tr></table></figure>

<h4 id="å…³é—­swap"><a href="#å…³é—­swap" class="headerlink" title="å…³é—­swap"></a>å…³é—­swap</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸´æ—¶å…³é—­</span><br><span class="line">swapoff -a</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¿®æ”¹ /etc/fstab æ–‡ä»¶ï¼Œæ³¨é‡Šæ‰ SWAP çš„è‡ªåŠ¨æŒ‚è½½ï¼ˆæ°¸ä¹…å…³é—­swapï¼Œé‡å¯åç”Ÿæ•ˆï¼‰</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ³¨é‡Šæ‰ä»¥ä¸‹å­—æ®µ</span><br><span class="line">&#x2F;dev&#x2F;mapper&#x2F;cl-swap     swap                    swap    defaults        0 0</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®hostsè§£æ"><a href="#é…ç½®hostsè§£æ" class="headerlink" title="é…ç½®hostsè§£æ"></a>é…ç½®hostsè§£æ</h3><blockquote>
<p>å¦‚ä¸‹æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat &gt;&#x2F;etc&#x2F;hosts&lt;&lt;EOF</span><br><span class="line">172.16.242.129 ray01</span><br><span class="line">172.16.242.130 ray02</span><br><span class="line">172.16.242.131 ray03</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®å…å¯†ç™»å½•"><a href="#é…ç½®å…å¯†ç™»å½•" class="headerlink" title="é…ç½®å…å¯†ç™»å½•"></a>é…ç½®å…å¯†ç™»å½•</h3><blockquote>
<p>å¦‚ä¸‹æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä»¥MasterèŠ‚ç‚¹ray01ä¸ºä¾‹</span><br><span class="line">ssh-copy-id -i ~&#x2F;.ssh&#x2F;id_rsa.pub root@ray02</span><br><span class="line">ssh-copy-id -i ~&#x2F;.ssh&#x2F;id_rsa.pub root@rah03</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h3><blockquote>
<p>æ¯ä¸ªèŠ‚ç‚¹å‡è¦è¿›è¡Œæ“ä½œ</p>
</blockquote>
<h4 id="å¸è½½è€ç‰ˆæœ¬çš„Docker"><a href="#å¸è½½è€ç‰ˆæœ¬çš„Docker" class="headerlink" title="å¸è½½è€ç‰ˆæœ¬çš„Docker"></a>å¸è½½è€ç‰ˆæœ¬çš„Docker</h4><blockquote>
<p>å¦‚æœæœ‰æ²¡æœ‰è€ç‰ˆæœ¬Dockerï¼Œåˆ™ä¸éœ€è¦è¿™æ­¥</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum remove docker \</span><br><span class="line">           docker-common \</span><br><span class="line">           docker-selinux \</span><br><span class="line">           docker-engine</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨yumè¿›è¡Œå®‰è£…"><a href="#ä½¿ç”¨yumè¿›è¡Œå®‰è£…" class="headerlink" title="ä½¿ç”¨yumè¿›è¡Œå®‰è£…"></a>ä½¿ç”¨yumè¿›è¡Œå®‰è£…</h4><blockquote>
<p>v1.11.0ç‰ˆæœ¬æ¨èä½¿ç”¨docker v17.03, v1.11,v1.12,v1.13, ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œå†é«˜ç‰ˆæœ¬çš„dockerå¯èƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚ æµ‹è¯•å‘ç°17.09æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œä¸èƒ½ä½¿ç”¨èµ„æºé™åˆ¶(å†…å­˜CPU)ã€‚æ¯ä¸ªèŠ‚ç‚¹å‡è¦å®‰è£…ï¼Œç›®å‰å®˜ç½‘å»ºè®®å®‰è£…17.03ç‰ˆæœ¬çš„dockerï¼Œ<a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/" target="_blank" rel="noopener external nofollow noreferrer">å®˜ç½‘é“¾æ¥</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·</span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"># Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯</span><br><span class="line">sudo yum-config-manager --add-repo http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span><br><span class="line"># Step 3: æ›´æ–°å¹¶å®‰è£… Docker-CE</span><br><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum -y install docker-ce docker-ce-selinux</span><br><span class="line"># æ³¨æ„ï¼š</span><br><span class="line"># å®˜æ–¹è½¯ä»¶æºé»˜è®¤å¯ç”¨äº†æœ€æ–°çš„è½¯ä»¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘è½¯ä»¶æºçš„æ–¹å¼è·å–å„ä¸ªç‰ˆæœ¬çš„è½¯ä»¶åŒ…ã€‚ä¾‹å¦‚å®˜æ–¹å¹¶æ²¡æœ‰å°†æµ‹è¯•ç‰ˆæœ¬çš„è½¯ä»¶æºç½®ä¸ºå¯ç”¨ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å¯ã€‚åŒç†å¯ä»¥å¼€å¯å„ç§æµ‹è¯•ç‰ˆæœ¬ç­‰ã€‚</span><br><span class="line"># vim &#x2F;etc&#x2F;yum.repos.d&#x2F;docker-ce.repo</span><br><span class="line">#   å°† [docker-ce-test] ä¸‹æ–¹çš„ enabled&#x3D;0 ä¿®æ”¹ä¸º enabled&#x3D;1</span><br><span class="line">#</span><br><span class="line"># å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE:</span><br><span class="line"># Step 3.1: æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬:</span><br><span class="line"># yum list docker-ce.x86_64 --showduplicates | sort -r</span><br><span class="line">#   Loading mirror speeds from cached hostfile</span><br><span class="line">#   Loaded plugins: branch, fastestmirror, langpacks</span><br><span class="line">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            docker-ce-stable</span><br><span class="line">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            @docker-ce-stable</span><br><span class="line">#   docker-ce.x86_64            17.03.0.ce-1.el7.centos            docker-ce-stable</span><br><span class="line">#   Available Packages</span><br><span class="line"># Step 3.2 : å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: (VERSION ä¾‹å¦‚ä¸Šé¢çš„ 17.03.0.ce.1-1.el7.centos)</span><br><span class="line">sudo yum -y --setopt&#x3D;obsoletes&#x3D;0 install docker-ce-[VERSION] \</span><br><span class="line">docker-ce-selinux-[VERSION]</span><br><span class="line"></span><br><span class="line"># Step 4: å¼€å¯DockeræœåŠ¡</span><br><span class="line">sudo systemctl enable docker &amp;&amp; systemctl start docker</span><br></pre></td></tr></table></figure>

<h4 id="dockerå®‰è£…é—®é¢˜å°ç»“"><a href="#dockerå®‰è£…é—®é¢˜å°ç»“" class="headerlink" title="dockerå®‰è£…é—®é¢˜å°ç»“"></a>dockerå®‰è£…é—®é¢˜å°ç»“</h4><blockquote>
<p>é”™è¯¯ä¿¡æ¯</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Error: Package: docker-ce-17.03.2.ce-1.el7.centos.x86_64 (docker-ce-stable)</span><br><span class="line">           Requires: docker-ce-selinux &gt;&#x3D; 17.03.2.ce-1.el7.centos</span><br><span class="line">           Available: docker-ce-selinux-17.03.0.ce-1.el7.centos.noarch (docker-ce-stable)</span><br><span class="line">               docker-ce-selinux &#x3D; 17.03.0.ce-1.el7.centos</span><br><span class="line">           Available: docker-ce-selinux-17.03.1.ce-1.el7.centos.noarch (docker-ce-stable)</span><br><span class="line">               docker-ce-selinux &#x3D; 17.03.1.ce-1.el7.centos</span><br><span class="line">           Available: docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch (docker-ce-stable)</span><br><span class="line">               docker-ce-selinux &#x3D; 17.03.2.ce-1.el7.centos</span><br><span class="line"> You could try using --skip-broken to work around the problem</span><br><span class="line"> You could try running: rpm -Va --nofiles --nodigest</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è§£å†³åŠæ³•</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è¦å…ˆå®‰è£…docker-ce-selinux-17.03.2.ceï¼Œå¦åˆ™å®‰è£…docker-ceä¼šæŠ¥é”™</span><br><span class="line"># æ³¨æ„docker-ce-selinuxçš„ç‰ˆæœ¬ è¦ä¸dockerçš„ç‰ˆæœ¬ä¸€ç›´</span><br><span class="line">yum install -y https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;centos&#x2F;7&#x2F;x86_64&#x2F;stable&#x2F;Packages&#x2F;docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch.rpm</span><br><span class="line"></span><br><span class="line"># æˆ–è€…</span><br><span class="line">yum -y install https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;7&#x2F;x86_64&#x2F;stable&#x2F;Packages&#x2F;docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch.rpm</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å‚è€ƒé“¾æ¥</p>
</blockquote>
<p><a href="https://blog.csdn.net/csdn_duomaomao/article/details/79019764" target="_blank" rel="noopener external nofollow noreferrer">https://blog.csdn.net/csdn_duomaomao/article/details/79019764</a></p>
<h4 id="Dockerå®‰è£…æ ¡éªŒ"><a href="#Dockerå®‰è£…æ ¡éªŒ" class="headerlink" title="Dockerå®‰è£…æ ¡éªŒ"></a>Dockerå®‰è£…æ ¡éªŒ</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:      17.03.2-ce</span><br><span class="line"> API version:  1.27</span><br><span class="line"> Go version:   go1.7.5</span><br><span class="line"> Git commit:   f5ec1e2</span><br><span class="line"> Built:        Tue Jun 27 02:21:36 2017</span><br><span class="line"> OS&#x2F;Arch:      linux&#x2F;amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.03.2-ce</span><br><span class="line"> API version:  1.27 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.7.5</span><br><span class="line"> Git commit:   f5ec1e2</span><br><span class="line"> Built:        Tue Jun 27 02:21:36 2017</span><br><span class="line"> OS&#x2F;Arch:      linux&#x2F;amd64</span><br><span class="line"> Experimental: false</span><br></pre></td></tr></table></figure>

<h4 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h4><p><a href="https://yq.aliyun.com/articles/110806" target="_blank" rel="noopener external nofollow noreferrer">https://yq.aliyun.com/articles/110806</a></p>
<h3 id="å®‰è£…CFSSL"><a href="#å®‰è£…CFSSL" class="headerlink" title="å®‰è£…CFSSL"></a>å®‰è£…CFSSL</h3><blockquote>
<p>åªåœ¨MasterèŠ‚ç‚¹<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸‹è½½</span><br><span class="line"># ç™¾åº¦äº‘é“¾æ¥ï¼šhttps:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;1kgV40nwHy1IKnnLD6zH4cQ å¯†ç ï¼šalyj</span><br><span class="line">mkdir -pv &#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line">cd &#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line">yum install -y wget</span><br><span class="line">wget https:&#x2F;&#x2F;pkg.cfssl.org&#x2F;R1.2&#x2F;cfssl_linux-amd64</span><br><span class="line">wget https:&#x2F;&#x2F;pkg.cfssl.org&#x2F;R1.2&#x2F;cfssljson_linux-amd64</span><br><span class="line">wget https:&#x2F;&#x2F;pkg.cfssl.org&#x2F;R1.2&#x2F;cfssl-certinfo_linux-amd64</span><br><span class="line"></span><br><span class="line"># å®‰è£…</span><br><span class="line">mv cfssl-certinfo_linux-amd64 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;cfssl-certinfo</span><br><span class="line">mv cfssl_linux-amd64 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;cfssl</span><br><span class="line">mv cfssljson_linux-amd64 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;cfssljson</span><br><span class="line">chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;cfssl*</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®CA"><a href="#é…ç½®CA" class="headerlink" title="é…ç½®CA"></a>é…ç½®CA</h3><blockquote>
<p>åªåœ¨MasterèŠ‚ç‚¹<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
<p>æ­¤å¤„çš„CAé…ç½®ï¼Œåé¢é…ç½®etcdå’Œk8sæ—¶éƒ½éœ€è¦ä½¿ç”¨</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -pv $HOME&#x2F;ssl &amp;&amp; cd $HOME&#x2F;ssl</span><br><span class="line">cat &gt;ca-config.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;signing&quot;: &#123;</span><br><span class="line">    &quot;default&quot;: &#123;</span><br><span class="line">      &quot;expiry&quot;: &quot;87600h&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;profiles&quot;: &#123;</span><br><span class="line">      &quot;kubernetes&quot;: &#123;</span><br><span class="line">        &quot;usages&quot;: [</span><br><span class="line">            &quot;signing&quot;,</span><br><span class="line">            &quot;key encipherment&quot;,</span><br><span class="line">            &quot;server auth&quot;,</span><br><span class="line">            &quot;client auth&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;expiry&quot;: &quot;87600h&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®etcdé›†ç¾¤"><a href="#é…ç½®etcdé›†ç¾¤" class="headerlink" title="é…ç½®etcdé›†ç¾¤"></a>é…ç½®etcdé›†ç¾¤</h3><h4 id="ç”Ÿæˆetcd-ca"><a href="#ç”Ÿæˆetcd-ca" class="headerlink" title="ç”Ÿæˆetcd-ca"></a>ç”Ÿæˆetcd-ca</h4><blockquote>
<p>åªåœ¨MasterèŠ‚ç‚¹<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å†™å…¥é…ç½®</span><br><span class="line">cat &gt;etcd-ca-csr.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;CN&quot;: &quot;etcd&quot;,</span><br><span class="line">  &quot;key&quot;: &#123;</span><br><span class="line">    &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">    &quot;size&quot;: 2048</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;names&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">      &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;O&quot;: &quot;etcd&quot;,</span><br><span class="line">      &quot;OU&quot;: &quot;Etcd Security&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ etcd root ca</span><br><span class="line">cfssl gencert -initca etcd-ca-csr.json | cfssljson -bare etcd-ca</span><br><span class="line"></span><br><span class="line">cat &gt;etcd-csr.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;etcd&quot;,</span><br><span class="line">    &quot;hosts&quot;: [</span><br><span class="line">      &quot;127.0.0.1&quot;,</span><br><span class="line">      &quot;172.16.242.129&quot;,</span><br><span class="line">      &quot;172.16.242.130&quot;,</span><br><span class="line">      &quot;172.16.242.131&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;O&quot;: &quot;etcd&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;Etcd Security&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ etcd ca</span><br><span class="line">cfssl gencert -ca&#x3D;etcd-ca.pem -ca-key&#x3D;etcd-ca-key.pem -config&#x3D;ca-config.json \</span><br><span class="line">-profile&#x3D;kubernetes etcd-csr.json | cfssljson -bare etcd</span><br><span class="line">mkdir -pv &#x2F;etc&#x2F;etcd&#x2F;ssl</span><br><span class="line">cp etcd*.pem &#x2F;etc&#x2F;etcd&#x2F;ssl</span><br><span class="line">ls &#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd*.pem</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶åˆ°å…¶ä»–èŠ‚ç‚¹</span><br><span class="line">cd &#x2F;etc&#x2F;etcd &amp;&amp; tar cvzf etcd-ssl.tgz ssl&#x2F;</span><br><span class="line">scp &#x2F;etc&#x2F;etcd&#x2F;etcd-ssl.tgz ray02:~&#x2F;</span><br><span class="line">scp &#x2F;etc&#x2F;etcd&#x2F;etcd-ssl.tgz ray03:~&#x2F;</span><br><span class="line">ssh ray02 &#39;mkdir -pv &#x2F;etc&#x2F;etcd &amp;&amp; tar xf etcd-ssl.tgz -C &#x2F;etc&#x2F;etcd &amp;&amp; ls -l &#x2F;etc&#x2F;etcd&#x2F;ssl&#39;</span><br><span class="line">ssh ray03 &#39;mkdir -pv &#x2F;etc&#x2F;etcd &amp;&amp; tar xf etcd-ssl.tgz -C &#x2F;etc&#x2F;etcd &amp;&amp; ls -l &#x2F;etc&#x2F;etcd&#x2F;ssl&#39;</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…å¯åŠ¨etcd"><a href="#å®‰è£…å¯åŠ¨etcd" class="headerlink" title="å®‰è£…å¯åŠ¨etcd"></a>å®‰è£…å¯åŠ¨etcd</h4><blockquote>
<p>å¦‚ä¸‹æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å®‰è£…</span><br><span class="line"># ç™¾åº¦äº‘é“¾æ¥ï¼šhttps:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;1IVHyMqiJrlq9gmbF49Ly3Q å¯†ç ï¼šw5nx</span><br><span class="line">mkdir -pv &#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line">cd &#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line">yum install -y wget</span><br><span class="line">wget https:&#x2F;&#x2F;github.com&#x2F;coreos&#x2F;etcd&#x2F;releases&#x2F;download&#x2F;v3.2.18&#x2F;etcd-v3.2.18-linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"># æ³¨æ„ï¼šå¯ä»¥ç”¨scpæ‹·è´etcdå®‰è£…åŒ…åˆ°å…¶ä»–èŠ‚ç‚¹</span><br><span class="line"># scp etcd-v3.2.18-linux-amd64.tar.gz ray02:&#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line"># scp etcd-v3.2.18-linux-amd64.tar.gz ray03:&#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line"></span><br><span class="line">tar xf etcd-v3.2.18-linux-amd64.tar.gz</span><br><span class="line">mv etcd-v3.2.18-linux-amd64 &#x2F;usr&#x2F;local&#x2F;etcd-v3.2.18</span><br><span class="line">ln -sv &#x2F;usr&#x2F;local&#x2F;etcd-v3.2.18 &#x2F;usr&#x2F;local&#x2F;etcd</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;etcd &amp;&amp; mkdir bin &amp;&amp; mv etcd etcdctl bin</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;etcd&#x2F;bin&#x2F;etcd --version</span><br><span class="line">cd $HOME</span><br><span class="line"></span><br><span class="line"># é…ç½®å¯åŠ¨è„šæœ¬</span><br><span class="line">export ETCD_NAME&#x3D;$(hostname)</span><br><span class="line">export INTERNAL_IP&#x3D;$(hostname -i | awk &#39;&#123;print $NF&#125;&#39;)</span><br><span class="line">export ECTD_CLUSTER&#x3D;&#39;ray01&#x3D;https:&#x2F;&#x2F;172.16.242.129:2380,ray02&#x3D;https:&#x2F;&#x2F;172.16.242.130:2380,ray03&#x3D;https:&#x2F;&#x2F;172.16.242.131:2380&#39;</span><br><span class="line">mkdir -pv &#x2F;data&#x2F;etcd</span><br><span class="line">cat &gt; &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;etcd.service &lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;Etcd Server</span><br><span class="line">After&#x3D;network.target</span><br><span class="line">After&#x3D;network-online.target</span><br><span class="line">Wants&#x3D;network-online.target</span><br><span class="line">Documentation&#x3D;https:&#x2F;&#x2F;github.com&#x2F;coreos</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type&#x3D;notify</span><br><span class="line">WorkingDirectory&#x3D;&#x2F;data&#x2F;etcd</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;etcd&#x2F;etcd.conf</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;etcd&#x2F;bin&#x2F;etcd \\</span><br><span class="line">  --name $&#123;ETCD_NAME&#125; \\</span><br><span class="line">  --cert-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd.pem \\</span><br><span class="line">  --key-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd-key.pem \\</span><br><span class="line">  --peer-cert-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd.pem \\</span><br><span class="line">  --peer-key-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd-key.pem \\</span><br><span class="line">  --trusted-ca-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd-ca.pem \\</span><br><span class="line">  --peer-trusted-ca-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd-ca.pem \\</span><br><span class="line">  --initial-advertise-peer-urls https:&#x2F;&#x2F;$&#123;INTERNAL_IP&#125;:2380 \\</span><br><span class="line">  --listen-peer-urls https:&#x2F;&#x2F;$&#123;INTERNAL_IP&#125;:2380 \\</span><br><span class="line">  --listen-client-urls https:&#x2F;&#x2F;$&#123;INTERNAL_IP&#125;:2379,https:&#x2F;&#x2F;127.0.0.1:2379 \\</span><br><span class="line">  --advertise-client-urls https:&#x2F;&#x2F;$&#123;INTERNAL_IP&#125;:2379 \\</span><br><span class="line">  --initial-cluster-token my-etcd-token \\</span><br><span class="line">  --initial-cluster $ECTD_CLUSTER \\</span><br><span class="line">  --initial-cluster-state new \\</span><br><span class="line">  --data-dir&#x3D;&#x2F;data&#x2F;etcd</span><br><span class="line">Restart&#x3D;on-failure</span><br><span class="line">RestartSec&#x3D;5</span><br><span class="line">LimitNOFILE&#x3D;65536</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨å¹¶è®¾ç½®å¼€æœºå¯åŠ¨</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start etcd</span><br><span class="line">systemctl enable etcd</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥çœ‹etcdé›†ç¾¤çŠ¶æ€"><a href="#æŸ¥çœ‹etcdé›†ç¾¤çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹etcdé›†ç¾¤çŠ¶æ€"></a>æŸ¥çœ‹etcdé›†ç¾¤çŠ¶æ€</h4><blockquote>
<p>å¯ä»¥åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ‰§è¡Œå‘½ä»¤</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;etcd&#x2F;bin&#x2F;etcdctl --endpoints &quot;https:&#x2F;&#x2F;127.0.0.1:2379&quot; \</span><br><span class="line">  --ca-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd-ca.pem \</span><br><span class="line">  --cert-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd.pem \</span><br><span class="line">  --key-file&#x3D;&#x2F;etc&#x2F;etcd&#x2F;ssl&#x2F;etcd-key.pem \</span><br><span class="line">  cluster-health</span><br><span class="line">  </span><br><span class="line"># æ‰§è¡Œç»“æœ</span><br><span class="line">member 2348823a457a26 is healthy: got healthy result from https:&#x2F;&#x2F;172.16.242.131:2379</span><br><span class="line">member 3a4edb8ea263762b is healthy: got healthy result from https:&#x2F;&#x2F;172.16.242.130:2379</span><br><span class="line">member c8530ac4a96f8c86 is healthy: got healthy result from https:&#x2F;&#x2F;172.16.242.129:2379</span><br><span class="line">cluster is healthy</span><br></pre></td></tr></table></figure>

<h3 id="ç”Ÿæˆk8sé›†ç¾¤çš„CA"><a href="#ç”Ÿæˆk8sé›†ç¾¤çš„CA" class="headerlink" title="ç”Ÿæˆk8sé›†ç¾¤çš„CA"></a>ç”Ÿæˆk8sé›†ç¾¤çš„CA</h3><blockquote>
<p>åªéœ€åœ¨MasterèŠ‚ç‚¹<code>ray01</code>ä¸Šæ“ä½œï¼Œæœ€åæŠŠCAæ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹ï¼ˆ<code>ray02</code>å’Œ<code>ray03</code>ï¼‰</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è¿›å…¥ç›¸å…³ç›®å½•</span><br><span class="line">cd $HOME&#x2F;ssl</span><br><span class="line"></span><br><span class="line"># é…ç½® root ca</span><br><span class="line">cat &gt;ca-csr.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">  &quot;CN&quot;: &quot;kubernetes&quot;,</span><br><span class="line">  &quot;key&quot;: &#123;</span><br><span class="line">    &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">    &quot;size&quot;: 2048</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;names&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">      &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">      &quot;O&quot;: &quot;k8s&quot;,</span><br><span class="line">      &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;ca&quot;: &#123;</span><br><span class="line">     &quot;expiry&quot;: &quot;87600h&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ root ca</span><br><span class="line">cfssl gencert -initca ca-csr.json | cfssljson -bare ca</span><br><span class="line">ls ca*.pem</span><br><span class="line"></span><br><span class="line"># é…ç½® kube-apiserver ca</span><br><span class="line"># 10.96.0.1 æ˜¯ kube-apiserver æŒ‡å®šçš„ service-cluster-ip-range ç½‘æ®µçš„ç¬¬ä¸€ä¸ªIP</span><br><span class="line">cat &gt;kube-apiserver-csr.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;kube-apiserver&quot;,</span><br><span class="line">    &quot;hosts&quot;: [</span><br><span class="line">      &quot;127.0.0.1&quot;,</span><br><span class="line">      &quot;172.16.242.129&quot;,</span><br><span class="line">      &quot;172.16.242.130&quot;,</span><br><span class="line">      &quot;172.16.242.131&quot;,</span><br><span class="line">      &quot;10.96.0.1&quot;,</span><br><span class="line">      &quot;kubernetes&quot;,</span><br><span class="line">      &quot;kubernetes.default&quot;,</span><br><span class="line">      &quot;kubernetes.default.svc&quot;,</span><br><span class="line">      &quot;kubernetes.default.svc.cluster&quot;,</span><br><span class="line">      &quot;kubernetes.default.svc.cluster.local&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;O&quot;: &quot;k8s&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ kube-apiserver ca</span><br><span class="line">cfssl gencert -ca&#x3D;ca.pem -ca-key&#x3D;ca-key.pem -config&#x3D;ca-config.json \</span><br><span class="line">-profile&#x3D;kubernetes kube-apiserver-csr.json | cfssljson -bare kube-apiserver</span><br><span class="line">ls kube-apiserver*.pem</span><br><span class="line"></span><br><span class="line"># é…ç½® kube-controller-manager ca</span><br><span class="line">cat &gt;kube-controller-manager-csr.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;system:kube-controller-manager&quot;,</span><br><span class="line">    &quot;hosts&quot;: [</span><br><span class="line">      &quot;127.0.0.1&quot;,</span><br><span class="line">      &quot;172.16.242.129&quot;,</span><br><span class="line">      &quot;172.16.242.130&quot;,</span><br><span class="line">      &quot;172.16.242.131&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;O&quot;: &quot;system:kube-controller-manager&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ kube-controller-manager ca</span><br><span class="line">cfssl gencert -ca&#x3D;ca.pem -ca-key&#x3D;ca-key.pem -config&#x3D;ca-config.json \</span><br><span class="line">-profile&#x3D;kubernetes kube-controller-manager-csr.json | cfssljson -bare kube-controller-manager</span><br><span class="line">ls kube-controller-manager*.pem</span><br><span class="line"></span><br><span class="line"># é…ç½® kube-scheduler ca</span><br><span class="line">cat &gt;kube-scheduler-csr.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;system:kube-scheduler&quot;,</span><br><span class="line">    &quot;hosts&quot;: [</span><br><span class="line">      &quot;127.0.0.1&quot;,</span><br><span class="line">      &quot;172.16.242.129&quot;,</span><br><span class="line">      &quot;172.16.242.130&quot;,</span><br><span class="line">      &quot;172.16.242.131&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;O&quot;: &quot;system:kube-scheduler&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ kube-scheduler ca</span><br><span class="line">cfssl gencert -ca&#x3D;ca.pem -ca-key&#x3D;ca-key.pem -config&#x3D;ca-config.json \</span><br><span class="line">-profile&#x3D;kubernetes kube-scheduler-csr.json | cfssljson -bare kube-scheduler</span><br><span class="line">ls kube-scheduler*.pem</span><br><span class="line"></span><br><span class="line"># é…ç½® kube-proxy ca</span><br><span class="line">cat &gt;kube-proxy-csr.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;system:kube-proxy&quot;,</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;O&quot;: &quot;system:kube-proxy&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ kube-proxy ca</span><br><span class="line">cfssl gencert -ca&#x3D;ca.pem -ca-key&#x3D;ca-key.pem -config&#x3D;ca-config.json \</span><br><span class="line">-profile&#x3D;kubernetes kube-proxy-csr.json | cfssljson -bare kube-proxy</span><br><span class="line">ls kube-proxy*.pem</span><br><span class="line"></span><br><span class="line"># é…ç½® admin ca</span><br><span class="line">cat &gt;admin-csr.json&lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CN&quot;: &quot;admin&quot;,</span><br><span class="line">    &quot;key&quot;: &#123;</span><br><span class="line">        &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">        &quot;size&quot;: 2048</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;names&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">            &quot;ST&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">            &quot;O&quot;: &quot;system:masters&quot;,</span><br><span class="line">            &quot;OU&quot;: &quot;System&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ admin ca</span><br><span class="line">cfssl gencert -ca&#x3D;ca.pem -ca-key&#x3D;ca-key.pem -config&#x3D;ca-config.json \</span><br><span class="line">-profile&#x3D;kubernetes admin-csr.json | cfssljson -bare admin</span><br><span class="line">ls admin*.pem</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶ç”Ÿæˆçš„ca</span><br><span class="line">mkdir -pv &#x2F;etc&#x2F;kubernetes&#x2F;pki</span><br><span class="line">cp ca*.pem admin*.pem kube-proxy*.pem kube-scheduler*.pem kube-controller-manager*.pem kube-apiserver*.pem &#x2F;etc&#x2F;kubernetes&#x2F;pki</span><br><span class="line">cd &#x2F;etc&#x2F;kubernetes &amp;&amp; tar cvzf pki.tgz pki&#x2F;</span><br><span class="line">scp &#x2F;etc&#x2F;kubernetes&#x2F;pki.tgz ray02:~&#x2F;</span><br><span class="line">scp &#x2F;etc&#x2F;kubernetes&#x2F;pki.tgz ray03:~&#x2F;</span><br><span class="line">ssh ray02 &#39;mkdir -pv &#x2F;etc&#x2F;kubernetes &amp;&amp; tar xf pki.tgz -C &#x2F;etc&#x2F;kubernetes &amp;&amp; ls -l &#x2F;etc&#x2F;kubernetes&#x2F;pki&#39;</span><br><span class="line">ssh ray03 &#39;mkdir -pv &#x2F;etc&#x2F;kubernetes &amp;&amp; tar xf pki.tgz -C &#x2F;etc&#x2F;kubernetes &amp;&amp; ls -l &#x2F;etc&#x2F;kubernetes&#x2F;pki&#39;</span><br><span class="line">cd $HOME</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…k8sæ–‡ä»¶"><a href="#å®‰è£…k8sæ–‡ä»¶" class="headerlink" title="å®‰è£…k8sæ–‡ä»¶"></a>å®‰è£…k8sæ–‡ä»¶</h3><h4 id="åœ¨MasterèŠ‚ç‚¹k8sçš„serveræ–‡ä»¶"><a href="#åœ¨MasterèŠ‚ç‚¹k8sçš„serveræ–‡ä»¶" class="headerlink" title="åœ¨MasterèŠ‚ç‚¹k8sçš„serveræ–‡ä»¶"></a>åœ¨MasterèŠ‚ç‚¹k8sçš„serveræ–‡ä»¶</h4><blockquote>
<p>åœ¨MasterèŠ‚ç‚¹<code>ray01</code>ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸‹è½½æ–‡ä»¶</span><br><span class="line"># éœ€è¦ç¿»å¢™ï¼Œå¦‚æœä¸èƒ½ç¿»å¢™ä½¿ç”¨å¦‚ä¸‹é“¾æ¥ä¸‹è½½</span><br><span class="line"># é“¾æ¥ï¼šhttps:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;1OI9Q4BRp7jNJUmsA8IAkbA å¯†ç ï¼štnx5</span><br><span class="line">cd &#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line">wget https:&#x2F;&#x2F;dl.k8s.io&#x2F;v1.11.0&#x2F;kubernetes-server-linux-amd64.tar.gz</span><br><span class="line">tar xf kubernetes-server-linux-amd64.tar.gz</span><br><span class="line">cd kubernetes&#x2F;server&#x2F;bin</span><br><span class="line">mkdir -pv &#x2F;usr&#x2F;local&#x2F;kubernetes-v1.11.0&#x2F;bin</span><br><span class="line">cp kube-apiserver kube-controller-manager kube-scheduler kube-proxy kubelet kubectl &#x2F;usr&#x2F;local&#x2F;kubernetes-v1.11.0&#x2F;bin</span><br><span class="line">ln -sv &#x2F;usr&#x2F;local&#x2F;kubernetes-v1.11.0 &#x2F;usr&#x2F;local&#x2F;kubernetes</span><br><span class="line">cp &#x2F;usr&#x2F;local&#x2F;kubernetes&#x2F;bin&#x2F;kubectl &#x2F;usr&#x2F;local&#x2F;bin&#x2F;kubectl</span><br><span class="line">kubectl version</span><br><span class="line">cd $HOME</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨å…¶ä»–nodeèŠ‚ç‚¹å®‰è£…k8sçš„nodeæ–‡ä»¶"><a href="#åœ¨å…¶ä»–nodeèŠ‚ç‚¹å®‰è£…k8sçš„nodeæ–‡ä»¶" class="headerlink" title="åœ¨å…¶ä»–nodeèŠ‚ç‚¹å®‰è£…k8sçš„nodeæ–‡ä»¶"></a>åœ¨å…¶ä»–nodeèŠ‚ç‚¹å®‰è£…k8sçš„nodeæ–‡ä»¶</h4><blockquote>
<p>åœ¨<code>ray02</code>å’Œ<code>ray03</code>èŠ‚ç‚¹ä¸Šè¿è¡Œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line">wget https:&#x2F;&#x2F;dl.k8s.io&#x2F;v1.11.0&#x2F;kubernetes-node-linux-amd64.tar.gz</span><br><span class="line">tar xf kubernetes-node-linux-amd64.tar.gz</span><br><span class="line">cd kubernetes&#x2F;server&#x2F;bin</span><br><span class="line">mkdir -pv &#x2F;usr&#x2F;local&#x2F;kubernetes-v1.11.0&#x2F;bin</span><br><span class="line">cp kube-proxy kubelet kubectl &#x2F;usr&#x2F;local&#x2F;kubernetes-v1.11.0&#x2F;bin</span><br><span class="line">ln -sv &#x2F;usr&#x2F;local&#x2F;kubernetes-v1.11.0 &#x2F;usr&#x2F;local&#x2F;kubernetes</span><br><span class="line">cp &#x2F;usr&#x2F;local&#x2F;kubernetes&#x2F;bin&#x2F;kubectl &#x2F;usr&#x2F;local&#x2F;bin&#x2F;kubectl</span><br><span class="line">kubectl version</span><br><span class="line">cd $HOME</span><br></pre></td></tr></table></figure>

<h3 id="ç”Ÿæˆkubeconfig"><a href="#ç”Ÿæˆkubeconfig" class="headerlink" title="ç”Ÿæˆkubeconfig"></a>ç”Ÿæˆkubeconfig</h3><blockquote>
<p>åœ¨MasterèŠ‚ç‚¹<code>ray01</code>ä¸Šè¿è¡Œï¼Œæœ€åæŠŠ kube-proxy.conf å¤åˆ¶åˆ°å…¶ä»–èŠ‚ç‚¹ï¼ˆ<code>ray02</code>å’Œ<code>ray03</code>ï¼‰</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä½¿ç”¨ TLS Bootstrapping </span><br><span class="line">export BOOTSTRAP_TOKEN&#x3D;$(head -c 16 &#x2F;dev&#x2F;urandom | od -An -t x | tr -d &#39; &#39;)</span><br><span class="line">cat &gt; &#x2F;etc&#x2F;kubernetes&#x2F;token.csv &lt;&lt;EOF</span><br><span class="line">$&#123;BOOTSTRAP_TOKEN&#125;,kubelet-bootstrap,10001,&quot;system:kubelet-bootstrap&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># åˆ›å»º kubelet bootstrapping kubeconfig</span><br><span class="line">cd &#x2F;etc&#x2F;kubernetes</span><br><span class="line">export KUBE_APISERVER&#x3D;&quot;https:&#x2F;&#x2F;172.16.242.129:6443&quot;</span><br><span class="line">kubectl config set-cluster kubernetes \</span><br><span class="line">  --certificate-authority&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --server&#x3D;$&#123;KUBE_APISERVER&#125; \</span><br><span class="line">  --kubeconfig&#x3D;kubelet-bootstrap.conf</span><br><span class="line">kubectl config set-credentials kubelet-bootstrap \</span><br><span class="line">  --token&#x3D;$&#123;BOOTSTRAP_TOKEN&#125; \</span><br><span class="line">  --kubeconfig&#x3D;kubelet-bootstrap.conf</span><br><span class="line">kubectl config set-context default \</span><br><span class="line">  --cluster&#x3D;kubernetes \</span><br><span class="line">  --user&#x3D;kubelet-bootstrap \</span><br><span class="line">  --kubeconfig&#x3D;kubelet-bootstrap.conf</span><br><span class="line">kubectl config use-context default --kubeconfig&#x3D;kubelet-bootstrap.conf</span><br><span class="line"></span><br><span class="line"># åˆ›å»º kube-controller-manager kubeconfig</span><br><span class="line">export KUBE_APISERVER&#x3D;&quot;https:&#x2F;&#x2F;172.16.242.129:6443&quot;</span><br><span class="line">kubectl config set-cluster kubernetes \</span><br><span class="line">  --certificate-authority&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --server&#x3D;$&#123;KUBE_APISERVER&#125; \</span><br><span class="line">  --kubeconfig&#x3D;kube-controller-manager.conf</span><br><span class="line">kubectl config set-credentials kube-controller-manager \</span><br><span class="line">  --client-certificate&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kube-controller-manager.pem \</span><br><span class="line">  --client-key&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kube-controller-manager-key.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --kubeconfig&#x3D;kube-controller-manager.conf</span><br><span class="line">kubectl config set-context default \</span><br><span class="line">  --cluster&#x3D;kubernetes \</span><br><span class="line">  --user&#x3D;kube-controller-manager \</span><br><span class="line">  --kubeconfig&#x3D;kube-controller-manager.conf</span><br><span class="line">kubectl config use-context default --kubeconfig&#x3D;kube-controller-manager.conf</span><br><span class="line"></span><br><span class="line"># åˆ›å»º kube-scheduler kubeconfig</span><br><span class="line">export KUBE_APISERVER&#x3D;&quot;https:&#x2F;&#x2F;172.16.242.129:6443&quot;</span><br><span class="line">kubectl config set-cluster kubernetes \</span><br><span class="line">  --certificate-authority&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --server&#x3D;$&#123;KUBE_APISERVER&#125; \</span><br><span class="line">  --kubeconfig&#x3D;kube-scheduler.conf</span><br><span class="line">kubectl config set-credentials kube-scheduler \</span><br><span class="line">  --client-certificate&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kube-scheduler.pem \</span><br><span class="line">  --client-key&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kube-scheduler-key.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --kubeconfig&#x3D;kube-scheduler.conf</span><br><span class="line">kubectl config set-context default \</span><br><span class="line">  --cluster&#x3D;kubernetes \</span><br><span class="line">  --user&#x3D;kube-scheduler \</span><br><span class="line">  --kubeconfig&#x3D;kube-scheduler.conf</span><br><span class="line">kubectl config use-context default --kubeconfig&#x3D;kube-scheduler.conf</span><br><span class="line"></span><br><span class="line"># åˆ›å»º kube-proxy kubeconfig</span><br><span class="line">export KUBE_APISERVER&#x3D;&quot;https:&#x2F;&#x2F;172.16.242.129:6443&quot;</span><br><span class="line">kubectl config set-cluster kubernetes \</span><br><span class="line">  --certificate-authority&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --server&#x3D;$&#123;KUBE_APISERVER&#125; \</span><br><span class="line">  --kubeconfig&#x3D;kube-proxy.conf</span><br><span class="line">kubectl config set-credentials kube-proxy \</span><br><span class="line">  --client-certificate&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kube-proxy.pem \</span><br><span class="line">  --client-key&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kube-proxy-key.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --kubeconfig&#x3D;kube-proxy.conf</span><br><span class="line">kubectl config set-context default \</span><br><span class="line">  --cluster&#x3D;kubernetes \</span><br><span class="line">  --user&#x3D;kube-proxy \</span><br><span class="line">  --kubeconfig&#x3D;kube-proxy.conf</span><br><span class="line">kubectl config use-context default --kubeconfig&#x3D;kube-proxy.conf</span><br><span class="line"></span><br><span class="line"># åˆ›å»º admin kubeconfig</span><br><span class="line">export KUBE_APISERVER&#x3D;&quot;https:&#x2F;&#x2F;172.16.242.129:6443&quot;</span><br><span class="line">kubectl config set-cluster kubernetes \</span><br><span class="line">  --certificate-authority&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --server&#x3D;$&#123;KUBE_APISERVER&#125; \</span><br><span class="line">  --kubeconfig&#x3D;admin.conf</span><br><span class="line">kubectl config set-credentials admin \</span><br><span class="line">  --client-certificate&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;admin.pem \</span><br><span class="line">  --client-key&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;admin-key.pem \</span><br><span class="line">  --embed-certs&#x3D;true \</span><br><span class="line">  --kubeconfig&#x3D;admin.conf</span><br><span class="line">kubectl config set-context default \</span><br><span class="line">  --cluster&#x3D;kubernetes \</span><br><span class="line">  --user&#x3D;admin \</span><br><span class="line">  --kubeconfig&#x3D;admin.conf</span><br><span class="line">kubectl config use-context default --kubeconfig&#x3D;admin.conf</span><br><span class="line"></span><br><span class="line"># æŠŠ kube-proxy.conf å¤åˆ¶åˆ°å…¶ä»–èŠ‚ç‚¹</span><br><span class="line">scp kubelet-bootstrap.conf kube-proxy.conf ray02:&#x2F;etc&#x2F;kubernetes</span><br><span class="line">scp kubelet-bootstrap.conf kube-proxy.conf ray03:&#x2F;etc&#x2F;kubernetes</span><br><span class="line">cd $HOME</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®Masterç›¸å…³ç»„ä»¶"><a href="#é…ç½®Masterç›¸å…³ç»„ä»¶" class="headerlink" title="é…ç½®Masterç›¸å…³ç»„ä»¶"></a>é…ç½®Masterç›¸å…³ç»„ä»¶</h3><blockquote>
<p>åœ¨Master<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<h4 id="é…ç½®å¯åŠ¨kube-apiserver"><a href="#é…ç½®å¯åŠ¨kube-apiserver" class="headerlink" title="é…ç½®å¯åŠ¨kube-apiserver"></a>é…ç½®å¯åŠ¨kube-apiserver</h4><blockquote>
<p>åœ¨Master<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¤åˆ¶ etcd ca</span><br><span class="line">mkdir -pv &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;etcd</span><br><span class="line">cd &#x2F;etc&#x2F;etcd&#x2F;ssl</span><br><span class="line">cp etcd-ca.pem etcd-key.pem etcd.pem &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;etcd</span><br><span class="line"></span><br><span class="line"># ç”Ÿæˆ service account key</span><br><span class="line">openssl genrsa -out &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;sa.key 2048</span><br><span class="line">openssl rsa -in &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;sa.key -pubout -out &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;sa.pub</span><br><span class="line">ls &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;sa.*</span><br><span class="line">cd $HOME</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨æ–‡ä»¶</span><br><span class="line">cat &gt;&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;kube-apiserver.service&lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;Kubernetes API Service</span><br><span class="line">Documentation&#x3D;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes</span><br><span class="line">After&#x3D;network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;config</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;apiserver</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;kubernetes&#x2F;bin&#x2F;kube-apiserver \\</span><br><span class="line">	    \$KUBE_LOGTOSTDERR \\</span><br><span class="line">	    \$KUBE_LOG_LEVEL \\</span><br><span class="line">	    \$KUBE_ETCD_ARGS \\</span><br><span class="line">	    \$KUBE_API_ADDRESS \\</span><br><span class="line">	    \$KUBE_SERVICE_ADDRESSES \\</span><br><span class="line">	    \$KUBE_ADMISSION_CONTROL \\</span><br><span class="line">	    \$KUBE_APISERVER_ARGS</span><br><span class="line">Restart&#x3D;on-failure</span><br><span class="line">Type&#x3D;notify</span><br><span class="line">LimitNOFILE&#x3D;65536</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># è¯¥é…ç½®æ–‡ä»¶åŒæ—¶è¢« kube-apiserver, kube-controller-manager</span><br><span class="line"># kube-scheduler, kubelet, kube-proxy ä½¿ç”¨</span><br><span class="line">cat &gt;&#x2F;etc&#x2F;kubernetes&#x2F;config&lt;&lt;EOF</span><br><span class="line">KUBE_LOGTOSTDERR&#x3D;&quot;--logtostderr&#x3D;true&quot;</span><br><span class="line">KUBE_LOG_LEVEL&#x3D;&quot;--v&#x3D;2&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat &gt;&#x2F;etc&#x2F;kubernetes&#x2F;apiserver&lt;&lt;EOF</span><br><span class="line">KUBE_API_ADDRESS&#x3D;&quot;--advertise-address&#x3D;172.16.242.129&quot;</span><br><span class="line">KUBE_ETCD_ARGS&#x3D;&quot;--etcd-servers&#x3D;https:&#x2F;&#x2F;172.16.242.129:2379,https:&#x2F;&#x2F;172.16.242.130:2379,https:&#x2F;&#x2F;172.16.242.131:2379 --etcd-cafile&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;etcd&#x2F;etcd-ca.pem --etcd-certfile&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;etcd&#x2F;etcd.pem --etcd-keyfile&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;etcd&#x2F;etcd-key.pem&quot;</span><br><span class="line">KUBE_SERVICE_ADDRESSES&#x3D;&quot;--service-cluster-ip-range&#x3D;10.96.0.0&#x2F;12&quot;</span><br><span class="line">KUBE_ADMISSION_CONTROL&#x3D;&quot;--enable-admission-plugins&#x3D;NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota&quot;</span><br><span class="line">KUBE_APISERVER_ARGS&#x3D;&quot;--allow-privileged&#x3D;true --authorization-mode&#x3D;Node,RBAC --enable-bootstrap-token-auth&#x3D;true --token-auth-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;token.csv --service-node-port-range&#x3D;30000-32767 --tls-cert-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kube-apiserver.pem --tls-private-key-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kube-apiserver-key.pem --client-ca-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem --service-account-key-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;sa.pub --enable-swagger-ui&#x3D;true --secure-port&#x3D;6443 --kubelet-preferred-address-types&#x3D;InternalIP,ExternalIP,Hostname --anonymous-auth&#x3D;false --kubelet-client-certificate&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;admin.pem --kubelet-client-key&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;admin-key.pem&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable kube-apiserver</span><br><span class="line">systemctl start kube-apiserver</span><br><span class="line">systemctl status kube-apiserver</span><br><span class="line"></span><br><span class="line"># æµè§ˆå™¨è®¿é—®æµ‹è¯•</span><br><span class="line">https:&#x2F;&#x2F;172.16.242.129:6443&#x2F;swaggerapi</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®å¯åŠ¨kube-controller-manager"><a href="#é…ç½®å¯åŠ¨kube-controller-manager" class="headerlink" title="é…ç½®å¯åŠ¨kube-controller-manager"></a>é…ç½®å¯åŠ¨kube-controller-manager</h4><blockquote>
<p>åœ¨Master<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¯åŠ¨æ–‡ä»¶</span><br><span class="line">cat &gt;&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;kube-controller-manager.service&lt;&lt;EOF</span><br><span class="line">Description&#x3D;Kubernetes Controller Manager</span><br><span class="line">Documentation&#x3D;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;config</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;controller-manager</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;kubernetes&#x2F;bin&#x2F;kube-controller-manager \\</span><br><span class="line">	    \$KUBE_LOGTOSTDERR \\</span><br><span class="line">	    \$KUBE_LOG_LEVEL \\</span><br><span class="line">	    \$KUBECONFIG \\</span><br><span class="line">	    \$KUBE_CONTROLLER_MANAGER_ARGS</span><br><span class="line">Restart&#x3D;on-failure</span><br><span class="line">LimitNOFILE&#x3D;65536</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat &gt;&#x2F;etc&#x2F;kubernetes&#x2F;controller-manager&lt;&lt;EOF</span><br><span class="line">KUBECONFIG&#x3D;&quot;--kubeconfig&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;kube-controller-manager.conf&quot;</span><br><span class="line">KUBE_CONTROLLER_MANAGER_ARGS&#x3D;&quot;--address&#x3D;127.0.0.1 --cluster-cidr&#x3D;10.244.0.0&#x2F;16 --cluster-name&#x3D;kubernetes --cluster-signing-cert-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem --cluster-signing-key-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca-key.pem --service-account-private-key-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;sa.key --root-ca-file&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem --leader-elect&#x3D;true --use-service-account-credentials&#x3D;true --node-monitor-grace-period&#x3D;10s --pod-eviction-timeout&#x3D;10s --allocate-node-cidrs&#x3D;true --controllers&#x3D;*,bootstrapsigner,tokencleaner&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable kube-controller-manager</span><br><span class="line">systemctl start kube-controller-manager</span><br><span class="line">systemctl status kube-controller-manager</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®å¯åŠ¨kube-scheduler"><a href="#é…ç½®å¯åŠ¨kube-scheduler" class="headerlink" title="é…ç½®å¯åŠ¨kube-scheduler"></a>é…ç½®å¯åŠ¨kube-scheduler</h4><blockquote>
<p>åœ¨Master<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat &gt;&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;kube-scheduler.service&lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;Kubernetes Scheduler Plugin</span><br><span class="line">Documentation&#x3D;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;config</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;scheduler</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;kubernetes&#x2F;bin&#x2F;kube-scheduler \\</span><br><span class="line">            \$KUBE_LOGTOSTDERR \\</span><br><span class="line">            \$KUBE_LOG_LEVEL \\</span><br><span class="line">            \$KUBECONFIG \\</span><br><span class="line">            \$KUBE_SCHEDULER_ARGS</span><br><span class="line">Restart&#x3D;on-failure</span><br><span class="line">LimitNOFILE&#x3D;65536</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat &gt;&#x2F;etc&#x2F;kubernetes&#x2F;scheduler&lt;&lt;EOF</span><br><span class="line">KUBECONFIG&#x3D;&quot;--kubeconfig&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;kube-scheduler.conf&quot;</span><br><span class="line">KUBE_SCHEDULER_ARGS&#x3D;&quot;--leader-elect&#x3D;true --address&#x3D;127.0.0.1&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable kube-scheduler</span><br><span class="line">systemctl start kube-scheduler</span><br><span class="line">systemctl status kube-scheduler</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®kubectlä½¿ç”¨"><a href="#é…ç½®kubectlä½¿ç”¨" class="headerlink" title="é…ç½®kubectlä½¿ç”¨"></a>é…ç½®kubectlä½¿ç”¨</h4><blockquote>
<p>åœ¨Master<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rm -rf $HOME&#x2F;.kube</span><br><span class="line">mkdir -p $HOME&#x2F;.kube</span><br><span class="line">sudo cp -i &#x2F;etc&#x2F;kubernetes&#x2F;admin.conf $HOME&#x2F;.kube&#x2F;config</span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME&#x2F;.kube&#x2F;config</span><br><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹ç»„ä»¶çŠ¶æ€"><a href="#æŸ¥çœ‹ç»„ä»¶çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ç»„ä»¶çŠ¶æ€"></a>æŸ¥çœ‹ç»„ä»¶çŠ¶æ€</h5><blockquote>
<p>åœ¨Master<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl get componentstatuses</span><br><span class="line"></span><br><span class="line"># è¿è¡Œç»“æœ</span><br><span class="line">NAME                 STATUS    MESSAGE              ERROR</span><br><span class="line">scheduler            Healthy   ok</span><br><span class="line">controller-manager   Healthy   ok</span><br><span class="line">etcd-1               Healthy   &#123;&quot;health&quot;: &quot;true&quot;&#125;</span><br><span class="line">etcd-2               Healthy   &#123;&quot;health&quot;: &quot;true&quot;&#125;</span><br><span class="line">etcd-0               Healthy   &#123;&quot;health&quot;: &quot;true&quot;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®kubeletä½¿ç”¨bootstrap"><a href="#é…ç½®kubeletä½¿ç”¨bootstrap" class="headerlink" title="é…ç½®kubeletä½¿ç”¨bootstrap"></a>é…ç½®kubeletä½¿ç”¨bootstrap</h4><blockquote>
<p>åœ¨Master<code>ray01</code>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å°† bootstrap token æ–‡ä»¶ä¸­çš„ kubelet-bootstrap ç”¨æˆ·èµ‹äºˆ system:node-bootstrapper cluster è§’è‰²</span><br><span class="line">kubectl create clusterrolebinding kubelet-bootstrap \</span><br><span class="line">--clusterrole&#x3D;system:node-bootstrapper \</span><br><span class="line">--user&#x3D;kubelet-bootstrap</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®nodeç›¸å…³ç»„ä»¶"><a href="#é…ç½®nodeç›¸å…³ç»„ä»¶" class="headerlink" title="é…ç½®nodeç›¸å…³ç»„ä»¶"></a>é…ç½®nodeç›¸å…³ç»„ä»¶</h3><blockquote>
<p>å¦‚ä¸‹æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<h4 id="å®‰è£…cni"><a href="#å®‰è£…cni" class="headerlink" title="å®‰è£…cni"></a>å®‰è£…cni</h4><blockquote>
<p>å¦‚ä¸‹æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å®‰è£… cni</span><br><span class="line"># ç™¾åº¦äº‘é“¾æ¥ï¼šhttps:&#x2F;&#x2F;pan.baidu.com&#x2F;s&#x2F;1-PputObLs5jouXLnuBCI6Q å¯†ç ï¼štzqm</span><br><span class="line">cd &#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line">wget https:&#x2F;&#x2F;github.com&#x2F;containernetworking&#x2F;plugins&#x2F;releases&#x2F;download&#x2F;v0.7.1&#x2F;cni-plugins-amd64-v0.7.1.tgz</span><br><span class="line"></span><br><span class="line"># æ³¨æ„</span><br><span class="line"># ä¸‹è½½å®Œæˆåå¯ä»¥scpåˆ°å…¶ä»–èŠ‚ç‚¹</span><br><span class="line"># scp cni-plugins-amd64-v0.7.1.tgz ray02:&#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line"># scp cni-plugins-amd64-v0.7.1.tgz ray03:&#x2F;server&#x2F;software&#x2F;k8s</span><br><span class="line"></span><br><span class="line">mkdir -pv &#x2F;opt&#x2F;cni&#x2F;bin</span><br><span class="line">tar xf cni-plugins-amd64-v0.7.1.tgz -C &#x2F;opt&#x2F;cni&#x2F;bin</span><br><span class="line">ls -l &#x2F;opt&#x2F;cni&#x2F;bin</span><br><span class="line">cd $HOME</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®å¯åŠ¨kubelet"><a href="#é…ç½®å¯åŠ¨kubelet" class="headerlink" title="é…ç½®å¯åŠ¨kubelet"></a>é…ç½®å¯åŠ¨kubelet</h4><blockquote>
<p>å¦‚ä¸‹æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¯åŠ¨æ–‡ä»¶</span><br><span class="line">mkdir -pv &#x2F;data&#x2F;kubelet</span><br><span class="line">cat &gt;&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;kubelet.service&lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;Kubernetes Kubelet Server</span><br><span class="line">Documentation&#x3D;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes</span><br><span class="line">After&#x3D;docker.service</span><br><span class="line">Requires&#x3D;docker.service</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">WorkingDirectory&#x3D;&#x2F;data&#x2F;kubelet</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;config</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;kubelet</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;kubernetes&#x2F;bin&#x2F;kubelet \\</span><br><span class="line">            \$KUBE_LOGTOSTDERR \\</span><br><span class="line">            \$KUBE_LOG_LEVEL \\</span><br><span class="line">            \$KUBELET_CONFIG \\</span><br><span class="line">            \$KUBELET_HOSTNAME \\</span><br><span class="line">            \$KUBELET_POD_INFRA_CONTAINER \\</span><br><span class="line">            \$KUBELET_ARGS</span><br><span class="line">Restart&#x3D;on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cat &gt;&#x2F;etc&#x2F;kubernetes&#x2F;config&lt;&lt;EOF</span><br><span class="line">KUBE_LOGTOSTDERR&#x3D;&quot;--logtostderr&#x3D;true&quot;</span><br><span class="line">KUBE_LOG_LEVEL&#x3D;&quot;--v&#x3D;2&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># æ³¨æ„ä¿®æ”¹ç›¸å…³ip</span><br><span class="line">cat &gt;&#x2F;etc&#x2F;kubernetes&#x2F;kubelet&lt;&lt;EOF</span><br><span class="line">KUBELET_HOSTNAME&#x3D;&quot;--hostname-override&#x3D;172.16.242.129&quot;</span><br><span class="line">KUBELET_POD_INFRA_CONTAINER&#x3D;&quot;--pod-infra-container-image&#x3D;registry.cn-hangzhou.aliyuncs.com&#x2F;google_containers&#x2F;pause-amd64:3.1&quot;</span><br><span class="line">KUBELET_CONFIG&#x3D;&quot;--config&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;kubelet-config.yml&quot;</span><br><span class="line">KUBELET_ARGS&#x3D;&quot;--bootstrap-kubeconfig&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;kubelet-bootstrap.conf --kubeconfig&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;kubelet.conf --cert-dir&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;pki --network-plugin&#x3D;cni --cni-bin-dir&#x3D;&#x2F;opt&#x2F;cni&#x2F;bin --cni-conf-dir&#x3D;&#x2F;etc&#x2F;cni&#x2F;net.d&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># æ³¨æ„ä¿®æ”¹ç›¸å…³ip</span><br><span class="line"># ray01 ray02 ray03 ä½¿ç”¨å„è‡ªip</span><br><span class="line">cat &gt;&#x2F;etc&#x2F;kubernetes&#x2F;kubelet-config.yml&lt;&lt;EOF</span><br><span class="line">kind: KubeletConfiguration</span><br><span class="line">apiVersion: kubelet.config.k8s.io&#x2F;v1beta1</span><br><span class="line">address: 172.16.242.129</span><br><span class="line">port: 10250</span><br><span class="line">cgroupDriver: cgroupfs</span><br><span class="line">clusterDNS:</span><br><span class="line">  - 10.96.0.10</span><br><span class="line">clusterDomain: cluster.local.</span><br><span class="line">hairpinMode: promiscuous-bridge</span><br><span class="line">serializeImagePulls: false</span><br><span class="line">authentication:</span><br><span class="line">  x509:</span><br><span class="line">    clientCAFile: &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;ca.pem</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable kubelet</span><br><span class="line">systemctl start kubelet</span><br><span class="line">systemctl status kubelet</span><br></pre></td></tr></table></figure>

<h4 id="é€šè¿‡è¯ä¹¦è¯·æ±‚"><a href="#é€šè¿‡è¯ä¹¦è¯·æ±‚" class="headerlink" title="é€šè¿‡è¯ä¹¦è¯·æ±‚"></a>é€šè¿‡è¯ä¹¦è¯·æ±‚</h4><blockquote>
<p>å¦‚ä¸‹æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æ“ä½œï¼Œå³åœ¨é…ç½®äº†<code>kubectl</code>çš„èŠ‚ç‚¹ä¸Šæ‰§è¡Œå¦‚ä¸‹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æŸ¥çœ‹</span><br><span class="line">kubectl get csr</span><br><span class="line"></span><br><span class="line"># é€šè¿‡</span><br><span class="line">kubectl certificate approve node-csr-Yiiv675wUCvQl3HH11jDr0cC9p3kbrXWrxvG3EjWGoE</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹èŠ‚ç‚¹</span><br><span class="line"># æ­¤æ—¶èŠ‚ç‚¹çŠ¶æ€ä¸º NotReady</span><br><span class="line">kubectl get nodes</span><br><span class="line"></span><br><span class="line"># åœ¨nodeèŠ‚ç‚¹æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶</span><br><span class="line">ls -l &#x2F;etc&#x2F;kubernetes&#x2F;kubelet.conf</span><br><span class="line">ls -l &#x2F;etc&#x2F;kubernetes&#x2F;pki&#x2F;kubelet*</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®å¯åŠ¨kube-proxy"><a href="#é…ç½®å¯åŠ¨kube-proxy" class="headerlink" title="é…ç½®å¯åŠ¨kube-proxy"></a>é…ç½®å¯åŠ¨kube-proxy</h4><blockquote>
<p>å¦‚ä¸‹æ“ä½œåœ¨æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å®‰è£…</span><br><span class="line">yum install -y conntrack-tools</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨æ–‡ä»¶</span><br><span class="line">cat &gt;&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;kube-proxy.service&lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;Kubernetes Kube-Proxy Server</span><br><span class="line">Documentation&#x3D;https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes</span><br><span class="line">After&#x3D;network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;config</span><br><span class="line">EnvironmentFile&#x3D;-&#x2F;etc&#x2F;kubernetes&#x2F;proxy</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;kubernetes&#x2F;bin&#x2F;kube-proxy \\</span><br><span class="line">	    \$KUBE_LOGTOSTDERR \\</span><br><span class="line">	    \$KUBE_LOG_LEVEL \\</span><br><span class="line">	    \$KUBECONFIG \\</span><br><span class="line">	    \$KUBE_PROXY_ARGS</span><br><span class="line">Restart&#x3D;on-failure</span><br><span class="line">LimitNOFILE&#x3D;65536</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># æ³¨æ„ä¿®æ”¹ç›¸å…³ip</span><br><span class="line"># ray01 ray02 ray03 ä½¿ç”¨å„è‡ªip</span><br><span class="line"># ç”±äº 1.11.0 ipvs åœ¨centos7ä¸Šæœ‰bugæ— æ³•æ­£å¸¸ä½¿ç”¨</span><br><span class="line"># å®éªŒä½¿ç”¨ iptables æ¨¡å¼</span><br><span class="line"># ä»¥åç‰ˆæœ¬å¯ä»¥ä½¿ç”¨ ipvs æ¨¡å¼</span><br><span class="line">cat &gt;&#x2F;etc&#x2F;kubernetes&#x2F;proxy&lt;&lt;EOF</span><br><span class="line">KUBECONFIG&#x3D;&quot;--kubeconfig&#x3D;&#x2F;etc&#x2F;kubernetes&#x2F;kube-proxy.conf&quot;</span><br><span class="line">KUBE_PROXY_ARGS&#x3D;&quot;--bind-address&#x3D;172.16.242.129 --proxy-mode&#x3D;iptables --hostname-override&#x3D;172.16.242.129 --cluster-cidr&#x3D;10.244.0.0&#x2F;16&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable kube-proxy</span><br><span class="line">systemctl start kube-proxy</span><br><span class="line">systemctl status kube-proxy</span><br></pre></td></tr></table></figure>

<h3 id="è®¾ç½®é›†ç¾¤è§’è‰²"><a href="#è®¾ç½®é›†ç¾¤è§’è‰²" class="headerlink" title="è®¾ç½®é›†ç¾¤è§’è‰²"></a>è®¾ç½®é›†ç¾¤è§’è‰²</h3><blockquote>
<p>åœ¨MasterèŠ‚ç‚¹<code>ray01</code>è¿è¡Œä»¥ä¸‹å‘½ä»¤</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è®¾ç½® ray01 ä¸º master</span><br><span class="line">kubectl label nodes 172.16.242.129 node-role.kubernetes.io&#x2F;master&#x3D;</span><br><span class="line"></span><br><span class="line"># è®¾ç½® ray02 ray03 ä¸º node</span><br><span class="line">kubectl label nodes 172.16.242.130 node-role.kubernetes.io&#x2F;node&#x3D;</span><br><span class="line">kubectl label nodes 172.16.242.131 node-role.kubernetes.io&#x2F;node&#x3D;</span><br><span class="line"></span><br><span class="line"># è®¾ç½® master ä¸€èˆ¬æƒ…å†µä¸‹ä¸æ¥å—è´Ÿè½½</span><br><span class="line">kubectl taint nodes 172.16.242.129 node-role.kubernetes.io&#x2F;master&#x3D;true:NoSchedule</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹èŠ‚ç‚¹</span><br><span class="line"># æ­¤æ—¶èŠ‚ç‚¹çŠ¶æ€ä¸º NotReady</span><br><span class="line">kubectl get no</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®ä½¿ç”¨flannelç½‘ç»œ"><a href="#é…ç½®ä½¿ç”¨flannelç½‘ç»œ" class="headerlink" title="é…ç½®ä½¿ç”¨flannelç½‘ç»œ"></a>é…ç½®ä½¿ç”¨flannelç½‘ç»œ</h3><blockquote>
<p>åœ¨MasterèŠ‚ç‚¹<code>ray01</code>æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸‹è½½é…ç½®</span><br><span class="line">mkdir flannel &amp;&amp; cd flannel</span><br><span class="line">wget https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;coreos&#x2F;flannel&#x2F;v0.10.0&#x2F;Documentation&#x2F;kube-flannel.yml</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹é…ç½®</span><br><span class="line"># æ­¤å¤„çš„ipé…ç½®è¦ä¸ä¸Šé¢kubeadmçš„pod-networkä¸€è‡´</span><br><span class="line">  net-conf.json: |</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Network&quot;: &quot;10.244.0.0&#x2F;16&quot;,</span><br><span class="line">      &quot;Backend&quot;: &#123;</span><br><span class="line">        &quot;Type&quot;: &quot;vxlan&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹é•œåƒ</span><br><span class="line">image: registry.cn-shanghai.aliyuncs.com&#x2F;gcr-k8s&#x2F;flannel:v0.10.0-amd64</span><br><span class="line"></span><br><span class="line"># å¦‚æœNodeæœ‰å¤šä¸ªç½‘å¡çš„è¯ï¼Œå‚è€ƒflannel issues 39701ï¼Œ</span><br><span class="line"># https:&#x2F;&#x2F;github.com&#x2F;kubernetes&#x2F;kubernetes&#x2F;issues&#x2F;39701</span><br><span class="line"># ç›®å‰éœ€è¦åœ¨kube-flannel.ymlä¸­ä½¿ç”¨--ifaceå‚æ•°æŒ‡å®šé›†ç¾¤ä¸»æœºå†…ç½‘ç½‘å¡çš„åç§°ï¼Œ</span><br><span class="line"># å¦åˆ™å¯èƒ½ä¼šå‡ºç°dnsæ— æ³•è§£æã€‚å®¹å™¨æ— æ³•é€šä¿¡çš„æƒ…å†µï¼Œéœ€è¦å°†kube-flannel.ymlä¸‹è½½åˆ°æœ¬åœ°ï¼Œ</span><br><span class="line"># flanneldå¯åŠ¨å‚æ•°åŠ ä¸Š--iface&#x3D;&lt;iface-name&gt;</span><br><span class="line">    containers:</span><br><span class="line">      - name: kube-flannel</span><br><span class="line">        image: registry.cn-shanghai.aliyuncs.com&#x2F;gcr-k8s&#x2F;flannel:v0.10.0-amd64</span><br><span class="line">        command:</span><br><span class="line">        - &#x2F;opt&#x2F;bin&#x2F;flanneld</span><br><span class="line">        args:</span><br><span class="line">        - --ip-masq</span><br><span class="line">        - --kube-subnet-mgr</span><br><span class="line">        - --iface&#x3D;eth1</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">kubectl apply -f kube-flannel.yml</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹</span><br><span class="line">kubectl get pods -n kube-system</span><br><span class="line">kubectl get svc -n kube-system</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€</span><br><span class="line"># å½“ flannel pod å…¨éƒ¨å¯åŠ¨ä¹‹åï¼ŒèŠ‚ç‚¹çŠ¶æ€ä¸º Ready</span><br><span class="line">kubectl get no</span><br><span class="line"></span><br><span class="line"># è¿è¡Œç»“æœ</span><br><span class="line">NAME             STATUS    ROLES     AGE       VERSION</span><br><span class="line">172.16.242.129   Ready     master    5h        v1.11.0</span><br><span class="line">172.16.242.130   Ready     node      4h        v1.11.0</span><br><span class="line">172.16.242.131   Ready     node      4h        v1.11.0</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®ä½¿ç”¨coredns"><a href="#é…ç½®ä½¿ç”¨coredns" class="headerlink" title="é…ç½®ä½¿ç”¨coredns"></a>é…ç½®ä½¿ç”¨coredns</h3><blockquote>
<p>åœ¨MasterèŠ‚ç‚¹<code>ray01</code>æ“ä½œ</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å®‰è£…</span><br><span class="line"># 10.96.0.10 kubeletä¸­é…ç½®çš„dns</span><br><span class="line">cd $HOME &amp;&amp; mkdir coredns &amp;&amp; cd coredns</span><br><span class="line">wget https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;coredns&#x2F;deployment&#x2F;master&#x2F;kubernetes&#x2F;coredns.yaml.sed</span><br><span class="line">wget https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;coredns&#x2F;deployment&#x2F;master&#x2F;kubernetes&#x2F;deploy.sh</span><br><span class="line">chmod +x deploy.sh</span><br><span class="line">.&#x2F;deploy.sh -i 10.96.0.10 &gt; coredns.yml</span><br><span class="line">kubectl apply -f coredns.yml</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹</span><br><span class="line">kubectl get pods -n kube-system</span><br><span class="line">kubectl get svc -n kube-system</span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl run nginx --replicas&#x3D;2 --image&#x3D;nginx:alpine --port&#x3D;80</span><br><span class="line">kubectl expose deployment nginx --type&#x3D;NodePort --name&#x3D;example-service-nodeport</span><br><span class="line">kubectl expose deployment nginx --name&#x3D;example-service</span><br><span class="line">kubectl scale --replicas&#x3D;3 deployment&#x2F;nginx</span><br></pre></td></tr></table></figure>

<h3 id="æŸ¥çœ‹çŠ¶æ€"><a href="#æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹çŠ¶æ€"></a>æŸ¥çœ‹çŠ¶æ€</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl get deploy -o wide</span><br><span class="line">kubectl get pods -o wide</span><br><span class="line">kubectl get svc -o wide</span><br><span class="line">kubectl describe svc example-service</span><br></pre></td></tr></table></figure>

<h3 id="DNSè§£æ"><a href="#DNSè§£æ" class="headerlink" title="DNSè§£æ"></a>DNSè§£æ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl run curl --image&#x3D;radial&#x2F;busyboxplus:curl -i --tty</span><br><span class="line">nslookup kubernetes</span><br><span class="line">nslookup example-service</span><br><span class="line">curl example-service</span><br></pre></td></tr></table></figure>

<h3 id="è®¿é—®æµ‹è¯•"><a href="#è®¿é—®æµ‹è¯•" class="headerlink" title="è®¿é—®æµ‹è¯•"></a>è®¿é—®æµ‹è¯•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 10.96.59.56 ä¸ºæŸ¥çœ‹svcæ—¶è·å–åˆ°çš„clusterip</span><br><span class="line">curl &quot;10.107.91.153:80&quot;</span><br><span class="line"></span><br><span class="line"># 32223 ä¸ºæŸ¥çœ‹svcæ—¶è·å–åˆ°çš„ nodeport</span><br><span class="line">http:&#x2F;&#x2F;172.16.242.129:32223&#x2F;</span><br><span class="line">http:&#x2F;&#x2F;172.16.242.130:32223&#x2F;</span><br><span class="line">http:&#x2F;&#x2F;172.16.242.131:32223&#x2F;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸…ç†"><a href="#æ¸…ç†" class="headerlink" title="æ¸…ç†"></a>æ¸…ç†</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl delete svc example-service example-service-nodeport</span><br><span class="line">kubectl delete deploy nginx curl</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://juejin.im/post/5b45cea9f265da0f652370ce#heading-25" target="_blank" rel="noopener external nofollow noreferrer">centos7çº¯æ‰‹åŠ¨å®‰è£…kubernetes-v1.11ç‰ˆæœ¬</a></p>
]]></content>
      <categories>
        <category>Kubernetes</category>
      </categories>
      <tags>
        <tag>Kubernetes</tag>
      </tags>
  </entry>
  <entry>
    <title>RabbitMQå‘½ä»¤è¡Œ</title>
    <url>/articles/2898763363.html</url>
    <content><![CDATA[<h2 id="Dockerè¿è¡ŒRabbitMQ"><a href="#Dockerè¿è¡ŒRabbitMQ" class="headerlink" title="Dockerè¿è¡ŒRabbitMQ"></a>Dockerè¿è¡ŒRabbitMQ</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run -d --name rabbitmq -v $PWD&#x2F;:&#x2F;var&#x2F;lib&#x2F;rabbitmq --hostname my-rabbit -p 5672:5672 -p 4369:4369 -p 8181:15672 rabbitmq:3-management</span><br><span class="line">guest:guest</span><br></pre></td></tr></table></figure>

<ul>
<li>docker exec -ti <rabbitmq> /bin/bash</li>
<li>rabbitmqctl trace_on</li>
<li>rabbitmq-plugins enable rabbitmq_tracing</li>
<li>exit</li>
</ul>
<a id="more"></a>

<h2 id="RabbitMQå‘½ä»¤"><a href="#RabbitMQå‘½ä»¤" class="headerlink" title="RabbitMQå‘½ä»¤"></a>RabbitMQå‘½ä»¤</h2><p><a href="https://gitee.com/wisecloud/xing/blob/master/doc/starting_cn.md" target="_blank" rel="noopener external nofollow noreferrer">wise2cé“¾æ¥</a></p>
<h3 id="æŸ¥çœ‹æ‰€æœ‰é˜Ÿåˆ—"><a href="#æŸ¥çœ‹æ‰€æœ‰é˜Ÿåˆ—" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰é˜Ÿåˆ—"></a>æŸ¥çœ‹æ‰€æœ‰é˜Ÿåˆ—</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rabbitmqctrl list_queues</span><br></pre></td></tr></table></figure>

<h3 id="æ¸…é™¤å‘½ä»¤"><a href="#æ¸…é™¤å‘½ä»¤" class="headerlink" title="æ¸…é™¤å‘½ä»¤"></a>æ¸…é™¤å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rabbitmqctl stop_app</span><br><span class="line">rabbitmqctl reset</span><br><span class="line">rabbitmqctl start_app</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ ç”¨æˆ·ï¼Œç»™æƒé™"><a href="#æ·»åŠ ç”¨æˆ·ï¼Œç»™æƒé™" class="headerlink" title="æ·»åŠ ç”¨æˆ·ï¼Œç»™æƒé™"></a>æ·»åŠ ç”¨æˆ·ï¼Œç»™æƒé™</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rabbitmqctl list_users</span><br><span class="line">rabbitmqctl add_user admin admin</span><br><span class="line">rabbitmqctl set_user_tags admin administrator</span><br><span class="line">rabbitmqctl set_permissions -p &quot;&#x2F;&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br><span class="line">raabitmqctl list_users</span><br></pre></td></tr></table></figure>

<h3 id="Install-rabbitmqadmin"><a href="#Install-rabbitmqadmin" class="headerlink" title="Install rabbitmqadmin"></a>Install rabbitmqadmin</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cp -a &#x2F;var&#x2F;lib&#x2F;rabbitmq&#x2F;mnesia&#x2F;rabbit@my-rabbit-plugins-expand&#x2F;rabbitmq_management-3.6.12&#x2F;priv&#x2F;www&#x2F;cli&#x2F;rabbitmqadmin &#x2F;usr&#x2F;sbin&#x2F;rabbitmqadmin</span><br><span class="line">chmod +x &#x2F;usr&#x2F;sbin&#x2F;rabbitmqadmin</span><br><span class="line">apt-get  update &amp;&amp; apt-get install python -y</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤æŒ‡å®šçš„mq"><a href="#åˆ é™¤æŒ‡å®šçš„mq" class="headerlink" title="åˆ é™¤æŒ‡å®šçš„mq"></a>åˆ é™¤æŒ‡å®šçš„mq</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rabbitmqadmin  list queues | grep ingress | awk &#39;&#123;print $2&#125;&#39; | xargs -I qn rabbitmqadmin delete queue name&#x3D;qn</span><br><span class="line">rabbitmqadmin  list queues</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>RabbitMQ</category>
      </categories>
      <tags>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>Pipä½¿ç”¨</title>
    <url>/articles/4136195967.html</url>
    <content><![CDATA[<h2 id="Pip-å®‰è£…"><a href="#Pip-å®‰è£…" class="headerlink" title="Pip å®‰è£…"></a>Pip å®‰è£…</h2><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å®‰è£…epelæ‰©å±•æº</span><br><span class="line">yum -y install epel-release</span><br><span class="line"></span><br><span class="line"># ç„¶åå†å®‰è£…pip</span><br><span class="line">yum -y install python-pip</span><br><span class="line"></span><br><span class="line"># æ›´æ–°pip</span><br><span class="line">pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h2 id="Pipæ›´æ¢å›½å†…é•œåƒæº"><a href="#Pipæ›´æ¢å›½å†…é•œåƒæº" class="headerlink" title="Pipæ›´æ¢å›½å†…é•œåƒæº"></a>Pipæ›´æ¢å›½å†…é•œåƒæº</h2><p>é˜¿é‡Œäº‘ <a href="http://mirrors.aliyun.com/pypi/simple/" target="_blank" rel="noopener external nofollow noreferrer">http://mirrors.aliyun.com/pypi/simple/</a><br>ä¸­å›½ç§‘æŠ€å¤§å­¦ <a href="https://pypi.mirrors.ustc.edu.cn/simple/" target="_blank" rel="noopener external nofollow noreferrer">https://pypi.mirrors.ustc.edu.cn/simple/</a><br>è±†ç“£(douban) <a href="http://pypi.douban.com/simple/" target="_blank" rel="noopener external nofollow noreferrer">http://pypi.douban.com/simple/</a><br>æ¸…åå¤§å­¦ <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" rel="noopener external nofollow noreferrer">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ <a href="http://pypi.mirrors.ustc.edu.cn/simple/" target="_blank" rel="noopener external nofollow noreferrer">http://pypi.mirrors.ustc.edu.cn/simple/</a></p>
<h3 id="Pipæºé…ç½®æ–‡ä»¶å­˜æ”¾è·¯å¾„"><a href="#Pipæºé…ç½®æ–‡ä»¶å­˜æ”¾è·¯å¾„" class="headerlink" title="Pipæºé…ç½®æ–‡ä»¶å­˜æ”¾è·¯å¾„"></a>Pipæºé…ç½®æ–‡ä»¶å­˜æ”¾è·¯å¾„</h3><p>ä¸åŒç³»ç»Ÿçš„é…ç½®è·¯å¾„å¯èƒ½ä¸åŒ</p>
<h4 id="Linux-Unix"><a href="#Linux-Unix" class="headerlink" title="Linux/Unix"></a>Linux/Unix</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;etc&#x2F;pip.con</span><br><span class="line">~&#x2F;.pip&#x2F;pip.conf  ï¼ˆæ¯ä¸€ä¸ªæˆ‘éƒ½æ‰¾äº†éƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥æˆ‘æ˜¯åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­åˆ›å»ºçš„pip.confæ–‡ä»¶ï¼‰</span><br><span class="line">~&#x2F;.config&#x2F;pip&#x2F;pip.conf</span><br></pre></td></tr></table></figure>

<h4 id="Mac-OS"><a href="#Mac-OS" class="headerlink" title="Mac OS"></a>Mac OS</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">~&#x2F;Library&#x2F;Application Support&#x2F;pip&#x2F;pip.conf</span><br><span class="line">~&#x2F;.pip&#x2F;pip.conf</span><br><span class="line">&#x2F;Library&#x2F;Application Support&#x2F;pip&#x2F;pip.conf</span><br></pre></td></tr></table></figure>

<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">%APPDATA%\pip\pip.ini</span><br><span class="line">%HOME%\pip\pip.ini</span><br><span class="line">C:\Documents and Settings\All Users\Application Data\PyPA\pip\pip.conf (Windows XP)</span><br><span class="line">C:\ProgramData\PyPA\pip\pip.conf (Windows 7åŠä»¥å)</span><br></pre></td></tr></table></figure>



<h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><h4 id="ä¸´æ—¶ä½¿ç”¨"><a href="#ä¸´æ—¶ä½¿ç”¨" class="headerlink" title="ä¸´æ—¶ä½¿ç”¨"></a>ä¸´æ—¶ä½¿ç”¨</h4><p>å¯ä»¥åœ¨ä½¿ç”¨pipçš„æ—¶å€™åœ¨åé¢åŠ ä¸Š-iå‚æ•°ï¼ŒæŒ‡å®špipæº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install scrapy -iÂ &lt;https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple&gt;</span><br></pre></td></tr></table></figure>



<h4 id="æ°¸ä¹…ä¿®æ”¹"><a href="#æ°¸ä¹…ä¿®æ”¹" class="headerlink" title="æ°¸ä¹…ä¿®æ”¹"></a>æ°¸ä¹…ä¿®æ”¹</h4><p>å¦‚æœæ²¡æœ‰éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªï¼Œä¸€èˆ¬ä½¿ç”¨è¯¥è·¯å¾„<code>~/.pip/pip.conf</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url &#x3D; http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F; #è±†ç“£æºï¼Œå¯ä»¥æ¢æˆå…¶ä»–çš„æº         </span><br><span class="line">disable-pip-version-check &#x3D; false          #å¦‚æœä¸ºtrueåˆ™å–æ¶ˆpipç‰ˆæœ¬æ£€æŸ¥ï¼Œæ’é™¤æ¯æ¬¡éƒ½æŠ¥æœ€æ–°çš„pip</span><br><span class="line">timeout &#x3D; 120</span><br><span class="line"></span><br><span class="line">[install]</span><br><span class="line">trusted-host &#x3D; mirrors.aliyun.com	#æ·»åŠ è±†ç“£æºä¸ºå¯ä¿¡ä¸»æœºï¼Œè¦ä¸ç„¶å¯èƒ½æŠ¥é”™</span><br></pre></td></tr></table></figure>



<h2 id="Pipä½¿ç”¨è¯¦è§£"><a href="#Pipä½¿ç”¨è¯¦è§£" class="headerlink" title="Pipä½¿ç”¨è¯¦è§£"></a>Pipä½¿ç”¨è¯¦è§£</h2><h3 id="Pipå®‰è£…åŒ…"><a href="#Pipå®‰è£…åŒ…" class="headerlink" title="Pipå®‰è£…åŒ…"></a>Pipå®‰è£…åŒ…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># pip install SomePackage</span><br><span class="line">  [...]</span><br><span class="line">  Successfully installed SomePackage</span><br></pre></td></tr></table></figure>



<h3 id="PipæŸ¥çœ‹å·²å®‰è£…çš„åŒ…"><a href="#PipæŸ¥çœ‹å·²å®‰è£…çš„åŒ…" class="headerlink" title="PipæŸ¥çœ‹å·²å®‰è£…çš„åŒ…"></a>PipæŸ¥çœ‹å·²å®‰è£…çš„åŒ…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># pip show --files SomePackage</span><br><span class="line">  Name: SomePackage</span><br><span class="line">  Version: 1.0</span><br><span class="line">  Location: &#x2F;my&#x2F;env&#x2F;lib&#x2F;pythonx.x&#x2F;site-packages</span><br><span class="line">  Files:</span><br><span class="line">   ..&#x2F;somepackage&#x2F;__init__.py</span><br><span class="line">   [...]</span><br></pre></td></tr></table></figure>



<h3 id="Pipæ£€æŸ¥å“ªäº›åŒ…éœ€è¦æ›´æ–°"><a href="#Pipæ£€æŸ¥å“ªäº›åŒ…éœ€è¦æ›´æ–°" class="headerlink" title="Pipæ£€æŸ¥å“ªäº›åŒ…éœ€è¦æ›´æ–°"></a>Pipæ£€æŸ¥å“ªäº›åŒ…éœ€è¦æ›´æ–°</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># pip list --outdated</span><br><span class="line">  SomePackage (Current: 1.0 Latest: 2.0)</span><br></pre></td></tr></table></figure>



<h3 id="Pipå‡çº§åŒ…"><a href="#Pipå‡çº§åŒ…" class="headerlink" title="Pipå‡çº§åŒ…"></a>Pipå‡çº§åŒ…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># pip install --upgrade SomePackage</span><br><span class="line">  [...]</span><br><span class="line">  Found existing installation: SomePackage 1.0</span><br><span class="line">  Uninstalling SomePackage:</span><br><span class="line">  Successfully uninstalled SomePackage</span><br><span class="line">  Running setup.py install for SomePackage</span><br><span class="line">  Successfully installed SomePackage</span><br></pre></td></tr></table></figure>



<h3 id="Pipå¸è½½åŒ…"><a href="#Pipå¸è½½åŒ…" class="headerlink" title="Pipå¸è½½åŒ…"></a>Pipå¸è½½åŒ…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pip uninstall SomePackage</span><br><span class="line">  Uninstalling SomePackage:</span><br><span class="line">    &#x2F;my&#x2F;env&#x2F;lib&#x2F;pythonx.x&#x2F;site-packages&#x2F;somepackage</span><br><span class="line">  Proceed (y&#x2F;n)? y</span><br><span class="line">  Successfully uninstalled SomePackage</span><br></pre></td></tr></table></figure>



<h3 id="Pipå‚æ•°è§£é‡Š"><a href="#Pipå‚æ•°è§£é‡Š" class="headerlink" title="Pipå‚æ•°è§£é‡Š"></a>Pipå‚æ•°è§£é‡Š</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># pip --help</span><br><span class="line"> </span><br><span class="line">Usage:   </span><br><span class="line">  pip &lt;command&gt; [options]</span><br><span class="line"> </span><br><span class="line">Commands:</span><br><span class="line">  install                     å®‰è£…åŒ….</span><br><span class="line">  uninstall                   å¸è½½åŒ….</span><br><span class="line">  freeze                      æŒ‰ç€ä¸€å®šæ ¼å¼è¾“å‡ºå·²å®‰è£…åŒ…åˆ—è¡¨</span><br><span class="line">  list                        åˆ—å‡ºå·²å®‰è£…åŒ….</span><br><span class="line">  show                        æ˜¾ç¤ºåŒ…è¯¦ç»†ä¿¡æ¯.</span><br><span class="line">  search                      æœç´¢åŒ…ï¼Œç±»ä¼¼yumé‡Œçš„search.</span><br><span class="line">  wheel                       Build wheels from your requirements.</span><br><span class="line">  zip                         ä¸æ¨è. Zip individual packages.</span><br><span class="line">  unzip                       ä¸æ¨è. Unzip individual packages.</span><br><span class="line">  bundle                      ä¸æ¨è. Create pybundles.</span><br><span class="line">  help                        å½“å‰å¸®åŠ©.</span><br><span class="line"> </span><br><span class="line">General Options:</span><br><span class="line">  -h, --help                  æ˜¾ç¤ºå¸®åŠ©.</span><br><span class="line">  -v, --verbose               æ›´å¤šçš„è¾“å‡ºï¼Œæœ€å¤šå¯ä»¥ä½¿ç”¨3æ¬¡</span><br><span class="line">  -V, --version               ç°å®ç‰ˆæœ¬ä¿¡æ¯ç„¶åé€€å‡º.</span><br><span class="line">  -q, --quiet                 æœ€å°‘çš„è¾“å‡º.</span><br><span class="line">  --log-file &lt;path&gt;           è¦†ç›–çš„æ–¹å¼è®°å½•verboseé”™è¯¯æ—¥å¿—ï¼Œé»˜è®¤æ–‡ä»¶ï¼š&#x2F;root&#x2F;.pip&#x2F;pip.log</span><br><span class="line">  --log &lt;path&gt;                ä¸è¦†ç›–è®°å½•verboseè¾“å‡ºçš„æ—¥å¿—.</span><br><span class="line">  --proxy &lt;proxy&gt;             Specify a proxy in the form [user:passwd@]proxy.server:port.</span><br><span class="line">  --timeout &lt;sec&gt;             è¿æ¥è¶…æ—¶æ—¶é—´ (é»˜è®¤15ç§’).</span><br><span class="line">  --exists-action &lt;action&gt;    Default action when a path already exists: (s)witch, (i)gnore, (w)ipe, (b)ackup.</span><br><span class="line">  --cert &lt;path&gt;               è¯ä¹¦.</span><br></pre></td></tr></table></figure>



<h3 id="éœ€æ±‚æ–‡ä»¶requirements-txtçš„åˆ›å»ºåŠä½¿ç”¨"><a href="#éœ€æ±‚æ–‡ä»¶requirements-txtçš„åˆ›å»ºåŠä½¿ç”¨" class="headerlink" title="éœ€æ±‚æ–‡ä»¶requirements.txtçš„åˆ›å»ºåŠä½¿ç”¨"></a>éœ€æ±‚æ–‡ä»¶requirements.txtçš„åˆ›å»ºåŠä½¿ç”¨</h3><p><strong>å‚è€ƒï¼š<a href="https://blog.csdn.net/loyachen/article/details/52028825" target="_blank" rel="noopener external nofollow noreferrer">pythonç¬”è®°â€”éœ€æ±‚æ–‡ä»¶requirements.txtçš„åˆ›å»ºåŠä½¿ç”¨</a></strong></p>
<p>pythoné¡¹ç›®ä¸­å¿…é¡»åŒ…å«ä¸€ä¸ª requirements.txt æ–‡ä»¶ï¼Œç”¨äºè®°å½•æ‰€æœ‰ä¾èµ–åŒ…åŠå…¶ç²¾ç¡®çš„ç‰ˆæœ¬å·ã€‚ä»¥ä¾¿æ–°ç¯å¢ƒéƒ¨ç½²ã€‚</p>
<h4 id="åœ¨ç¯å¢ƒä¸­ç”Ÿæˆrequirements-txt"><a href="#åœ¨ç¯å¢ƒä¸­ç”Ÿæˆrequirements-txt" class="headerlink" title="åœ¨ç¯å¢ƒä¸­ç”Ÿæˆrequirements.txt"></a>åœ¨ç¯å¢ƒä¸­ç”Ÿæˆrequirements.txt</h4><p>å®‰è£…æˆ–å‡çº§åŒ…åï¼Œæœ€å¥½æ›´æ–°è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥å¼„ä¸ªè™šæ‹Ÿç¯å¢ƒæ¥æã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip freeze &gt;requirements.txt</span><br></pre></td></tr></table></figure>

<h4 id="åœ¨ç¯å¢ƒä¸­ä½¿ç”¨requirements-txt"><a href="#åœ¨ç¯å¢ƒä¸­ä½¿ç”¨requirements-txt" class="headerlink" title="åœ¨ç¯å¢ƒä¸­ä½¿ç”¨requirements.txt"></a>åœ¨ç¯å¢ƒä¸­ä½¿ç”¨requirements.txt</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>



<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/u013066730/article/details/54580789" target="_blank" rel="noopener external nofollow noreferrer">python pipæºé…ç½®,pipé…ç½®æ–‡ä»¶å­˜æ”¾ä½ç½®</a></p>
<p><a href="https://blog.csdn.net/chenghuikai/article/details/55258957" target="_blank" rel="noopener external nofollow noreferrer">æ›´æ¢pipæºåˆ°å›½å†…é•œåƒ</a></p>
<p><a href="https://blog.csdn.net/u013066730/article/details/54580863" target="_blank" rel="noopener external nofollow noreferrer">pipå®‰è£…ä½¿ç”¨è¯¦è§£</a></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonä¸­ç¯å¢ƒå˜é‡çš„æŸ¥çœ‹ä¸æ·»åŠ </title>
    <url>/articles/422075899.html</url>
    <content><![CDATA[<h3 id="æŸ¥çœ‹ç¯å¢ƒå˜é‡"><a href="#æŸ¥çœ‹ç¯å¢ƒå˜é‡" class="headerlink" title="æŸ¥çœ‹ç¯å¢ƒå˜é‡"></a>æŸ¥çœ‹ç¯å¢ƒå˜é‡</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(os.sys.path)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ ç¯å¢ƒå˜é‡"></a>æ·»åŠ ç¯å¢ƒå˜é‡</h3><h4 id="ä¸´æ—¶æ·»åŠ ï¼Œåœ¨ä¸€ä¸ªshellçª—å£ä¸­"><a href="#ä¸´æ—¶æ·»åŠ ï¼Œåœ¨ä¸€ä¸ªshellçª—å£ä¸­" class="headerlink" title="ä¸´æ—¶æ·»åŠ ï¼Œåœ¨ä¸€ä¸ªshellçª—å£ä¸­"></a>ä¸´æ—¶æ·»åŠ ï¼Œåœ¨ä¸€ä¸ªshellçª—å£ä¸­</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(path)</span><br></pre></td></tr></table></figure>

<p>ä½†é€€å‡ºè¯¥shellçª—å£ï¼Œå³å¤±æ•ˆ</p>
<h4 id="ä½¿ç”¨pthæ–‡ä»¶æ°¸ä¹…æ·»åŠ "><a href="#ä½¿ç”¨pthæ–‡ä»¶æ°¸ä¹…æ·»åŠ " class="headerlink" title="ä½¿ç”¨pthæ–‡ä»¶æ°¸ä¹…æ·»åŠ "></a>ä½¿ç”¨pthæ–‡ä»¶æ°¸ä¹…æ·»åŠ </h4><p>ä½¿ç”¨pthæ–‡ä»¶ï¼Œåœ¨ site-packages æ–‡ä»¶ä¸­åˆ›å»º .pthæ–‡ä»¶ï¼Œå°†æ¨¡å—çš„è·¯å¾„å†™è¿›å»ï¼Œä¸€è¡Œä¸€ä¸ªè·¯å¾„ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œpthæ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨é‡Šï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># .pth file for the  my project(è¿™è¡Œæ˜¯æ³¨é‡Š)</span></span><br><span class="line">E:\DjangoWord</span><br><span class="line">E:\DjangoWord\mysite</span><br><span class="line">E:\DjangoWord\mysite\polls</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¸å¤±ä¸ºä¸€ä¸ªå¥½çš„æ–¹æ³•ï¼Œä½†å­˜åœ¨ç®¡ç†ä¸Šçš„é—®é¢˜ï¼Œè€Œä¸”ä¸èƒ½åœ¨ä¸åŒçš„pythonç‰ˆæœ¬ä¸­å…±äº« </p>
<h4 id="ä½¿ç”¨PYTHONPATHç¯å¢ƒå˜é‡"><a href="#ä½¿ç”¨PYTHONPATHç¯å¢ƒå˜é‡" class="headerlink" title="ä½¿ç”¨PYTHONPATHç¯å¢ƒå˜é‡"></a>ä½¿ç”¨PYTHONPATHç¯å¢ƒå˜é‡</h4><p>ä½¿ç”¨PYTHONPATHç¯å¢ƒå˜é‡ï¼Œåœ¨è¿™ä¸ªç¯å¢ƒå˜é‡ä¸­è¾“å…¥ç›¸å…³çš„è·¯å¾„ï¼Œä¸åŒçš„è·¯å¾„ä¹‹é—´ç”¨é€—å·ï¼ˆè‹±æ–‡çš„ï¼)åˆ†å¼€ï¼Œå¦‚æœPYTHONPATH å˜é‡è¿˜ä¸å­˜åœ¨ï¼Œå¯ä»¥åˆ›å»ºå®ƒï¼</p>
<p>è·¯å¾„ä¼šè‡ªåŠ¨åŠ å…¥åˆ°sys.pathä¸­ï¼Œè€Œä¸”å¯ä»¥åœ¨ä¸åŒçš„pythonç‰ˆæœ¬ä¸­å…±äº«ï¼Œåº”è¯¥æ˜¯ä¸€æ ·è¾ƒä¸ºæ–¹ä¾¿çš„æ–¹æ³•</p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://www.cnblogs.com/GODYCA/archive/2013/05/31/3110410.html" target="_blank" rel="noopener external nofollow noreferrer">https://www.cnblogs.com/GODYCA/archive/2013/05/31/3110410.html</a></p>
<p><a href="https://www.cnblogs.com/huchong/p/7349894.html" target="_blank" rel="noopener external nofollow noreferrer">https://www.cnblogs.com/huchong/p/7349894.html</a></p>
]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonä¸­__file__ ä¸argv[0]ä½¿ç”¨</title>
    <url>/articles/2941891741.html</url>
    <content><![CDATA[<p>åœ¨pythonä¸‹ï¼Œè·å–å½“å‰æ‰§è¡Œä¸»è„šæœ¬çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼šsys.argv[0]å’Œ__file__</p>
<h2 id="sys-argv-0"><a href="#sys-argv-0" class="headerlink" title="sys.argv[0]"></a>sys.argv[0]</h2><p>è·å–ä¸»æ‰§è¡Œæ–‡ä»¶è·¯å¾„çš„æœ€ä½³æ–¹æ³•æ˜¯ç”¨sys.argv[0]ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œæ‰€ä»¥å†å–ä¸€ä¸‹abspathæ˜¯ä¿é™©çš„åšæ³•ï¼Œåƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import os,sys</span><br><span class="line">dirname, filename &#x3D; os.path.split(os.path.abspath(sys.argv[0]))</span><br><span class="line">print &quot;running from&quot;, dirname</span><br><span class="line">print &quot;file is&quot;, filename</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>æ‰§è¡Œç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">running from &#x2F;root</span><br><span class="line">file is test.py</span><br></pre></td></tr></table></figure>

<h3 id="sys-path-0-ï¼Œos-getcwd-ï¼Œsys-argv-0"><a href="#sys-path-0-ï¼Œos-getcwd-ï¼Œsys-argv-0" class="headerlink" title="sys.path[0]ï¼Œos.getcwd()ï¼Œsys.argv[0]"></a>sys.path[0]ï¼Œos.getcwd()ï¼Œsys.argv[0]</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">print &quot;3&quot;,sys.path[0] </span><br><span class="line">print &quot;4&quot;,sys.argv[0]</span><br><span class="line">print &quot;5&quot;,os.getcwd()</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">3 &#x2F;devcode&#x2F;user&#x2F;bin&#x2F;dw_clsfd #è¿è¡Œè„šæœ¬ç›®å½•</span><br><span class="line">4 &#x2F;dw&#x2F;etl&#x2F;home&#x2F;dev&#x2F;bin&#x2F;dw_clsfd&#x2F;test.py #å½“å‰è„šæœ¬çš„ç›®å½•</span><br><span class="line">5 &#x2F;devcode&#x2F;user&#x2F;bin&#x2F;dw_clsfd #è¿è¡Œè„šæœ¬ç›®å½•</span><br></pre></td></tr></table></figure>

<p><strong>é€šè¿‡sys.path[0],os.getcwd()è·å¾—çš„æ˜¯æ‰§è¡Œè„šæœ¬çš„ç›®å½•</strong></p>
<h2 id="file"><a href="#file" class="headerlink" title="__file__"></a>__file__</h2><p>_<em>file_</em> æ˜¯ç”¨æ¥è·å¾—æ¨¡å—æ‰€åœ¨çš„è·¯å¾„çš„ï¼Œè¿™å¯èƒ½å¾—åˆ°çš„æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œæ¯”å¦‚åœ¨è„šæœ¬test.pyä¸­å†™å…¥ï¼š</p>
<p>#!/usr/bin/env python<br>print _<em>file_</em></p>
<ul>
<li>æŒ‰ç›¸å¯¹è·¯å¾„./test.pyæ¥æ‰§è¡Œï¼Œåˆ™æ‰“å°å¾—åˆ°çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œ</li>
<li>æŒ‰ç»å¯¹è·¯å¾„æ‰§è¡Œåˆ™å¾—åˆ°çš„æ˜¯ç»å¯¹è·¯å¾„ã€‚</li>
<li>è€ŒæŒ‰ç”¨æˆ·ç›®å½•æ¥æ‰§è¡Œï¼ˆ~/practice/test.pyï¼‰ï¼Œåˆ™å¾—åˆ°çš„ä¹Ÿæ˜¯ç»å¯¹è·¯å¾„ï¼ˆ~è¢«å±•å¼€ï¼‰</li>
<li>æ‰€ä»¥ä¸ºäº†å¾—åˆ°ç»å¯¹è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦ os.path.realpath(_<em>file_</em>)ã€‚</li>
</ul>
<p>è€Œåœ¨Pythonæ§åˆ¶å°ä¸‹ï¼Œç›´æ¥ä½¿ç”¨print __file__æ˜¯ä¼šå¯¼è‡´  name â€˜__file__â€™ is not definedé”™è¯¯çš„ï¼Œå› ä¸ºè¿™æ—¶æ²¡æœ‰åœ¨ä»»ä½•ä¸€ä¸ªè„šæœ¬ä¸‹æ‰§è¡Œï¼Œè‡ªç„¶æ²¡æœ‰ __file__çš„å®šä¹‰äº†ã€‚</p>
<h3 id="pythonä¸­os-path-dirname-file"><a href="#pythonä¸­os-path-dirname-file" class="headerlink" title="pythonä¸­os.path.dirname(_file_)"></a>pythonä¸­os.path.dirname(_<em>file_</em>)</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">print &quot;7&quot;,os.path.dirname(__file__)</span><br><span class="line"></span><br><span class="line">(1).å½“&quot;print os.path.dirname(__file__)&quot;æ‰€åœ¨è„šæœ¬æ˜¯ä»¥å®Œæ•´è·¯å¾„è¢«è¿è¡Œçš„ï¼Œ é‚£ä¹ˆå°†è¾“å‡ºè¯¥è„šæœ¬æ‰€åœ¨çš„å®Œæ•´è·¯å¾„ï¼Œæ¯”å¦‚ï¼š</span><br><span class="line">python &#x2F;dw&#x2F;etl&#x2F;home&#x2F;dev&#x2F;bin&#x2F;dw_clsfd&#x2F;test.py </span><br><span class="line">7 &#x2F;dw&#x2F;etl&#x2F;home&#x2F;dev&#x2F;bin&#x2F;dw_clsfd #å½“å‰è„šæœ¬æ‰€åœ¨çš„ç›®å½•</span><br><span class="line"></span><br><span class="line">(2).å½“&quot;print os.path.dirname(__file__)&quot;æ‰€åœ¨è„šæœ¬æ˜¯ä»¥ç›¸å¯¹è·¯å¾„è¢«è¿è¡Œçš„ï¼Œ é‚£ä¹ˆå°†è¾“å‡ºç©ºç›®å½•ï¼Œæ¯”å¦‚ï¼š</span><br><span class="line">python test.py</span><br><span class="line">é‚£ä¹ˆå°†è¾“å‡ºç©ºå­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure>

<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">print &quot;6&quot;,__file__</span><br><span class="line">print &quot;7&quot;,os.path.realpath(__file__)</span><br><span class="line">print &quot;8&quot;,os.path.abspath(__file__)</span><br><span class="line">print &quot;9&quot;,os.path.dirname(os.path.realpath(__file__))</span><br><span class="line">print &quot;10&quot;,os.path.dirname(os.path.abspath(__file__))</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">6 &#x2F;dw&#x2F;etl&#x2F;home&#x2F;dev&#x2F;bin&#x2F;dw_clsfd&#x2F;test.py</span><br><span class="line">7 &#x2F;devcode&#x2F;user&#x2F;bin&#x2F;dw_clsfd&#x2F;test.py #è„šæœ¬è¿è¡Œç›®å½•</span><br><span class="line">8 &#x2F;dw&#x2F;etl&#x2F;home&#x2F;dev&#x2F;bin&#x2F;dw_clsfd&#x2F;test.py</span><br><span class="line">9 &#x2F;devcode&#x2F;user&#x2F;bin&#x2F;dw_clsfd  #è„šæœ¬è¿è¡Œç›®å½•</span><br><span class="line">10 &#x2F;dw&#x2F;etl&#x2F;home&#x2F;dev&#x2F;bin&#x2F;dw_clsfd</span><br></pre></td></tr></table></figure>



<h2 id="file-å’Œargv-0-å·®å¼‚"><a href="#file-å’Œargv-0-å·®å¼‚" class="headerlink" title="__file__å’Œargv[0]å·®å¼‚"></a>__file__å’Œargv[0]å·®å¼‚</h2><p>åœ¨ä¸»æ‰§è¡Œæ–‡ä»¶ä¸­æ—¶ï¼Œä¸¤è€…æ²¡ä»€ä¹ˆå·®å¼‚ï¼Œä¸è¿‡è¦æ˜¯åœ¨ä¸åŒçš„æ–‡ä»¶ä¸‹ï¼Œå°±ä¸åŒäº†ï¼Œä¸‹é¢ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">C:\junk\so&gt;type \junk\so\scriptpath\script1.py</span><br><span class="line">import sys, os</span><br><span class="line">print &quot;script: sys.argv[0] is&quot;, repr(sys.argv[0])</span><br><span class="line">print &quot;script: __file__ is&quot;, repr(__file__)</span><br><span class="line">print &quot;script: cwd is&quot;, repr(os.getcwd())</span><br><span class="line">import whereutils</span><br><span class="line">whereutils.show_where()</span><br><span class="line"> </span><br><span class="line">C:\junk\so&gt;type \python26\lib\site-packages\whereutils.py</span><br><span class="line">import sys, os</span><br><span class="line">def show_where():</span><br><span class="line">    print &quot;show_where: sys.argv[0] is&quot;, repr(sys.argv[0])</span><br><span class="line">    print &quot;show_where: __file__ is&quot;, repr(__file__)</span><br><span class="line">    print &quot;show_where: cwd is&quot;, repr(os.getcwd())</span><br><span class="line"> </span><br><span class="line">C:\junk\so&gt;\python26\python scriptpath\script1.py</span><br><span class="line">script: sys.argv[0] is &#39;scriptpath\\script1.py&#39;</span><br><span class="line">script: __file__ is &#39;scriptpath\\script1.py&#39;</span><br><span class="line">script: cwd is &#39;C:\\junk\\so&#39;</span><br><span class="line">show_where: sys.argv[0] is &#39;scriptpath\\script1.py&#39;</span><br><span class="line">show_where: __file__ is &#39;C:\\python26\\lib\\site-packages\\whereutils.pyc&#39;</span><br><span class="line">show_where: cwd is &#39;C:\\junk\\so&#39;</span><br></pre></td></tr></table></figure>

<p><strong>æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œargv[0]è¦æ›´å¯é äº›</strong></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://blog.csdn.net/weixin_37746272/article/details/78980259" target="_blank" rel="noopener external nofollow noreferrer">python _<em>file_</em> ä¸argv[0]</a></p>
<p><a href="https://www.cnblogs.com/rrxc/p/3973136.html" target="_blank" rel="noopener external nofollow noreferrer">pythonè§£æƒ‘ä¹‹ _<em>file_</em> ä¸argv[0]</a></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>PythonæŠ¥é”™é—®é¢˜è§£å†³åŠæ³•æ”¶é›†</title>
    <url>/articles/3158725388.html</url>
    <content><![CDATA[<h2 id="Python-å¼‚å¸¸æ€»ç»“"><a href="#Python-å¼‚å¸¸æ€»ç»“" class="headerlink" title="Python å¼‚å¸¸æ€»ç»“"></a>Python å¼‚å¸¸æ€»ç»“</h2><h3 id="coercing-to-Unicode-need-string-or-buffer-xxxxx"><a href="#coercing-to-Unicode-need-string-or-buffer-xxxxx" class="headerlink" title="coercing to Unicode: need string or buffer, xxxxx"></a>coercing to Unicode: need string or buffer, xxxxx</h3><h4 id="äº§ç”ŸåŸå› "><a href="#äº§ç”ŸåŸå› " class="headerlink" title="äº§ç”ŸåŸå› "></a>äº§ç”ŸåŸå› </h4><p>å­—ç¬¦ä¸²ç”¨<code>+</code>æ‹¼æ¥æ—¶ï¼Œå¦‚æœéå­—ç¬¦ä¸²ç±»å‹ï¼ˆæ¯”å¦‚ï¼šNoneï¼Œtupleï¼Œlistç­‰ï¼‰ä¼šäº§ç”Ÿè¯¥é”™è¯¯ï¼Œæ¯”å¦‚ä»¥ä¸‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">test_str1 &#x3D; &quot;test11&quot; + None</span><br><span class="line">test_str2 &#x3D; &quot;test22&quot; + [1,2]</span><br><span class="line">test_str3 &#x3D; &quot;test33&quot; + (1,2)</span><br></pre></td></tr></table></figure>

<h4 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h4><p>æ”¹ç”¨%æ“ä½œç¬¦æ ¼å¼åŒ–è¾“å‡ºï¼Œå¦‚ä»¥ä¸‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">test_str1 &#x3D; &quot;test11 %s &quot; % None</span><br><span class="line">test_str2 &#x3D; &quot;test22 %s&quot; % [1,2]</span><br></pre></td></tr></table></figure>

<a id="more"></a>



<h3 id="å¿˜è®°åœ¨-if-elif-else-for-while-class-def-å£°æ˜æœ«å°¾æ·»åŠ -ï¼šï¼ˆå¯¼è‡´-â€œSyntaxError-ï¼šinvalid-syntaxâ€ï¼‰"><a href="#å¿˜è®°åœ¨-if-elif-else-for-while-class-def-å£°æ˜æœ«å°¾æ·»åŠ -ï¼šï¼ˆå¯¼è‡´-â€œSyntaxError-ï¼šinvalid-syntaxâ€ï¼‰" class="headerlink" title="å¿˜è®°åœ¨ if , elif , else , for , while , class ,def å£°æ˜æœ«å°¾æ·»åŠ  ï¼šï¼ˆå¯¼è‡´ â€œSyntaxError ï¼šinvalid syntaxâ€ï¼‰"></a>å¿˜è®°åœ¨ if , elif , else , for , while , class ,def å£°æ˜æœ«å°¾æ·»åŠ  ï¼šï¼ˆå¯¼è‡´ â€œSyntaxError ï¼šinvalid syntaxâ€ï¼‰</h3><p>è¯¥é”™è¯¯å°†å‘ç”Ÿåœ¨ç±»ä¼¼å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if spam &#x3D;&#x3D; 42</span><br><span class="line"> print(&#39;Hello!&#39;)</span><br></pre></td></tr></table></figure>



<h3 id="ä½¿ç”¨-è€Œä¸æ˜¯-ï¼ˆå¯¼è‡´â€œSyntaxError-invalid-syntaxâ€ï¼‰"><a href="#ä½¿ç”¨-è€Œä¸æ˜¯-ï¼ˆå¯¼è‡´â€œSyntaxError-invalid-syntaxâ€ï¼‰" class="headerlink" title="ä½¿ç”¨ = è€Œä¸æ˜¯ ==ï¼ˆå¯¼è‡´â€œSyntaxError: invalid syntaxâ€ï¼‰"></a>ä½¿ç”¨ = è€Œä¸æ˜¯ ==ï¼ˆå¯¼è‡´â€œSyntaxError: invalid syntaxâ€ï¼‰</h3><p>= æ˜¯èµ‹å€¼æ“ä½œç¬¦è€Œ == æ˜¯ç­‰äºæ¯”è¾ƒæ“ä½œã€‚è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if spam &#x3D; 42:</span><br><span class="line"> print(&#39;Hello!&#39;)</span><br></pre></td></tr></table></figure>



<h3 id="é”™è¯¯çš„ä½¿ç”¨ç¼©è¿›é‡ã€‚ï¼ˆå¯¼è‡´â€œIndentationErrorï¼šunexpected-indentâ€ã€â€œIndentationErrorï¼šunindent-does-not-match-any-outer-indetation-levelâ€ä»¥åŠâ€œIndentationErrorï¼šexpected-an-indented-blockâ€ï¼‰"><a href="#é”™è¯¯çš„ä½¿ç”¨ç¼©è¿›é‡ã€‚ï¼ˆå¯¼è‡´â€œIndentationErrorï¼šunexpected-indentâ€ã€â€œIndentationErrorï¼šunindent-does-not-match-any-outer-indetation-levelâ€ä»¥åŠâ€œIndentationErrorï¼šexpected-an-indented-blockâ€ï¼‰" class="headerlink" title="é”™è¯¯çš„ä½¿ç”¨ç¼©è¿›é‡ã€‚ï¼ˆå¯¼è‡´â€œIndentationErrorï¼šunexpected indentâ€ã€â€œIndentationErrorï¼šunindent does not match any outer indetation levelâ€ä»¥åŠâ€œIndentationErrorï¼šexpected an indented blockâ€ï¼‰"></a>é”™è¯¯çš„ä½¿ç”¨ç¼©è¿›é‡ã€‚ï¼ˆå¯¼è‡´â€œIndentationErrorï¼šunexpected indentâ€ã€â€œIndentationErrorï¼šunindent does not match any outer indetation levelâ€ä»¥åŠâ€œIndentationErrorï¼šexpected an indented blockâ€ï¼‰</h3><p>è®°ä½ç¼©è¿›å¢åŠ åªç”¨åœ¨ä»¥ï¼šç»“æŸçš„è¯­å¥ä¹‹åï¼Œè€Œä¹‹åå¿…é¡»æ¢å¤åˆ°ä¹‹å‰çš„ç¼©è¿›æ ¼å¼ã€‚è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">print(&#39;Hello!&#39;)</span><br><span class="line"> print(&#39;Howdy!&#39;)</span><br><span class="line"> </span><br><span class="line">æˆ–è€…ï¼š</span><br><span class="line"> </span><br><span class="line">if spam &#x3D;&#x3D; 42:</span><br><span class="line"> print(&#39;Hello!&#39;)</span><br><span class="line"> print(&#39;Howdy!&#39;)</span><br><span class="line"> </span><br><span class="line">æˆ–è€…ï¼š</span><br><span class="line"> </span><br><span class="line">if spam &#x3D;&#x3D; 42:</span><br><span class="line">print(&#39;Hello!&#39;)</span><br></pre></td></tr></table></figure>



<h3 id="åœ¨-for-å¾ªç¯è¯­å¥ä¸­å¿˜è®°è°ƒç”¨-len-å¯¼è‡´â€œTypeError-â€˜listâ€™-object-cannot-be-interpreted-as-an-integerâ€"><a href="#åœ¨-for-å¾ªç¯è¯­å¥ä¸­å¿˜è®°è°ƒç”¨-len-å¯¼è‡´â€œTypeError-â€˜listâ€™-object-cannot-be-interpreted-as-an-integerâ€" class="headerlink" title="åœ¨ for å¾ªç¯è¯­å¥ä¸­å¿˜è®°è°ƒç”¨ len() (å¯¼è‡´â€œTypeError: â€˜listâ€™ object cannot be interpreted as an integerâ€)"></a>åœ¨ for å¾ªç¯è¯­å¥ä¸­å¿˜è®°è°ƒç”¨ len() (å¯¼è‡´â€œTypeError: â€˜listâ€™ object cannot be interpreted as an integerâ€)</h3><p>é€šå¸¸ä½ æƒ³è¦é€šè¿‡ç´¢å¼•æ¥è¿­ä»£ä¸€ä¸ªlistæˆ–è€…stringçš„å…ƒç´ ï¼Œè¿™éœ€è¦è°ƒç”¨ range() å‡½æ•°ã€‚è¦è®°å¾—è¿”å›len å€¼è€Œä¸æ˜¯è¿”å›è¿™ä¸ªåˆ—è¡¨ã€‚</p>
<p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; [&#39;cat&#39;, &#39;dog&#39;, &#39;mouse&#39;]</span><br><span class="line">for i in range(spam):</span><br><span class="line"> print(spam[i])</span><br></pre></td></tr></table></figure>



<h3 id="å°è¯•ä¿®æ”¹stringçš„å€¼ï¼ˆå¯¼è‡´â€œTypeError-â€˜strâ€™-object-does-not-support-item-assignmentâ€ï¼‰"><a href="#å°è¯•ä¿®æ”¹stringçš„å€¼ï¼ˆå¯¼è‡´â€œTypeError-â€˜strâ€™-object-does-not-support-item-assignmentâ€ï¼‰" class="headerlink" title="å°è¯•ä¿®æ”¹stringçš„å€¼ï¼ˆå¯¼è‡´â€œTypeError: â€˜strâ€™ object does not support item assignmentâ€ï¼‰"></a>å°è¯•ä¿®æ”¹stringçš„å€¼ï¼ˆå¯¼è‡´â€œTypeError: â€˜strâ€™ object does not support item assignmentâ€ï¼‰</h3><p>stringæ˜¯ä¸€ç§ä¸å¯å˜çš„æ•°æ®ç±»å‹ï¼Œè¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; &#39;I have a pet cat.&#39;</span><br><span class="line">spam[13] &#x3D; &#39;r&#39;</span><br><span class="line">print(spam)</span><br></pre></td></tr></table></figure>

<p>è€Œä½ å®é™…æƒ³è¦è¿™æ ·åšï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; &#39;I have a pet cat.&#39;</span><br><span class="line">spam &#x3D; spam[:13] + &#39;r&#39; + spam[14:]</span><br><span class="line">print(spam)</span><br></pre></td></tr></table></figure>



<h3 id="å°è¯•è¿æ¥éå­—ç¬¦ä¸²å€¼ä¸å­—ç¬¦ä¸²ï¼ˆå¯¼è‡´-â€œTypeError-Canâ€™t-convert-â€˜intâ€™-object-to-str-implicitlyâ€ï¼‰"><a href="#å°è¯•è¿æ¥éå­—ç¬¦ä¸²å€¼ä¸å­—ç¬¦ä¸²ï¼ˆå¯¼è‡´-â€œTypeError-Canâ€™t-convert-â€˜intâ€™-object-to-str-implicitlyâ€ï¼‰" class="headerlink" title="å°è¯•è¿æ¥éå­—ç¬¦ä¸²å€¼ä¸å­—ç¬¦ä¸²ï¼ˆå¯¼è‡´ â€œTypeError: Canâ€™t convert â€˜intâ€™ object to str implicitlyâ€ï¼‰"></a>å°è¯•è¿æ¥éå­—ç¬¦ä¸²å€¼ä¸å­—ç¬¦ä¸²ï¼ˆå¯¼è‡´ â€œTypeError: Canâ€™t convert â€˜intâ€™ object to str implicitlyâ€ï¼‰</h3><p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">numEggs &#x3D; 12</span><br><span class="line">print(&#39;I have &#39; + numEggs + &#39; eggs.&#39;)</span><br></pre></td></tr></table></figure>

<p>è€Œä½ å®é™…æƒ³è¦è¿™æ ·åšï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">numEggs &#x3D; 12</span><br><span class="line">print(&#39;I have &#39; + str(numEggs) + &#39; eggs.&#39;)</span><br><span class="line"> </span><br><span class="line">æˆ–è€…ï¼š</span><br><span class="line"> </span><br><span class="line">numEggs &#x3D; 12</span><br><span class="line">print(&#39;I have %s eggs.&#39; % (numEggs))</span><br></pre></td></tr></table></figure>



<h3 id="åœ¨å­—ç¬¦ä¸²é¦–å°¾å¿˜è®°åŠ å¼•å·ï¼ˆå¯¼è‡´â€œSyntaxError-EOL-while-scanning-string-literalâ€ï¼‰"><a href="#åœ¨å­—ç¬¦ä¸²é¦–å°¾å¿˜è®°åŠ å¼•å·ï¼ˆå¯¼è‡´â€œSyntaxError-EOL-while-scanning-string-literalâ€ï¼‰" class="headerlink" title="åœ¨å­—ç¬¦ä¸²é¦–å°¾å¿˜è®°åŠ å¼•å·ï¼ˆå¯¼è‡´â€œSyntaxError: EOL while scanning string literalâ€ï¼‰"></a>åœ¨å­—ç¬¦ä¸²é¦–å°¾å¿˜è®°åŠ å¼•å·ï¼ˆå¯¼è‡´â€œSyntaxError: EOL while scanning string literalâ€ï¼‰</h3><p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">print(Hello!&#39;)</span><br><span class="line">æˆ–è€…:</span><br><span class="line">print(&#39;Hello!)</span><br><span class="line"> </span><br><span class="line">æˆ–è€…:</span><br><span class="line"> </span><br><span class="line">myName &#x3D; &#39;Al&#39;</span><br><span class="line">print(&#39;My name is &#39; + myName + . How are you?&#39;)</span><br></pre></td></tr></table></figure>



<h3 id="å˜é‡æˆ–è€…å‡½æ•°åæ‹¼å†™é”™è¯¯ï¼ˆå¯¼è‡´â€œNameError-name-â€˜foobaâ€™-is-not-definedâ€ï¼‰"><a href="#å˜é‡æˆ–è€…å‡½æ•°åæ‹¼å†™é”™è¯¯ï¼ˆå¯¼è‡´â€œNameError-name-â€˜foobaâ€™-is-not-definedâ€ï¼‰" class="headerlink" title="å˜é‡æˆ–è€…å‡½æ•°åæ‹¼å†™é”™è¯¯ï¼ˆå¯¼è‡´â€œNameError: name â€˜foobaâ€™ is not definedâ€ï¼‰"></a>å˜é‡æˆ–è€…å‡½æ•°åæ‹¼å†™é”™è¯¯ï¼ˆå¯¼è‡´â€œNameError: name â€˜foobaâ€™ is not definedâ€ï¼‰</h3><p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">foobar &#x3D; &#39;Al&#39;</span><br><span class="line">print(&#39;My name is &#39; + fooba)</span><br><span class="line"> </span><br><span class="line">æˆ–è€…:</span><br><span class="line"> </span><br><span class="line">spam &#x3D; ruond(4.2)</span><br><span class="line"> </span><br><span class="line">æˆ–è€…:</span><br><span class="line"> </span><br><span class="line">spam &#x3D; Round(4.2)</span><br></pre></td></tr></table></figure>



<h3 id="æ–¹æ³•åæ‹¼å†™é”™è¯¯ï¼ˆå¯¼è‡´-â€œAttributeError-â€˜strâ€™-object-has-no-attribute-â€˜lowerrâ€™â€ï¼‰"><a href="#æ–¹æ³•åæ‹¼å†™é”™è¯¯ï¼ˆå¯¼è‡´-â€œAttributeError-â€˜strâ€™-object-has-no-attribute-â€˜lowerrâ€™â€ï¼‰" class="headerlink" title="æ–¹æ³•åæ‹¼å†™é”™è¯¯ï¼ˆå¯¼è‡´ â€œAttributeError: â€˜strâ€™ object has no attribute â€˜lowerrâ€™â€ï¼‰"></a>æ–¹æ³•åæ‹¼å†™é”™è¯¯ï¼ˆå¯¼è‡´ â€œAttributeError: â€˜strâ€™ object has no attribute â€˜lowerrâ€™â€ï¼‰</h3><p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; &#39;THIS IS IN LOWERCASE.&#39;</span><br><span class="line">spam &#x3D; spam.lowerr()</span><br></pre></td></tr></table></figure>



<h3 id="å¼•ç”¨è¶…è¿‡listæœ€å¤§ç´¢å¼•ï¼ˆå¯¼è‡´â€œIndexError-list-index-out-of-rangeâ€ï¼‰"><a href="#å¼•ç”¨è¶…è¿‡listæœ€å¤§ç´¢å¼•ï¼ˆå¯¼è‡´â€œIndexError-list-index-out-of-rangeâ€ï¼‰" class="headerlink" title="å¼•ç”¨è¶…è¿‡listæœ€å¤§ç´¢å¼•ï¼ˆå¯¼è‡´â€œIndexError: list index out of rangeâ€ï¼‰"></a>å¼•ç”¨è¶…è¿‡listæœ€å¤§ç´¢å¼•ï¼ˆå¯¼è‡´â€œIndexError: list index out of rangeâ€ï¼‰</h3><p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; [&#39;cat&#39;, &#39;dog&#39;, &#39;mouse&#39;]</span><br><span class="line">print(spam[6])</span><br></pre></td></tr></table></figure>



<h3 id="ä½¿ç”¨ä¸å­˜åœ¨çš„å­—å…¸é”®å€¼ï¼ˆå¯¼è‡´â€œKeyErrorï¼šâ€˜spamâ€™â€ï¼‰"><a href="#ä½¿ç”¨ä¸å­˜åœ¨çš„å­—å…¸é”®å€¼ï¼ˆå¯¼è‡´â€œKeyErrorï¼šâ€˜spamâ€™â€ï¼‰" class="headerlink" title="ä½¿ç”¨ä¸å­˜åœ¨çš„å­—å…¸é”®å€¼ï¼ˆå¯¼è‡´â€œKeyErrorï¼šâ€˜spamâ€™â€ï¼‰"></a>ä½¿ç”¨ä¸å­˜åœ¨çš„å­—å…¸é”®å€¼ï¼ˆå¯¼è‡´â€œKeyErrorï¼šâ€˜spamâ€™â€ï¼‰</h3><p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; &#123;&#39;cat&#39;: &#39;Zophie&#39;, &#39;dog&#39;: &#39;Basil&#39;, &#39;mouse&#39;: &#39;Whiskers&#39;&#125;</span><br><span class="line">print(&#39;The name of my pet zebra is &#39; + spam[&#39;zebra&#39;])</span><br></pre></td></tr></table></figure>



<h3 id="å°è¯•ä½¿ç”¨Pythonå…³é”®å­—ä½œä¸ºå˜é‡åï¼ˆå¯¼è‡´â€œSyntaxErrorï¼šinvalid-syntaxâ€ï¼‰"><a href="#å°è¯•ä½¿ç”¨Pythonå…³é”®å­—ä½œä¸ºå˜é‡åï¼ˆå¯¼è‡´â€œSyntaxErrorï¼šinvalid-syntaxâ€ï¼‰" class="headerlink" title="å°è¯•ä½¿ç”¨Pythonå…³é”®å­—ä½œä¸ºå˜é‡åï¼ˆå¯¼è‡´â€œSyntaxErrorï¼šinvalid syntaxâ€ï¼‰"></a>å°è¯•ä½¿ç”¨Pythonå…³é”®å­—ä½œä¸ºå˜é‡åï¼ˆå¯¼è‡´â€œSyntaxErrorï¼šinvalid syntaxâ€ï¼‰</h3><p>Pythonå…³é”®ä¸èƒ½ç”¨ä½œå˜é‡åï¼Œè¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class &#x3D; &#39;algebra&#39;</span><br></pre></td></tr></table></figure>

<p>Python3çš„å…³é”®å­—æœ‰ï¼šand, as, assert, break, class, continue, def, del, elif, else, except, False, finally, for, from, global, if, import, in, is, lambda, None, nonlocal, not, or, pass, raise, return, True, try, while, with, yield</p>
<h3 id="åœ¨ä¸€ä¸ªå®šä¹‰æ–°å˜é‡ä¸­ä½¿ç”¨å¢å€¼æ“ä½œç¬¦ï¼ˆå¯¼è‡´â€œNameError-name-â€˜foobarâ€™-is-not-definedâ€ï¼‰"><a href="#åœ¨ä¸€ä¸ªå®šä¹‰æ–°å˜é‡ä¸­ä½¿ç”¨å¢å€¼æ“ä½œç¬¦ï¼ˆå¯¼è‡´â€œNameError-name-â€˜foobarâ€™-is-not-definedâ€ï¼‰" class="headerlink" title="åœ¨ä¸€ä¸ªå®šä¹‰æ–°å˜é‡ä¸­ä½¿ç”¨å¢å€¼æ“ä½œç¬¦ï¼ˆå¯¼è‡´â€œNameError: name â€˜foobarâ€™ is not definedâ€ï¼‰"></a>åœ¨ä¸€ä¸ªå®šä¹‰æ–°å˜é‡ä¸­ä½¿ç”¨å¢å€¼æ“ä½œç¬¦ï¼ˆå¯¼è‡´â€œNameError: name â€˜foobarâ€™ is not definedâ€ï¼‰</h3><p>ä¸è¦åœ¨å£°æ˜å˜é‡æ—¶ä½¿ç”¨0æˆ–è€…ç©ºå­—ç¬¦ä¸²ä½œä¸ºåˆå§‹å€¼ï¼Œè¿™æ ·ä½¿ç”¨è‡ªå¢æ“ä½œç¬¦çš„ä¸€å¥spam += 1ç­‰äºspam = spam + 1ï¼Œè¿™æ„å‘³ç€spaméœ€è¦æŒ‡å®šä¸€ä¸ªæœ‰æ•ˆçš„åˆå§‹å€¼ã€‚</p>
<p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; 0</span><br><span class="line">spam +&#x3D; 42</span><br><span class="line">eggs +&#x3D; 42</span><br></pre></td></tr></table></figure>



<h3 id="åœ¨å®šä¹‰å±€éƒ¨å˜é‡å‰åœ¨å‡½æ•°ä¸­ä½¿ç”¨å±€éƒ¨å˜é‡ï¼ˆæ­¤æ—¶æœ‰ä¸å±€éƒ¨å˜é‡åŒåçš„å…¨å±€å˜é‡å­˜åœ¨ï¼‰ï¼ˆå¯¼è‡´â€œUnboundLocalError-local-variable-â€˜foobarâ€™-referenced-before-assignmentâ€ï¼‰"><a href="#åœ¨å®šä¹‰å±€éƒ¨å˜é‡å‰åœ¨å‡½æ•°ä¸­ä½¿ç”¨å±€éƒ¨å˜é‡ï¼ˆæ­¤æ—¶æœ‰ä¸å±€éƒ¨å˜é‡åŒåçš„å…¨å±€å˜é‡å­˜åœ¨ï¼‰ï¼ˆå¯¼è‡´â€œUnboundLocalError-local-variable-â€˜foobarâ€™-referenced-before-assignmentâ€ï¼‰" class="headerlink" title="åœ¨å®šä¹‰å±€éƒ¨å˜é‡å‰åœ¨å‡½æ•°ä¸­ä½¿ç”¨å±€éƒ¨å˜é‡ï¼ˆæ­¤æ—¶æœ‰ä¸å±€éƒ¨å˜é‡åŒåçš„å…¨å±€å˜é‡å­˜åœ¨ï¼‰ï¼ˆå¯¼è‡´â€œUnboundLocalError: local variable â€˜foobarâ€™ referenced before assignmentâ€ï¼‰"></a>åœ¨å®šä¹‰å±€éƒ¨å˜é‡å‰åœ¨å‡½æ•°ä¸­ä½¿ç”¨å±€éƒ¨å˜é‡ï¼ˆæ­¤æ—¶æœ‰ä¸å±€éƒ¨å˜é‡åŒåçš„å…¨å±€å˜é‡å­˜åœ¨ï¼‰ï¼ˆå¯¼è‡´â€œUnboundLocalError: local variable â€˜foobarâ€™ referenced before assignmentâ€ï¼‰</h3><p>åœ¨å‡½æ•°ä¸­ä½¿ç”¨å±€éƒ¨å˜æ¥é‚£ä¸ªè€ŒåŒæ—¶åˆå­˜åœ¨åŒåå…¨å±€å˜é‡æ—¶æ˜¯å¾ˆå¤æ‚çš„ï¼Œä½¿ç”¨è§„åˆ™æ˜¯ï¼šå¦‚æœåœ¨å‡½æ•°ä¸­å®šä¹‰äº†ä»»ä½•ä¸œè¥¿ï¼Œå¦‚æœå®ƒåªæ˜¯åœ¨å‡½æ•°ä¸­ä½¿ç”¨é‚£å®ƒå°±æ˜¯å±€éƒ¨çš„ï¼Œåä¹‹å°±æ˜¯å…¨å±€å˜é‡ã€‚</p>
<p>è¿™æ„å‘³ç€ä½ ä¸èƒ½åœ¨å®šä¹‰å®ƒä¹‹å‰æŠŠå®ƒå½“å…¨å±€å˜é‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨ã€‚</p>
<p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">someVar &#x3D; 42</span><br><span class="line">def myFunction():</span><br><span class="line"> print(someVar)</span><br><span class="line"> someVar &#x3D; 100</span><br><span class="line">myFunction()</span><br></pre></td></tr></table></figure>



<h3 id="å°è¯•ä½¿ç”¨-range-åˆ›å»ºæ•´æ•°åˆ—è¡¨ï¼ˆå¯¼è‡´â€œTypeError-â€˜rangeâ€™-object-does-not-support-item-assignmentâ€ï¼‰"><a href="#å°è¯•ä½¿ç”¨-range-åˆ›å»ºæ•´æ•°åˆ—è¡¨ï¼ˆå¯¼è‡´â€œTypeError-â€˜rangeâ€™-object-does-not-support-item-assignmentâ€ï¼‰" class="headerlink" title="å°è¯•ä½¿ç”¨ range()åˆ›å»ºæ•´æ•°åˆ—è¡¨ï¼ˆå¯¼è‡´â€œTypeError: â€˜rangeâ€™ object does not support item assignmentâ€ï¼‰"></a>å°è¯•ä½¿ç”¨ range()åˆ›å»ºæ•´æ•°åˆ—è¡¨ï¼ˆå¯¼è‡´â€œTypeError: â€˜rangeâ€™ object does not support item assignmentâ€ï¼‰</h3><p>æœ‰æ—¶ä½ æƒ³è¦å¾—åˆ°ä¸€ä¸ªæœ‰åºçš„æ•´æ•°åˆ—è¡¨ï¼Œæ‰€ä»¥ range() çœ‹ä¸Šå»æ˜¯ç”Ÿæˆæ­¤åˆ—è¡¨çš„ä¸é”™æ–¹å¼ã€‚ç„¶è€Œï¼Œä½ éœ€è¦è®°ä½ range() è¿”å›çš„æ˜¯ â€œrange objectâ€ï¼Œè€Œä¸æ˜¯å®é™…çš„ list å€¼ã€‚</p>
<p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; range(10)</span><br><span class="line">spam[4] &#x3D; -1</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿè®¸è¿™æ‰æ˜¯ä½ æƒ³åšï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; list(range(10))</span><br><span class="line">spam[4] &#x3D; -1</span><br></pre></td></tr></table></figure>

<p>ï¼ˆæ³¨æ„ï¼šåœ¨ Python 2 ä¸­ spam = range(10) æ˜¯èƒ½è¡Œçš„ï¼Œå› ä¸ºåœ¨ Python 2 ä¸­ range() è¿”å›çš„æ˜¯listå€¼ï¼Œä½†æ˜¯åœ¨ Python 3 ä¸­å°±ä¼šäº§ç”Ÿä»¥ä¸Šé”™è¯¯ï¼‰</p>
<h3 id="ä¸é”™åœ¨-æˆ–è€…-â€“-è‡ªå¢è‡ªå‡æ“ä½œç¬¦ã€‚ï¼ˆå¯¼è‡´â€œSyntaxError-invalid-syntaxâ€ï¼‰"><a href="#ä¸é”™åœ¨-æˆ–è€…-â€“-è‡ªå¢è‡ªå‡æ“ä½œç¬¦ã€‚ï¼ˆå¯¼è‡´â€œSyntaxError-invalid-syntaxâ€ï¼‰" class="headerlink" title="ä¸é”™åœ¨ ++ æˆ–è€… â€“ è‡ªå¢è‡ªå‡æ“ä½œç¬¦ã€‚ï¼ˆå¯¼è‡´â€œSyntaxError: invalid syntaxâ€ï¼‰"></a>ä¸é”™åœ¨ ++ æˆ–è€… â€“ è‡ªå¢è‡ªå‡æ“ä½œç¬¦ã€‚ï¼ˆå¯¼è‡´â€œSyntaxError: invalid syntaxâ€ï¼‰</h3><p>å¦‚æœä½ ä¹ æƒ¯äºä¾‹å¦‚ C++ , Java , PHP ç­‰å…¶ä»–çš„è¯­è¨€ï¼Œä¹Ÿè®¸ä½ ä¼šæƒ³è¦å°è¯•ä½¿ç”¨ ++ æˆ–è€… â€“ è‡ªå¢è‡ªå‡ä¸€ä¸ªå˜é‡ã€‚åœ¨Pythonä¸­æ˜¯æ²¡æœ‰è¿™æ ·çš„æ“ä½œç¬¦çš„ã€‚</p>
<p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; 1</span><br><span class="line">spam++</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿè®¸è¿™æ‰æ˜¯ä½ æƒ³åšçš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spam &#x3D; 1</span><br><span class="line">spam +&#x3D; 1</span><br></pre></td></tr></table></figure>



<h3 id="å¿˜è®°ä¸ºæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ·»åŠ selfå‚æ•°ï¼ˆå¯¼è‡´â€œTypeError-myMethod-takes-no-arguments-1-given-â€ï¼‰"><a href="#å¿˜è®°ä¸ºæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ·»åŠ selfå‚æ•°ï¼ˆå¯¼è‡´â€œTypeError-myMethod-takes-no-arguments-1-given-â€ï¼‰" class="headerlink" title="å¿˜è®°ä¸ºæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ·»åŠ selfå‚æ•°ï¼ˆå¯¼è‡´â€œTypeError: myMethod() takes no arguments (1 given)â€ï¼‰"></a>å¿˜è®°ä¸ºæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ·»åŠ selfå‚æ•°ï¼ˆå¯¼è‡´â€œTypeError: myMethod() takes no arguments (1 given)â€ï¼‰</h3><p>è¯¥é”™è¯¯å‘ç”Ÿåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Foo():</span><br><span class="line"> def myMethod():</span><br><span class="line"> print(&#39;Hello!&#39;)</span><br><span class="line">a &#x3D; Foo()</span><br><span class="line">a.myMethod()</span><br></pre></td></tr></table></figure>

<p>å°ç¼–æ¨èå¤§å®¶å¯ä»¥åŠ æˆ‘çš„pythonå®˜æ–¹éƒ¨è½ç¾¤,ç‚¹å‡»åŠ å…¥<a href="https://jq.qq.com/?_wv=1027&k=5usjEmy" target="_blank" rel="noopener external nofollow noreferrer">pythonè¿ç»´</a>ï¼Œé‡Œé¢æœ‰æ–°æ‰‹èµ„æ–™ï¼Œä¸å¤±ä¸ºæ˜¯ä¸€ä¸ªå­¦ä¹ çš„å¥½åœ°æ–¹ï¼Œæ¬¢è¿ä½ çš„åˆ°æ¥ã€‚ä¸€èµ·äº¤æµå­¦ä¹ ï¼å…±åŒè¿›æ­¥ï¼ï¼</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://buluo.qq.com/p/detail.html?bid=358270&pid=6026267-1541667700&from=" target="_blank" rel="noopener external nofollow noreferrer">17ä¸ªPythonè¿è¡Œæ—¶é”™è¯¯ï¼Œä½ ç»å†è¿‡å‡ ä¸ª</a></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac Sublime Text3 æ’ä»¶</title>
    <url>/articles/3957282742.html</url>
    <content><![CDATA[<h3 id="å®‰è£…æ’ä»¶æ­¥éª¤"><a href="#å®‰è£…æ’ä»¶æ­¥éª¤" class="headerlink" title="å®‰è£…æ’ä»¶æ­¥éª¤"></a>å®‰è£…æ’ä»¶æ­¥éª¤</h3><ul>
<li><p><span id="jump01">Sublime Text3</span> ä¸­ä½¿ç”¨å¿«æ·é”®<code>command+shift+p</code>ï¼Œåœ¨å¼¹æ¡†ä¸­è¾“å…¥<code>install</code>åé€‰æ‹©<code>Package Control: Intall Package</code></p>
<a id="more"></a>
<p><img src="https://image.ritboy.com/markdown/202004/85eb259e6dd8c48e73c9ab164c14d90c.jpg" alt="image01"></p>
</li>
<li><p>è¾“å…¥å®‰è£…çš„æ’ä»¶åç§°ï¼Œæ¯”å¦‚ï¼š<code>SublimeTmpl</code></p>
<p><img src="https://image.ritboy.com/markdown/202004/873865818f67bda26d52d3ae87c133e7.jpg" alt="image002"></p>
</li>
</ul>
<h3 id="SublimeTmpl"><a href="#SublimeTmpl" class="headerlink" title="SublimeTmpl"></a>SublimeTmpl</h3><p>æ–°å»ºæ–‡ä»¶æ¨¡æ¿æ’ä»¶ï¼Œå¯ä»¥æ”¯æŒå¤šç§è¯­è¨€ä¾‹å¦‚Pythonã€PHPç­‰</p>
<ul>
<li><p>å®‰è£…å‚è€ƒ<a href="#jump01">å®‰è£…æ’ä»¶æ­¥éª¤</a></p>
</li>
<li><p>é…ç½®æ¨¡æ¿<code>python</code>ä¸ºä¾‹ï¼Œ<code>Sublime Text--&gt;Preferences--&gt;Browse Packages</code>æ‰¾åˆ°<code>SublimeTmpl</code>ä¸‹<code>templates</code>ä¸­<code>python.tmpl</code>æ–‡ä»¶è¿›è¡Œç¼–è¾‘</p>
<p><img src="https://image.ritboy.com/markdown/202004/33977b0fc97fa0478ee78a121b5062a4.jpg" alt="Screen Shot 2018-03-06 at 15.25.56"></p>
</li>
<li><p>ä¿®æ”¹æ–°å»ºæ¨¡æ¿çƒ­é”®ï¼Œåœ¨<code>Sublime Text--&gt;Preferences--&gt;Package Settings--&gt;SublimeTmpl--&gt;Key Bingdings -User</code>æ·»åŠ çƒ­é”®é…ç½®</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        <span class="attr">"keys"</span>: [<span class="string">"control+option+p"</span>], <span class="attr">"command"</span>: <span class="string">"sublime_tmpl"</span>, <span class="comment">// windows key: "ctrl+alt+p"</span></span><br><span class="line">        <span class="attr">"args"</span>: &#123;<span class="attr">"type"</span>: <span class="string">"python"</span>&#125;, <span class="attr">"context"</span>: [&#123;<span class="attr">"key"</span>: <span class="string">"sublime_tmpl.python"</span>&#125;]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://image.ritboy.com/markdown/202004/37a9bdf6d6520558f58cc6bd169665ff.jpg" alt="Screen Shot 2018-03-06 at 15.45.29"></p>
</li>
</ul>
<h3 id="Anaconda"><a href="#Anaconda" class="headerlink" title="Anaconda"></a>Anaconda</h3><p>è‡ªåŠ¨åŒ¹é…å…³é”®å­—ç­‰å®ç”¨åŠŸèƒ½ï¼Œæœ‰æ•ˆæé«˜å¼€å‘æ•ˆç‡</p>
<ul>
<li>å®‰è£…å‚è€ƒ<a href="#jump01">å®‰è£…æ’ä»¶æ­¥éª¤</a></li>
</ul>
<h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><h4 id="é—®é¢˜1"><a href="#é—®é¢˜1" class="headerlink" title="é—®é¢˜1"></a>é—®é¢˜1</h4><ul>
<li><p>Buildæ—¶æŠ¥é”™<strong>UnicodeEncodeError: â€˜asciiâ€™ codec canâ€™t encode characters in position 0-2: ordinal not in range(128)</strong><a href="https://stackoverflow.com/questions/15166076/sublime-text-2-encoding-error-with-python3-build/15174760#15174760" target="_blank" rel="noopener external nofollow noreferrer">ç½‘ä¸Šé“¾æ¥</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"cmd"</span>: [<span class="string">"python3"</span>, <span class="string">"-u"</span>, <span class="string">"$file"</span>],</span><br><span class="line">    <span class="attr">"file_regex"</span>: <span class="string">"^[ ]*File \"(...*?)\", line ([0-9]*)"</span>,</span><br><span class="line">    <span class="attr">"selector"</span>: <span class="string">"source.python"</span>,</span><br><span class="line">    <span class="attr">"env"</span>: &#123;<span class="attr">"LANG"</span>: <span class="string">"en_US.UTF-8"</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://lib.csdn.net/article/python/63800" target="_blank" rel="noopener external nofollow noreferrer">å°†Sublime Text 3è®¾ç½®ä¸ºPythonå…¨æ ˆå¼€å‘ç¯å¢ƒ</a></p>
<p><a href="http://www.cnblogs.com/honkly/p/6599642.html" target="_blank" rel="noopener external nofollow noreferrer">Sublime text 3 + pythoné…ç½®ï¼Œå®Œæ•´æ­å»ºåŠå¸¸ç”¨æ’ä»¶å®‰è£…</a></p>
]]></content>
      <categories>
        <category>MacOS</category>
      </categories>
      <tags>
        <tag>MacOS</tag>
        <tag>Sublime Text3</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬è¯­æ³•å°ç»“</title>
    <url>/articles/774295979.html</url>
    <content><![CDATA[<h3 id="Shellä¸­-if-elseä»¥åŠå¤§äºã€å°äºã€ç­‰äºé€»è¾‘è¡¨è¾¾å¼ä»‹ç»"><a href="#Shellä¸­-if-elseä»¥åŠå¤§äºã€å°äºã€ç­‰äºé€»è¾‘è¡¨è¾¾å¼ä»‹ç»" class="headerlink" title="Shellä¸­ if elseä»¥åŠå¤§äºã€å°äºã€ç­‰äºé€»è¾‘è¡¨è¾¾å¼ä»‹ç»"></a>Shellä¸­ if elseä»¥åŠå¤§äºã€å°äºã€ç­‰äºé€»è¾‘è¡¨è¾¾å¼ä»‹ç»</h3><ul>
<li><p><strong>æ¡ä»¶æµ‹è¯•çš„è¡¨è¾¾å¼ï¼š</strong></p>
<ul>
<li>[ expression ]  æ‹¬å·ä¸¤ç«¯å¿…é¡»è¦æœ‰ç©ºæ ¼</li>
<li>[[ expression ]] æ‹¬å·ä¸¤ç«¯å¿…é¡»è¦æœ‰ç©ºæ ¼<a id="more"></a></li>
</ul>
</li>
<li><p><strong>æ•´æ•°æ¯”è¾ƒï¼š</strong></p>
<ul>
<li><p>-eq æµ‹è¯•ä¸¤ä¸ªæ•´æ•°æ˜¯å¦ç›¸ç­‰</p>
</li>
<li><p>-ne æµ‹è¯•ä¸¤ä¸ªæ•´æ•°æ˜¯å¦ä¸ç­‰</p>
</li>
<li><p>-gt æµ‹è¯•ä¸€ä¸ªæ•°æ˜¯å¦å¤§äºå¦ä¸€ä¸ªæ•°</p>
</li>
<li><p>-lt æµ‹è¯•ä¸€ä¸ªæ•°æ˜¯å¦å°äºå¦ä¸€ä¸ªæ•°</p>
</li>
<li><p>-ge å¤§äºæˆ–ç­‰äº</p>
</li>
<li><p>-le å°äºæˆ–ç­‰äº</p>
</li>
<li><p><strong>å‘½ä»¤é—´çš„é€»è¾‘å…³ç³»</strong></p>
<ul>
<li>é€»è¾‘ä¸ï¼š&amp;&amp;</li>
</ul>
<p>â€‹        ç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ºå‡ ç¬¬äºŒä¸ªæ¡ä»¶ä¸ç”¨åœ¨åˆ¤æ–­ï¼Œæœ€æ€»ç»“æœå·²ç»æœ‰</p>
<pre><code>ç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ºçœŸï¼Œç¬¬äºŒä¸ªæ¡ä»¶å¿…é¡»å¾—åˆ¤æ–­</code></pre><ul>
<li>é€»è¾‘æˆ–ï¼š||</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>å­—ç¬¦ä¸²æ¯”è¾ƒ</strong></p>
<ul>
<li>== ç­‰äº  ä¸¤è¾¹è¦æœ‰ç©ºæ ¼</li>
<li>!= ä¸ç­‰</li>
<li>&gt;  å¤§äº</li>
<li>&lt;  å°äº</li>
</ul>
</li>
<li><p><strong>æ–‡ä»¶æµ‹è¯•</strong></p>
<ul>
<li>-z string æµ‹è¯•æŒ‡å®šå­—ç¬¦æ˜¯å¦ä¸ºç©ºï¼Œç©ºç€çœŸï¼Œéç©ºä¸ºå‡</li>
<li>-n string æµ‹è¯•æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦ä¸ºä¸ç©ºï¼Œç©ºä¸ºå‡ éç©ºä¸ºçœŸ</li>
<li>-e FILE æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>-f file æµ‹è¯•æ–‡ä»¶æ˜¯å¦ä¸ºæ™®é€šæ–‡ä»¶</li>
<li>-d file æµ‹è¯•æŒ‡å®šè·¯å¾„æ˜¯å¦ä¸ºç›®å½•</li>
<li>-r file æµ‹è¯•æ–‡ä»¶å¯¹å½“å‰ç”¨æˆ·æ˜¯å¦å¯è¯»</li>
<li>-w file æµ‹è¯•æ–‡ä»¶å¯¹å½“å‰ç”¨æˆ·æ˜¯å¦å¯å†™</li>
<li>-x file æµ‹è¯•æ–‡ä»¶å¯¹å½“å‰ç”¨æˆ·æ˜¯éƒ½å¯æ‰§è¡Œ</li>
<li>-z  æ˜¯å¦ä¸ºç©º  ä¸ºç©ºåˆ™ä¸ºçœŸ</li>
<li>-a  æ˜¯å¦ä¸ç©º</li>
</ul>
</li>
<li><p><strong>ifè¯­æ³•</strong></p>
<p>if åˆ¤æ–­æ¡ä»¶ 0ä¸ºçœŸ å…¶ä»–éƒ½ä¸ºå‡</p>
<ul>
<li>å•åˆ†æ”¯ifè¯­å¥</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if åˆ¤æ–­æ¡ä»¶ï¼›then</span><br><span class="line">    statement1</span><br><span class="line">    statement2</span><br><span class="line">    .......</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<ul>
<li>åŒåˆ†æ”¯çš„ifè¯­å¥ï¼š</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">if åˆ¤æ–­æ¡ä»¶ï¼›then</span><br><span class="line">    statement1</span><br><span class="line">    statement2</span><br><span class="line">    .....</span><br><span class="line">    else</span><br><span class="line">    statement3</span><br><span class="line">    statement4</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><strong>Note:</strong></p>
<pre><code>ifè¯­å¥è¿›è¡Œåˆ¤æ–­æ˜¯å¦ä¸ºç©º` [ &quot;$nameâ€ = &quot;&quot; ] `ç­‰åŒäº`[ ! &quot;$name&quot; ]`æˆ–è€…`[ -z &quot;$name&quot; ]`</code></pre><p>â€‹</p>
</li>
<li><p><strong>ä¾‹å­</strong></p>
<p>ç¤ºä¾‹è„šæœ¬ï¼ˆå†™ä¸€æ®µè„šæœ¬ï¼Œè¾“å…¥ä¸€ä¸ªæµ‹éªŒæˆç»©ï¼Œæ ¹æ®ä¸‹é¢çš„æ ‡å‡†ï¼Œè¾“å‡ºä»–çš„è¯„åˆ†æˆç»©ï¼ˆA-Fï¼‰</p>
<p>A: 90â€“100</p>
<p>B: 80â€“89</p>
<p>C: 70â€“79</p>
<p>D: 60â€“69</p>
<p>F: &lt;60 </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#&#x2F;bin&#x2F;bash</span><br><span class="line">#Verson:0.1</span><br><span class="line">#Auther:lovelace</span><br><span class="line">#Pragram:This pragram is calculation your grade</span><br><span class="line">#import an argument</span><br><span class="line">read -p &quot;Please input your grade:&quot; x</span><br><span class="line">declare -i x</span><br><span class="line">#jugemet $x value is none or not</span><br><span class="line">if [ &quot;$x&quot; &#x3D;&#x3D; &quot;&quot; ];then</span><br><span class="line">    echo &quot;You don&#39;t input your grade....&quot;</span><br><span class="line">    exit 5</span><br><span class="line">fi</span><br><span class="line">#jugement the gread level</span><br><span class="line">if [[ &quot;$x&quot; -ge &quot;90&quot; &amp;&amp; &quot;$x&quot; -le &quot;100&quot; ]];then</span><br><span class="line">    echo &quot;Congratulation,Your grade is A.&quot;</span><br><span class="line">elif [[ &quot;$x&quot; -ge &quot;80&quot; &amp;&amp; &quot;$x&quot; -le &quot;89&quot; ]];then</span><br><span class="line">    echo &quot;Good,Your grade is B.&quot;</span><br><span class="line">elif [[ &quot;$x&quot; -ge &quot;70&quot; &amp;&amp; &quot;$x&quot; -le &quot;79&quot; ]];then</span><br><span class="line">    echo &quot;Ok.Your grade is C.&quot;</span><br><span class="line">elif [[ &quot;$x&quot; -ge &quot;60&quot; &amp;&amp; &quot;$x&quot; -le &quot;69&quot; ]];then</span><br><span class="line">    echo &quot;Yeah,Your grade is D.&quot;</span><br><span class="line">elif [[ &quot;$x&quot; -lt &quot;60&quot; ]];then</span><br><span class="line">    echo &quot;Right,Your grade is F.&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;Unknow argument....&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>â€‹</p>
</li>
</ul>
<h3 id="Shellä¸­forå¾ªç¯çš„å‡ ä¸ªå¸¸ç”¨å†™æ³•"><a href="#Shellä¸­forå¾ªç¯çš„å‡ ä¸ªå¸¸ç”¨å†™æ³•" class="headerlink" title="Shellä¸­forå¾ªç¯çš„å‡ ä¸ªå¸¸ç”¨å†™æ³•"></a><a href="https://blog.csdn.net/BabyFish13/article/details/52981110" target="_blank" rel="noopener external nofollow noreferrer">Shellä¸­forå¾ªç¯çš„å‡ ä¸ªå¸¸ç”¨å†™æ³•</a></h3>]]></content>
      <categories>
        <category>Shell</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Shell</tag>
      </tags>
  </entry>
  <entry>
    <title>RobotFramework-Dockeråˆ¶ä½œ</title>
    <url>/articles/1592056819.html</url>
    <content><![CDATA[<h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><ul>
<li>å®‰è£…<code>Git</code>å’Œè¿è¡ŒRobotFrameworkæµ‹è¯•ç”¨ä¾‹éœ€è¦çš„åº“</li>
<li><code>unic.py</code>æ–‡ä»¶ä¸»è¦æ·»åŠ äº†RobotFrameworkè¿è¡Œè¾“å‡ºä¸­æ–‡ä¹±ç çš„é—®é¢˜</li>
<li><code>send_robot_result_email.py</code>æ–‡ä»¶æ˜¯è§£æRobotFrameworkè¿è¡Œç»“æœä¸­<code>output.xml</code>æ–‡ä»¶ï¼Œç„¶åæŠŠè§£æçš„ç»“æœæ•´ç†æˆ<code>html</code>æ ¼å¼é€šè¿‡é‚®ä»¶å‘é€å‡ºæ¥</li>
<li><code>run_robotframework.sh</code>æ–‡ä»¶æ˜¯è¿è¡ŒRobotFrameworkæµ‹è¯•ç”¨ä¾‹ï¼Œç„¶åè¿è¡Œ<code>send_robot_result_email.py</code>è„šæœ¬</li>
<li>é…ç½®å®šæ—¶æ‰§è¡Œè„šæœ¬<code>send_robot_result_email.py</code>ä»»åŠ¡<a id="more"></a>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">2.7</span>-alpine</span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> maintainer=<span class="string">"leicj &lt;leicj@wise2c.com&gt;"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="comment"># å®‰è£…gitï¼Œé…ç½®gitçš„nameå’Œemail</span></span><br><span class="line"><span class="comment"># é…ç½®æ—¶åŒºï¼šAsia/Shanghai</span></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk --update add git tzdata &amp;&amp; \</span></span><br><span class="line"><span class="bash">    git config --global user.email <span class="string">"leicj@wise2c.com"</span> &amp;&amp; \</span></span><br><span class="line"><span class="bash">    git config --global user.name <span class="string">"TestGroup"</span> &amp;&amp; \</span></span><br><span class="line"><span class="bash">    cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \</span></span><br><span class="line"><span class="bash">    apk del tzdata</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="comment"># å®‰è£…wise2céœ€è¦çš„robotframeworkåº“ï¼šselenium2library</span></span><br><span class="line"><span class="comment">#    requests,databaselibrary</span></span><br><span class="line"><span class="comment"># å…¶ä¸­pymysqlæ˜¯databaselibraryéœ€è¦çš„æ’ä»¶</span></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install -U \</span></span><br><span class="line"><span class="bash">    pip \</span></span><br><span class="line"><span class="bash">    pymysql \</span></span><br><span class="line"><span class="bash">    robotframework \</span></span><br><span class="line"><span class="bash">    robotframework-requests \</span></span><br><span class="line"><span class="bash">    robotframework-selenium2library \</span></span><br><span class="line"><span class="bash">    robotframework-databaselibrary</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="comment"># æ‹·è´unic.pyï¼Œè§£å†³è¾“å‡ºç»“æœåˆä¸­æ–‡ä¹±ç ï¼Œæ·»åŠ utf-8ç¼–ç </span></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> unic.py	/usr/<span class="built_in">local</span>/lib/python2.7/site-packages/robot/utils/unic.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="comment"># æ‹·è´send_robot_result_email.pyï¼Œä¸»è¦ç”¨äºè§£æè¿è¡Œç»“æœå¹¶å‘é€é‚®ä»¶</span></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> robotframework.py /send_robot_result_email.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="comment"># æ‹·è´run_robotframework.shï¼Œè¿è¡Œwise2c UIè‡ªåŠ¨åŒ–caseï¼Œç„¶åå‘å‡ºé‚®ä»¶</span></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> robot.sh   /run_robotframework.sh</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chmod +x /run_robotframework.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="comment"># é…ç½®å®šæ—¶æ‰§è¡Œè¿è¡Œè„šæœ¬run_robotframework.sh</span></span><br><span class="line"><span class="comment">#================================================</span></span><br><span class="line"><span class="keyword">ENV</span> CRONJOB=<span class="string">"0	3	*	*	*"</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;CRONJOB&#125;</span>	sh /run_robotframework.sh"</span> &gt;&gt; /etc/crontabs/root</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> EMAIL_TO_LIST=leicj@wise2c.com,liaoxb@wise2c.com,weiht@wise2c.com,leji.chen@wise2c.com</span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">"/automationtest"</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"crond -f"</span>]</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Dockerè¿è¡Œ"><a href="#Dockerè¿è¡Œ" class="headerlink" title="Dockerè¿è¡Œ"></a>Dockerè¿è¡Œ</h3><ul>
<li>è¿è¡Œä»¥ä¸‹<code>shell</code>å‘½ä»¤</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run -d --name chrome-browser -v &#x2F;dev&#x2F;shm:&#x2F;dev&#x2F;shm selenium&#x2F;standalone-chrome</span><br><span class="line">docker run -d --name wise2c-auto --link chrome-browser:web registry.cn-hangzhou.aliyuncs.com&#x2F;xiaoyaoray&#x2F;robotframework-wise2c # å¯ä»¥åŠ ä¸Š -v xxxx:&#x2F;automationtest automationtestä¸»è¦å­˜æ”¾RobotFrameworkéœ€è¦è¿è¡Œçš„Case</span><br><span class="line">sh &#x2F;run_robotframework.sh #è¿›å…¥åˆ°å®¹å™¨wise2c-autoä¸­æ‰§è¡Œè¯¥è„šæœ¬</span><br></pre></td></tr></table></figure>

<ul>
<li><code>robotframework-wise2c</code>é•œåƒä¸­æ˜ å°„å·<code>/automationtest</code>å­˜æ”¾RobotFrameworkéœ€è¦è¿è¡Œçš„Caseï¼Œæ‰§è¡Œè„šæœ¬<code>/run_robotframework.sh</code>å°±æ˜¯æ‰§è¡Œ<code>/automationtest</code>ç›®å½•ä¸‹çš„æµ‹è¯•ç”¨ä¾‹</li>
<li>ç¯å¢ƒå˜é‡<code>CRONJOB</code>å®šæ—¶æ‰§è¡Œè„šæœ¬<code>/run_robotframework.sh</code>è¡¨è¾¾å¼</li>
<li>ç¯å¢ƒå˜é‡<code>EMAIL_TO_LIST</code>æ”¶åˆ°é‚®ä»¶çš„äººä¿¡æ¯ï¼Œä¸åŒé‚®ç®±é—´ç”¨<code>é€—å·</code>åˆ†å¼€</li>
<li><strong>PS:</strong>é»˜è®¤æƒ…å†µä¸‹æ¯å¤©å‡Œæ™¨3ç‚¹ä¼šæ‰§è¡Œè„šæœ¬<code>/run_robotframework.sh</code></li>
</ul>
<h3 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h3><ul>
<li><p><code>run_robotframework.sh</code>è„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;wise2c_leicj:qwer1234@gitee.com&#x2F;wisecloud&#x2F;automationtest.git &#x2F;home&#x2F;wise2c</span><br><span class="line">cp -r &#x2F;home&#x2F;wise2c&#x2F;* &#x2F;automationtest</span><br><span class="line">cd &#x2F;home&#x2F;wise2c</span><br><span class="line">git checkout log</span><br><span class="line">outputdir&#x3D;&#96;date +%Y%m%d-%H:%M:%S&#96;</span><br><span class="line">web_ip&#x3D;&#96;env | grep &quot;PORT_4444_TCP_ADDR&quot; | awk -F &#x3D; &#39;&#123;print $2&#125;&#39;&#96;</span><br><span class="line">robot -v REMOTE_URL:http:&#x2F;&#x2F;$web_ip:4444&#x2F;wd&#x2F;hub -s ui -d &#x2F;home&#x2F;wise2c&#x2F;$outputdir &#x2F;automationtest</span><br><span class="line">cd &#x2F;home&#x2F;wise2c</span><br><span class="line">dirs&#x3D;&#96;ls -l &#x2F;home&#x2F;wise2c | grep &quot;^d&quot; | awk &#39;&#123;print $9&#125;&#39;| sort -r&#96;</span><br><span class="line">i&#x3D;0</span><br><span class="line">for name in $dirs</span><br><span class="line">do</span><br><span class="line">    let i&#x3D;i+1</span><br><span class="line">    if [ i -ge 30];then</span><br><span class="line">        rm -rf $name</span><br><span class="line">    fi</span><br><span class="line">done</span><br><span class="line">git add .</span><br><span class="line">git commit -m $outputdir</span><br><span class="line">git push origin log</span><br><span class="line">python &#x2F;send_robot_result_email.py &#x2F;home&#x2F;wise2c&#x2F;$outputdir $EMAIL_TO_LIST</span><br><span class="line">rm -rf &#x2F;home&#x2F;wise2c</span><br><span class="line">rm -rf &#x2F;automationtest&#x2F;*</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>send_robot_result_email.py</code>è„šæœ¬</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> smtplib, datetime, sys</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_test_result_mail</span><span class="params">(receiver, robot_result, sender=None, password=None)</span>:</span></span><br><span class="line">    <span class="string">"""å‘é€æµ‹è¯•ç»“æœåˆ°é‚®ç®±</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> sender:</span><br><span class="line">        sender = <span class="string">"leicj@wise2c.com"</span></span><br><span class="line">        password = <span class="string">"N5SEnQz39AgHFibr"</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> password:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"å¯†ç ä¸ºç©ºï¼Œè¯·é‡è¯•ï¼"</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    mail_subject = <span class="string">"Automation Test Report"</span></span><br><span class="line">    mail_smtpserver = <span class="string">"smtp.exmail.qq.com"</span></span><br><span class="line">    mail_username = <span class="string">"leicj@wise2c.com"</span></span><br><span class="line">    mail_password = <span class="string">"N5SEnQz39AgHFibr"</span></span><br><span class="line">    mail_to_addrs = receiver.split(<span class="string">","</span>)</span><br><span class="line"></span><br><span class="line">    msg = MIMEText(robot_result, _subtype=<span class="string">"html"</span>, _charset=<span class="string">"utf-8"</span>)</span><br><span class="line">    msg[<span class="string">"Subject"</span>] = Header(mail_subject, <span class="string">"utf-8"</span>)</span><br><span class="line">    msg[<span class="string">"From"</span>] = <span class="string">"Wise2c-TestGroup"</span></span><br><span class="line">    msg[<span class="string">"To"</span>] = msg[<span class="string">"To"</span>] = <span class="string">","</span>.join(mail_to_addrs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        smtp = smtplib.SMTP_SSL()</span><br><span class="line">        smtp.connect(mail_smtpserver, port=<span class="number">465</span>)</span><br><span class="line">        smtp.login(mail_username, mail_password)</span><br><span class="line">        smtp.sendmail(mail_username, mail_to_addrs, msg.as_string())</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"é‚®ä»¶å‘é€å¤±è´¥ï¼è¯·æ£€æŸ¥é…ç½®ï¼Œç„¶åé‡è¯•ï¼"</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"é‚®ä»¶å‘é€æˆåŠŸï¼æ³¨æ„æŸ¥æ”¶ï¼"</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        smtp.quit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_to_str</span><span class="params">(unicode_or_str)</span>:</span></span><br><span class="line">    <span class="string">"""å°†unicodeå­—ç¬¦ä¸²è½¬æ¢ä¸ºstrç±»å‹</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(unicode_or_str, unicode):</span><br><span class="line">        value = unicode_or_str.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        value = unicode_or_str</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_get_excdate</span><span class="params">(elment)</span>:</span></span><br><span class="line">    start = elment.attrib.get(<span class="string">"starttime"</span>)</span><br><span class="line">    end = elment.attrib.get(<span class="string">"endtime"</span>)</span><br><span class="line">    start = datetime.datetime.strptime(start, <span class="string">"%Y%m%d %H:%M:%S.%f"</span>)</span><br><span class="line">    end = datetime.datetime.strptime(end, <span class="string">"%Y%m%d %H:%M:%S.%f"</span>)</span><br><span class="line">    m, s = divmod((end - start).seconds, <span class="number">60</span>)</span><br><span class="line">    <span class="keyword">if</span> int(m) == <span class="number">0</span>:</span><br><span class="line">        excdate = <span class="string">"%sç§’"</span> % s</span><br><span class="line">    <span class="keyword">elif</span> int(s) == <span class="number">0</span>:</span><br><span class="line">        excdate = <span class="string">"%såˆ†"</span> % m</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        excdate = <span class="string">"%såˆ†%sç§’"</span> % (m, s)</span><br><span class="line">    <span class="keyword">return</span> excdate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_parse_results_xml</span><span class="params">(xml_path)</span>:</span></span><br><span class="line">    <span class="string">"""RobotFrameworkè¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ç»“æœè§£æ</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    tree = ElementTree.parse(xml_path)</span><br><span class="line">    results = &#123;&#125;</span><br><span class="line">    fail_cases = []</span><br><span class="line"></span><br><span class="line">    root = tree.getroot().attrib[<span class="string">"generated"</span>]</span><br><span class="line">    run_date = datetime.datetime.strptime(root, <span class="string">"%Y%m%d %H:%M:%S.%f"</span>)</span><br><span class="line">    run_date = datetime.datetime.strftime(run_date, <span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line">    results[<span class="string">"run_date"</span>] = run_date</span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> tree.findall(<span class="string">"suite"</span>):</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> n.findall(<span class="string">"status"</span>):</span><br><span class="line">            results[<span class="string">"suite_date"</span>] = _get_excdate(y)</span><br><span class="line">            <span class="keyword">if</span> y.attrib[<span class="string">"status"</span>] == <span class="string">"pass"</span>:</span><br><span class="line">                results[<span class="string">"status"</span>] = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                results[<span class="string">"status"</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> tree.getiterator(<span class="string">"total"</span>):</span><br><span class="line">        results[<span class="string">"fail_num"</span>] = int(i.find(<span class="string">"stat"</span>).attrib.get(<span class="string">"fail"</span>))</span><br><span class="line">        results[<span class="string">"pass_num"</span>] = int(i.find(<span class="string">"stat"</span>).attrib.get(<span class="string">"pass"</span>))</span><br><span class="line">        results[<span class="string">"total_num"</span>] = results[<span class="string">"fail_num"</span>] + results[<span class="string">"pass_num"</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> results[<span class="string">"status"</span>]:</span><br><span class="line">        <span class="keyword">for</span> test <span class="keyword">in</span> tree.getiterator(<span class="string">"test"</span>):</span><br><span class="line">            <span class="keyword">if</span> test.find(<span class="string">"status"</span>).attrib.get(<span class="string">"status"</span>) == <span class="string">"FAIL"</span>:</span><br><span class="line">                test_info = test.attrib</span><br><span class="line">                test_info[<span class="string">"excDate"</span>] = _get_excdate(test.find(<span class="string">"status"</span>))</span><br><span class="line">                fail_cases.append(test_info)</span><br><span class="line">        results[<span class="string">"fail_cases"</span>] = fail_cases</span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">output_xml = sys.argv[<span class="number">1</span>]</span><br><span class="line">url = <span class="string">"http://wisecloud.gitee.io/automationtest/"</span> + output_xml[<span class="number">13</span>:]</span><br><span class="line">res = _parse_results_xml(output_xml + <span class="string">"/output.xml"</span>)</span><br><span class="line"></span><br><span class="line">base_styles = <span class="string">"""</span></span><br><span class="line"><span class="string">/*base css*/</span></span><br><span class="line"><span class="string">a&#123;color:#4a72af&#125;</span></span><br><span class="line"><span class="string">body&#123;background-color:#e4e4e4&#125;</span></span><br><span class="line"><span class="string">body,p&#123;margin:0;padding:0&#125;</span></span><br><span class="line"><span class="string">img&#123;display:block&#125;</span></span><br><span class="line"><span class="string">h1,h2,h3,h4,h5,h6&#123;margin:0 0 .8em 0&#125;</span></span><br><span class="line"><span class="string">h3&#123;font-size:28px;color:#444!important;font-family:Arial,Helvetica,sans-serif&#125;</span></span><br><span class="line"><span class="string">h4&#123;font-size:22px;color:#4a72af!important;font-family:Arial,Helvetica,sans-serif&#125;</span></span><br><span class="line"><span class="string">h5&#123;font-size:18px;color:#444!important;font-family:Arial,Helvetica,sans-serif&#125;</span></span><br><span class="line"><span class="string">p&#123;font-size:12px;color:#444!important;font-family:"Lucida Grande","Lucida Sans","Lucida Sans Unicode",sans-serif;line-height:1.5&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">table.robotstat &#123;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string">  border-collapse: collapse;</span></span><br><span class="line"><span class="string">  empty-cells: show;</span></span><br><span class="line"><span class="string">  margin: 0px 1px;</span></span><br><span class="line"><span class="string">  table-layout: fixed;</span></span><br><span class="line"><span class="string">  word-wrap: break-word;</span></span><br><span class="line"><span class="string">  font-size: 1em;</span></span><br><span class="line"><span class="string">  width:100%;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">table.robotstat td&#123;</span></span><br><span class="line"><span class="string">    border: 1px solid #ddd;</span></span><br><span class="line"><span class="string">    padding: 4px;</span></span><br><span class="line"><span class="string">    line-height: 1.42857143;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">tr.test_column_robot &#123;</span></span><br><span class="line"><span class="string">  background-colorï¼š#C6C6C6;</span></span><br><span class="line"><span class="string">  border: 1px solid black;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ol li img&#123;display:inline;height:20px&#125;"""</span></span><br><span class="line"></span><br><span class="line">div_styles = <span class="string">"""</span></span><br><span class="line"><span class="string">/*div styles*/</span></span><br><span class="line"><span class="string">.news&#123;text-align:center;padding-top:15px;&#125;</span></span><br><span class="line"><span class="string">.content&#123;width:720px;margin:0 auto;background-color:white&#125;</span></span><br><span class="line"><span class="string">.round_border&#123;margin-bottom:5px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;margin-top:0;font-size:14px;padding:6px;border:1px solid #ccc&#125;</span></span><br><span class="line"><span class="string">.status .info&#123;color:white!important;text-shadow:0 -1px 0 rgba(0,0,0,0.3);font-size:32px;line-height:36px;padding:8px 0&#125;</span></span><br><span class="line"><span class="string">.main img&#123;width:38px;margin-right:16px;height:38px&#125;</span></span><br><span class="line"><span class="string">.main table&#123;font-size:14px;&#125;</span></span><br><span class="line"><span class="string">.main table th&#123;text-align:right;&#125;</span></span><br><span class="line"><span class="string">.bottom-message&#123;width:720px;cellpadding:5px;cellspacing:0px&#125;</span></span><br><span class="line"><span class="string">.bottom-message .message&#123;font-size:13px;color:#aaa;line-height:18px;text-align:center&#125;</span></span><br><span class="line"><span class="string">.bottom-message .designed&#123;font-size:13px;color:#aaa;line-height:18px;font-style: italic;text-align:right&#125;</span></span><br><span class="line"><span class="string">img.cartoon &#123;width: 36px; display:inline&#125;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">if</span> res[<span class="string">"status"</span>]:</span><br><span class="line">    build_status_color = <span class="string">"green"</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    build_status_color = <span class="string">"red"</span></span><br><span class="line">div_styles += <span class="string">".status&#123;background-color:%s;font-size:28px;font-weight:bold;color:white;width:720px;height:52px;margin-bottom:18px;text-align:center;vertical-align:middle;border-collapse:collapse;background-repeat:no-repeat&#125;"</span> % build_status_color</span><br><span class="line"></span><br><span class="line">msg_styles = <span class="string">"&lt;STYLE&gt;"</span> + base_styles + div_styles + <span class="string">"&lt;/STYLE&gt;"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msg_body = <span class="string">"""&lt;DIV class="content round_border"&gt;</span></span><br><span class="line"><span class="string">&lt;DIV class="status"&gt;"""</span></span><br><span class="line"><span class="keyword">if</span> res[<span class="string">"status"</span>]:</span><br><span class="line">    test_res = <span class="string">"æˆåŠŸ"</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    test_res = <span class="string">"å¤±è´¥"</span></span><br><span class="line">msg_body += <span class="string">"""&lt;h4 class="info"&gt;æµ‹è¯•ç»“æœ:%s&lt;/h4&gt;"""</span> % test_res</span><br><span class="line"></span><br><span class="line">msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;/DIV&gt;</span></span><br><span class="line"><span class="string">&lt;TABLE&gt;</span></span><br><span class="line"><span class="string">  &lt;TR&gt;&lt;TD&gt;Project:&lt;/TD&gt;&lt;TD&gt;WiseCloudè‡ªåŠ¨åŒ–æµ‹è¯•&lt;/TD&gt;&lt;/TR&gt;"""</span></span><br><span class="line">msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">  &lt;TR&gt;&lt;TD&gt;Date of run:&lt;/TD&gt;&lt;TD&gt;%s&lt;/TD&gt;&lt;/TR&gt;"""</span> % res[<span class="string">"run_date"</span>]</span><br><span class="line">msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">  &lt;TR&gt;&lt;TD&gt;Test duration:&lt;/TD&gt;&lt;TD&gt;%s&lt;/TD&gt;&lt;/TR&gt; """</span> % res[<span class="string">"suite_date"</span>]</span><br><span class="line">msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">  &lt;TR&gt;&lt;TD&gt;Test report:&lt;/TD&gt;&lt;TD&gt;&lt;A href="%s/report.html"&gt;Open report.html&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"""</span> % url</span><br><span class="line">msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">  &lt;TR&gt;&lt;TD&gt;Test log:&lt;/TD&gt;&lt;TD&gt;&lt;A href="%s/log.html"&gt;Open log.html&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"""</span> % url</span><br><span class="line">msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;/TABLE&gt;</span></span><br><span class="line"><span class="string">&lt;/DIV&gt;</span></span><br><span class="line"><span class="string">&lt;BR/&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;!-- Robot Framework Results --&gt;</span></span><br><span class="line"><span class="string">&lt;DIV class="content round_border"&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;&lt;h4&gt;Robot Framework Results&lt;/h4&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;table class="robotstat"&gt;</span></span><br><span class="line"><span class="string">        &lt;thead&gt;</span></span><br><span class="line"><span class="string">          &lt;tr class="test_column_robot"&gt;</span></span><br><span class="line"><span class="string">            &lt;td&gt;&lt;b&gt;Total&lt;/b&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td&gt;&lt;b&gt;Passed&lt;/b&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td&gt;&lt;b&gt;Failed&lt;/b&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">            &lt;td&gt;&lt;b&gt;Pass %&lt;/b&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">          &lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;/thead&gt;</span></span><br><span class="line"><span class="string">        &lt;tbody&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">msg_body += <span class="string">"&lt;td&gt;%s&lt;/td&gt;"</span> % res[<span class="string">"total_num"</span>]</span><br><span class="line">msg_body += <span class="string">"&lt;td&gt;%s&lt;/td&gt;"</span> % res[<span class="string">"pass_num"</span>]</span><br><span class="line">msg_body += <span class="string">"&lt;td&gt;%s&lt;/td&gt;"</span> % res[<span class="string">"fail_num"</span>]</span><br><span class="line">percent = float(res[<span class="string">"pass_num"</span>]) * <span class="number">100</span> / float(res[<span class="string">"total_num"</span>])</span><br><span class="line">msg_body += <span class="string">"&lt;td&gt;%0.2f&lt;/td&gt;"</span> % percent</span><br><span class="line"></span><br><span class="line">msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">          &lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;/tbody&gt;</span></span><br><span class="line"><span class="string">      &lt;/table&gt;</span></span><br><span class="line"><span class="string">&lt;/DIV&gt;</span></span><br><span class="line"><span class="string">&lt;BR/&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">if</span> res[<span class="string">"status"</span>]:</span><br><span class="line">    msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">    &lt;DIV class="content round_border"&gt;</span></span><br><span class="line"><span class="string">    &lt;h4&gt;No Robot Framework test results found.&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/DIV&gt;</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> res[<span class="string">"status"</span>]:</span><br><span class="line">    msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">    &lt;DIV class="content round_border"&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;&lt;h4&gt;Robot Framework Error Cases&lt;/h4&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;table class="robotstat"&gt;</span></span><br><span class="line"><span class="string">    &lt;thead&gt;</span></span><br><span class="line"><span class="string">    &lt;tr class="test_column_robot"&gt;</span></span><br><span class="line"><span class="string">    &lt;td&gt;&lt;b&gt;Test Name&lt;/b&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">    &lt;td&gt;&lt;b&gt;Status&lt;/b&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">    &lt;td&gt;&lt;b&gt;Execution Datetime&lt;/b&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">    &lt;/tr&gt;</span></span><br><span class="line"><span class="string">    &lt;/thead&gt;</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">    &lt;tbody&gt;"""</span></span><br><span class="line">    <span class="keyword">for</span> case <span class="keyword">in</span> res[<span class="string">"fail_cases"</span>]:</span><br><span class="line">        case_name = _to_str(case[<span class="string">"name"</span>])</span><br><span class="line">        <span class="comment"># msg_body += """</span></span><br><span class="line">        <span class="comment"># &lt;tr&gt;&lt;td colspan="3"&gt;&lt;b&gt;%s&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;""" % case_name</span></span><br><span class="line">        msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">        &lt;tr&gt;"""</span></span><br><span class="line">        msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">        &lt;td&gt;&lt;a href="%s/log.html#%s"&gt;%s&lt;/a&gt;&lt;/td&gt;"""</span> % (url, case[<span class="string">"id"</span>], case_name)</span><br><span class="line">        msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">        &lt;td style="color: #FF3333"&gt;Fail&lt;/td&gt;</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">        &lt;td&gt;%s&lt;/td&gt;"""</span> % case[<span class="string">"excDate"</span>]</span><br><span class="line">        msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;"""</span></span><br><span class="line">    msg_body += <span class="string">"""</span></span><br><span class="line"><span class="string">    &lt;/tbody&gt;&lt;/table&gt;</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">msg_body = <span class="string">"&lt;BODY&gt;"</span> + msg_body + <span class="string">"&lt;/BODY&gt;"</span></span><br><span class="line">msg_head = <span class="string">"""&lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset="utf-8"&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;"""</span></span><br><span class="line"></span><br><span class="line">msg = <span class="string">"""&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html&gt;"""</span></span><br><span class="line">msg = msg + msg_head + msg_styles + msg_body + <span class="string">"&lt;/html&gt;"</span></span><br><span class="line"></span><br><span class="line">send_test_result_mail(sys.argv[<span class="number">2</span>], msg)</span><br><span class="line"><span class="comment"># with open("~/Desktop/robot_result.html", "w") as f:</span></span><br><span class="line"><span class="comment">#     f.write(msg)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#send_robotframework_mail("leicj@wise2c.com", msg)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>unic.py</code>è„šæœ¬</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#  Copyright 2008-2015 Nokia Networks</span></span><br><span class="line"><span class="comment">#  Copyright 2016-     Robot Framework Foundation</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment">#  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">#  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">#  distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment">#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">#  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">#  limitations under the License.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> PrettyPrinter</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .platform <span class="keyword">import</span> IRONPYTHON, JYTHON, PY2</span><br><span class="line"><span class="keyword">from</span> .robottypes <span class="keyword">import</span> is_bytes, is_unicode</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> PY2:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">unic</span><span class="params">(item)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> isinstance(item, unicode):</span><br><span class="line">            <span class="keyword">return</span> item</span><br><span class="line">        <span class="keyword">if</span> isinstance(item, (bytes, bytearray)):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment">#return item.decode('ASCII')</span></span><br><span class="line">                <span class="keyword">return</span> item.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">            <span class="keyword">except</span> UnicodeError:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">u''</span>.join(chr(b) <span class="keyword">if</span> b &lt; <span class="number">128</span> <span class="keyword">else</span> <span class="string">'\\x%x'</span> % b</span><br><span class="line">                                <span class="keyword">for</span> b <span class="keyword">in</span> bytearray(item))</span><br><span class="line">	<span class="keyword">if</span> isinstance(item, (list, dict, tuple)):</span><br><span class="line">	     <span class="keyword">try</span>:</span><br><span class="line">		item = json.dumps(item, ensure_ascii=<span class="literal">False</span>, encoding=<span class="string">'cp936'</span>)</span><br><span class="line">             <span class="keyword">except</span> UnicodeDecodeError:</span><br><span class="line">	         <span class="keyword">try</span>:</span><br><span class="line">		     item = json.dumps(item, ensure_ascii=<span class="literal">False</span>, encoding=<span class="string">'cp936'</span>)</span><br><span class="line">	         <span class="keyword">except</span>:</span><br><span class="line">		     	<span class="keyword">pass</span></span><br><span class="line">	     <span class="keyword">except</span>:</span><br><span class="line">		 	<span class="keyword">pass</span></span><br><span class="line">        <span class="comment"># æ·»åŠ éƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">return</span> unicode(item)</span><br><span class="line">            <span class="keyword">except</span> UnicodeError:</span><br><span class="line">                <span class="keyword">return</span> unic(str(item))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> _unrepresentable_object(item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">unic</span><span class="params">(item)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> isinstance(item, str):</span><br><span class="line">            <span class="keyword">return</span> item</span><br><span class="line">        <span class="keyword">if</span> isinstance(item, (bytes, bytearray)):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment">#return item.decode('ASCII')</span></span><br><span class="line">                <span class="keyword">return</span> item.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">            <span class="keyword">except</span> UnicodeError:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">''</span>.join(chr(b) <span class="keyword">if</span> b &lt; <span class="number">128</span> <span class="keyword">else</span> <span class="string">'\\x%x'</span> % b</span><br><span class="line">                               <span class="keyword">for</span> b <span class="keyword">in</span> item)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> str(item)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> _unrepresentable_object(item)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># JVM and .NET seem to handle Unicode normalization automatically. Importing</span></span><br><span class="line"><span class="comment"># unicodedata on Jython also takes some time so it's better to avoid it.</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> (JYTHON <span class="keyword">or</span> IRONPYTHON):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">from</span> unicodedata <span class="keyword">import</span> normalize</span><br><span class="line">    _unic = unic</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">unic</span><span class="params">(item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> normalize(<span class="string">'NFC'</span>, _unic(item))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">prepr</span><span class="params">(item, width=<span class="number">400</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> unic(PrettyRepr(width=width).pformat(item))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrettyRepr</span><span class="params">(PrettyPrinter)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">format</span><span class="params">(self, object, context, maxlevels, level)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> is_unicode(object):</span><br><span class="line">                <span class="keyword">return</span> repr(object).lstrip(<span class="string">'u'</span>), <span class="literal">True</span>, <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> is_bytes(object):</span><br><span class="line">                <span class="keyword">return</span> <span class="string">'b'</span> + repr(object).lstrip(<span class="string">'b'</span>), <span class="literal">True</span>, <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> PrettyPrinter.format(self, object, context, maxlevels, level)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> _unrepresentable_object(object), <span class="literal">True</span>, <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_unrepresentable_object</span><span class="params">(item)</span>:</span></span><br><span class="line">    <span class="keyword">from</span> .error <span class="keyword">import</span> get_error_message</span><br><span class="line">    <span class="keyword">return</span> <span class="string">u"&lt;Unrepresentable object %s. Error: %s&gt;"</span> \</span><br><span class="line">           % (item.__class__.__name__, get_error_message())</span><br></pre></td></tr></table></figure>

<p>â€‹</p>
</li>
</ul>
]]></content>
      <categories>
        <category>æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>Wise2c</tag>
        <tag>RobotFramework</tag>
      </tags>
  </entry>
  <entry>
    <title>Macä¸Šå®‰è£…Robotframework-RIDE</title>
    <url>/articles/2076826458.html</url>
    <content><![CDATA[<h3 id="æ‹·è´pthæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•"><a href="#æ‹·è´pthæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•" class="headerlink" title="æ‹·è´pthæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•"></a>æ‹·è´pthæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</h3><ul>
<li><p><a href="https://pan.baidu.com/s/1Ud2oGuTIdrj01z_SZZJkUg" target="_blank" rel="noopener external nofollow noreferrer">æ–‡ä»¶ç™¾åº¦äº‘é“¾æ¥</a>ï¼Œä»ç™¾åº¦äº‘ä¸‹è½½æ–‡ä»¶åˆ°ç›®å½•<code>Downloads</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo cp ~&#x2F;Downloads&#x2F;wxredirect.pth &#x2F;Library&#x2F;Python&#x2F;2.7&#x2F;site-packages&#x2F;</span><br></pre></td></tr></table></figure>

<p>â€‹</p>
<a id="more"></a>
<h3 id="æ‹·è´wxPythonç›®å½•åˆ°æŒ‡å®šç›®å½•"><a href="#æ‹·è´wxPythonç›®å½•åˆ°æŒ‡å®šç›®å½•" class="headerlink" title="æ‹·è´wxPythonç›®å½•åˆ°æŒ‡å®šç›®å½•"></a>æ‹·è´wxPythonç›®å½•åˆ°æŒ‡å®šç›®å½•</h3></li>
<li><p>åœ¨æ‰§è¡Œå‘½ä»¤ä¹‹å‰ï¼Œè¯·å…ˆç¡®ä¿ä½ çš„/usr/local/libç›®å½•æ˜¯å­˜åœ¨çš„ï¼Œå¦‚æœlibç›®å½•æ²¡æœ‰è¯·è‡ªå·±åˆ›å»ºä¸€ä¸ª:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mkdir &#x2F;usr&#x2F;local&#x2F;lib</span><br></pre></td></tr></table></figure>

<p>â€‹</p>
</li>
<li><p>å¦‚æœå·²ç»æœ‰libç›®å½•å°±ä¸ç”¨åˆ›å»ºç›®å½•äº†ï¼Œç›´æ¥æ‰§è¡Œä¸‹é¢çš„è¯­å¥</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo cp -r ~&#x2F;Downloads&#x2F;wxPython-unicode-2.8.12.1&#x2F; &#x2F;usr&#x2F;local&#x2F;lib&#x2F;wxPython-unicode-2.8.12.1&#x2F;</span><br></pre></td></tr></table></figure>

<p>â€‹</p>
</li>
<li><p>æ‹·è´å®Œæˆåï¼Œç¡®ä¿/usr/local/lib/wxPython-unicode-2.8.12.1/ç›®å½•ä¸‹æ˜¯binã€includeã€libã€shareå››ä¸ªç›®å½•ã€‚</p>
<p>è¿™æ ·å°±å®Œæˆäº†wxPythonçš„å®‰è£…äº†ï¼Œç„¶åè¯·è‡ªè¡Œå®Œæˆrideçš„å®‰è£…</p>
</li>
</ul>
<h3 id="å®‰è£…Robotframework-RIED"><a href="#å®‰è£…Robotframework-RIED" class="headerlink" title="å®‰è£…Robotframework-RIED"></a>å®‰è£…Robotframework-RIED</h3><ul>
<li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install robotframework-ride</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰¾åˆ°ride.pyæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># which ride.py</span><br><span class="line">&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;2.7&#x2F;bin&#x2F;ride.py</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨RIDEï¼Œä¸»è¦æ˜¯wxPython2.8.12.1éœ€è¦32ä½çš„python2.7æ‰èƒ½è¿è¡Œï¼ˆ<code>å¯ä»¥æŠŠå‘½ä»¤å†™æˆshellè„šæœ¬</code>ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python2.7-32 &#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;2.7&#x2F;bin&#x2F;ride.py</span><br></pre></td></tr></table></figure>
</li>
<li><p>PSï¼šç®€å•ç”¨ä¸€ä¸ªå‘½ä»¤å¤„ç†ä¸€ä¸‹ï¼Œåœ¨ç»ˆç«¯è¿è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">defaults write com.apple.versioner.python Prefer-32-Bit -bool yes</span><br><span class="line">ride.py</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5NTA3MDgyNg==&mid=2656981250&idx=1&sn=81e3df021485c663055deb963268e269&mpshare=1&scene=23&srcid=0419HYAgfYZogU41vorKxNOs%23rd" target="_blank" rel="noopener external nofollow noreferrer">RFç¯å¢ƒå®‰è£…-mac-osx10.11-åŸºç¡€ç¯å¢ƒ-å®‰è£…æŒ‡å—</a></li>
<li><a href="https://stackoverflow.com/questions/33134896/install-wxpython-2-8-for-ride-on-osx-el-capitan" target="_blank" rel="noopener external nofollow noreferrer">Install wxPython 2.8 (For Ride) on OSX â€œEl Capitanâ€</a></li>
<li><a href="https://stackoverflow.com/questions/4798759/cant-import-wxpython-on-mac-os-x" target="_blank" rel="noopener external nofollow noreferrer">Canâ€™t import wx(Python) on Mac OS X</a></li>
<li><a href="https://codeday.me/bug/20180319/146126.html" target="_blank" rel="noopener external nofollow noreferrer">å¦‚ä½•åœ¨Mac OS Xä¸Šå®‰è£…wxPythonï¼Ÿ</a></li>
</ul>
]]></content>
      <categories>
        <category>æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>MacOS</tag>
        <tag>æµ‹è¯•</tag>
        <tag>Robotframework</tag>
      </tags>
  </entry>
  <entry>
    <title>V2Rayçš„å®‰è£…ä½¿ç”¨</title>
    <url>/articles/4021449867.html</url>
    <content><![CDATA[<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="ä½¿ç”¨Dockeræ–¹å¼å®‰è£…"><a href="#ä½¿ç”¨Dockeræ–¹å¼å®‰è£…" class="headerlink" title="ä½¿ç”¨Dockeræ–¹å¼å®‰è£…"></a>ä½¿ç”¨Dockeræ–¹å¼å®‰è£…</h3><ul>
<li><p>Dockerå…·ä½“å®‰è£…è¯·è§ï¼š<a href="https://docs.docker.com/install/linux/docker-ce/centos/" target="_blank" rel="noopener external nofollow noreferrer">https://docs.docker.com/install/linux/docker-ce/centos/</a></p>
</li>
<li><p>æ–°å»ºè¿è¡Œç›®å½•ï¼Œæ¯”å¦‚ï¼š<code>makir v2ray</code></p>
</li>
<li><p>è¿›å…¥åˆ°<code>v2ray</code>ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶<code>config.json</code>ï¼Œå¯ä»¥åœ¨<a href="https://intmainreturn0.com/v2ray-config-gen/#" target="_blank" rel="noopener external nofollow noreferrer">V2Rayç”Ÿæˆé…ç½®ç½‘ç«™</a>ç”Ÿæˆã€‚å¡«å†™æ‰€éœ€çš„ç«¯å£ï¼Œç„¶åå¤åˆ¶é…ç½®åˆ°æ–‡ä»¶<code>config.json</code></p>
<a id="more"></a>

<p><img src="https://image.ritboy.com/markdown/202004/441a8a78107f585488350d2eb3b821ed.jpg" alt="image-20190125144154593"></p>
</li>
<li><p>è¿›å…¥åˆ°<code>v2ray</code>ç›®å½•æ–°å»ºä¸€ä¸ª<code>Makefile</code>æ–‡ä»¶ï¼Œä¸»è¦æ–‡ä»¶ä¸­çš„ä½¿ç”¨<code>tab</code>é”®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.PHONY: run clear</span><br><span class="line">run: clear</span><br><span class="line">	docker run -d --privileged&#x3D;true --name v2ray -v $(PWD):&#x2F;etc&#x2F;v2ray --network&#x3D;host  v2ray&#x2F;official</span><br><span class="line"></span><br><span class="line">clear:</span><br><span class="line">	-docker rm -f v2ray</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ç›®å½•<code>v2ray</code>ä¸­è¿è¡Œå‘½ä»¤ï¼š<code>make run</code></p>
</li>
</ul>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p><a href="https://www.v2ray.com/ui_client/osx.html" target="_blank" rel="noopener external nofollow noreferrer">ä½¿ç”¨æ–‡æ¡£</a></p>
<h3 id="ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶"><a href="#ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶"></a>ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶</h3><p>åœ¨<a href="https://intmainreturn0.com/v2ray-config-gen/#" target="_blank" rel="noopener external nofollow noreferrer">V2Rayç”Ÿæˆé…ç½®ç½‘ç«™</a>ç”Ÿæˆï¼Œéœ€è¦å¡«å†™æœåŠ¡ç«¯åœ°å€ï¼Œæœ¬åœ°socketä½¿ç”¨ç«¯å£ï¼Œç”¨æˆ·ï¼ŒæœåŠ¡ç«¯ç«¯å£ã€‚ç„¶åç‚¹å‡»å¤åˆ¶é…ç½®ï¼Œä¿å­˜ä¸º<code>client-config.json</code></p>
<p><img src="https://image.ritboy.com/markdown/202004/1ac3329b5de36ab3f91cb35b0a2309e1.jpg" alt="image-20190125144746186"></p>
<h3 id="MacOS-è¿æ¥"><a href="#MacOS-è¿æ¥" class="headerlink" title="MacOS è¿æ¥"></a>MacOS è¿æ¥</h3><ul>
<li>ä¸‹è½½<a href="https://github.com/Cenmrev/V2RayX/releases" target="_blank" rel="noopener external nofollow noreferrer">V2Ray</a>ï¼Œå¹¶å®‰è£…</li>
</ul>
<h4 id="æ·»åŠ å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶"><a href="#æ·»åŠ å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶" class="headerlink" title="æ·»åŠ å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶"></a>æ·»åŠ å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶</h4><ul>
<li><p>é€‰æ‹©Configureé€‰é¡¹</p>
<p><img src="https://image.ritboy.com/markdown/202004/1fda9dedcb1a38dde1e3fd0a5059f8ed.jpg" alt="image-20190125145222467"></p>
</li>
<li><p>é€‰æ‹©<code>Advanced</code></p>
<p><img src="https://image.ritboy.com/markdown/202004/13542451298531dc3106726f4ef19f79.jpg" alt="image-20190125145508688"></p>
</li>
<li><p>é€‰æ‹©<code>configs</code>ï¼Œå¹¶æ·»åŠ å‰é¢å‡†å¤‡å¥½çš„å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼Œå³é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼ˆæ¯”å¦‚ï¼š<code>client-config.json</code>)</p>
<p><img src="https://image.ritboy.com/markdown/202004/8d0a0cbcb8f90983f07efea62f08f64a.jpg" alt="image-20190125145657548"></p>
</li>
</ul>
<h4 id="å¯åŠ¨V2Rayä»£ç†"><a href="#å¯åŠ¨V2Rayä»£ç†" class="headerlink" title="å¯åŠ¨V2Rayä»£ç†"></a>å¯åŠ¨V2Rayä»£ç†</h4><ul>
<li><p>é€‰æ‹©æ·»åŠ å¥½çš„æœåŠ¡</p>
<p><img src="https://image.ritboy.com/markdown/202004/9d52a3af672b785f6ad667efb3639892.jpg" alt="image-20190125150217787"></p>
</li>
<li><p>é€‰æ‹©å¯åŠ¨æ¨¡å¼ï¼Œ<strong>æ³¨æ„ï¼šPACæ¨¡å¼è¯·ä¿®æ”¹<code>pac.js</code>ä¸­socketçš„ç«¯å£(é»˜è®¤ä¸º1081ï¼‰</strong></p>
<p><img src="https://image.ritboy.com/markdown/202004/813c1c927a5316a432c06532328ebcea.jpg" alt="image-20190125150311751"></p>
</li>
<li><p>å¯åŠ¨V2Ray</p>
<p><img src="https://image.ritboy.com/markdown/202004/8aa00b3cae0fade55e3f8afd1ab6cc4b.jpg" alt="image-20190125150648887"></p>
</li>
</ul>
]]></content>
      <categories>
        <category>VPN</category>
      </categories>
      <tags>
        <tag>VPN</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…Testlink</title>
    <url>/articles/1132432202.html</url>
    <content><![CDATA[<h3 id="Docker-composeå®‰è£…"><a href="#Docker-composeå®‰è£…" class="headerlink" title="Docker-composeå®‰è£…"></a>Docker-composeå®‰è£…</h3><p><a href="https://docs.docker.com/compose/compose-file/compose-file-v2/" target="_blank" rel="noopener external nofollow noreferrer">docker-composeå®˜ç½‘åœ°å€</a></p>
<h4 id="docker-compose-yamlæ–‡ä»¶"><a href="#docker-compose-yamlæ–‡ä»¶" class="headerlink" title="docker-compose.yamlæ–‡ä»¶"></a>docker-compose.yamlæ–‡ä»¶</h4><a id="more"></a>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'2'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mariadb:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">'bitnami/mariadb:latest'</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ALLOW_EMPTY_PASSWORD=yes</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MARIADB_USER=bn_testlink</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MARIADB_DATABASE=bitnami_testlink</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'mariadb_data:/bitnami'</span></span><br><span class="line">  <span class="attr">testlink:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">'bitnami/testlink:latest'</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'10080:80'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'10443:443'</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'testlink_data:/bitnami'</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mariadb</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MARIADB_HOST=mariadb</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MARIADB_PORT_NUMBER=3306</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TESTLINK_DATABASE_USER=bn_testlink</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TESTLINK_DATABASE_NAME=bitnami_testlink</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ALLOW_EMPTY_PASSWORD=yes</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TESTLINK_USERNAME=admin</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TESTLINK_PASSWORD=wise2c2018</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TESTLINK_EMAIL=admin@wise2c.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TESTLINK_LANGUAGE=zh_CN</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">mariadb_data:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">testlink_data:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br></pre></td></tr></table></figure>

<h4 id="å‘½ä»¤ä½¿ç”¨"><a href="#å‘½ä»¤ä½¿ç”¨" class="headerlink" title="å‘½ä»¤ä½¿ç”¨"></a>å‘½ä»¤ä½¿ç”¨</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br><span class="line">docker-compose logs -f</span><br></pre></td></tr></table></figure>

<h3 id="docker-composeé‡æ–°å®‰è£…"><a href="#docker-composeé‡æ–°å®‰è£…" class="headerlink" title="docker-composeé‡æ–°å®‰è£…"></a>docker-composeé‡æ–°å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker-compose down</span><br><span class="line">docker volume list</span><br><span class="line"></span><br><span class="line"># åˆ é™¤testlinkçš„ä¸¤ä¸ªæ•°æ®å·</span><br><span class="line">docker volume rm &lt;testlink_mariadb_data testlink_testlink_data&gt;</span><br></pre></td></tr></table></figure>

<h3 id="å¤‡ä»½æ¢å¤"><a href="#å¤‡ä»½æ¢å¤" class="headerlink" title="å¤‡ä»½æ¢å¤"></a>å¤‡ä»½æ¢å¤</h3><p><a href="https://github.com/XiaoyaoRay/testlink" target="_blank" rel="noopener external nofollow noreferrer">Githubé“¾æ¥</a></p>
<h4 id="æ¸…ç©ºåŸæœ‰æ•°æ®"><a href="#æ¸…ç©ºåŸæœ‰æ•°æ®" class="headerlink" title="æ¸…ç©ºåŸæœ‰æ•°æ®"></a>æ¸…ç©ºåŸæœ‰æ•°æ®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker-compose down</span><br><span class="line">docker volume list</span><br><span class="line"></span><br><span class="line"># åˆ é™¤testlinkçš„ä¸¤ä¸ªæ•°æ®å·</span><br><span class="line">docker volume rm &lt;testlink_mariadb_data testlink_testlink_data&gt;</span><br></pre></td></tr></table></figure>

<h4 id="docker-comose-yaml-æ–‡ä»¶"><a href="#docker-comose-yaml-æ–‡ä»¶" class="headerlink" title="docker-comose.yaml æ–‡ä»¶"></a>docker-comose.yaml æ–‡ä»¶</h4><p>å…¶ä¸­æœåŠ¡<code>backup</code>å°†åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä»ä¸ƒç‰›ä¸Šä¸‹è½½æœ€æ–°çš„å¤‡ä»½æ•°æ®ï¼Œå¹¶ä¸”æ¯å¤©å‡Œæ™¨3ç‚¹å¼€å§‹æ‰“åŒ…å¤‡ä»½æ•°æ®åº“çš„æ•°æ®ï¼Œç„¶åä¸Šä¼ åˆ°ä¸ƒç‰›ã€‚å¦‚æœéœ€è¦æŒ‡å®šæ¢å¤æ•°æ®ï¼Œè¯·é…ç½®<code>backup</code>æœåŠ¡ç¯å¢ƒå˜é‡<code>MARIADB_FILE</code>çš„å€¼ï¼ˆâ€ä¸ƒç‰›ä¸Šå¤‡ä»½æ–‡ä»¶çš„åå­—â€ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">version: &#39;2&#39;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  mariadb:</span><br><span class="line">    image: &#39;bitnami&#x2F;mariadb:latest&#39;</span><br><span class="line">    environment:</span><br><span class="line">      - ALLOW_EMPTY_PASSWORD&#x3D;yes</span><br><span class="line">      - MARIADB_USER&#x3D;bn_testlink</span><br><span class="line">      - MARIADB_DATABASE&#x3D;bitnami_testlink</span><br><span class="line">    volumes_from:</span><br><span class="line">      - backup</span><br><span class="line">    restart: always</span><br><span class="line">  testlink:</span><br><span class="line">    image: &#39;bitnami&#x2F;testlink:latest&#39;</span><br><span class="line">    ports:</span><br><span class="line">      - &#39;10080:80&#39;</span><br><span class="line">      - &#39;10443:443&#39;</span><br><span class="line">    volumes:</span><br><span class="line">      - &#39;testlink_data:&#x2F;bitnami&#39;</span><br><span class="line">    depends_on:</span><br><span class="line">      - mariadb</span><br><span class="line">    environment:</span><br><span class="line">      - MARIADB_HOST&#x3D;mariadb</span><br><span class="line">      - MARIADB_PORT_NUMBER&#x3D;3306</span><br><span class="line">      - TESTLINK_DATABASE_USER&#x3D;bn_testlink</span><br><span class="line">      - TESTLINK_DATABASE_NAME&#x3D;bitnami_testlink</span><br><span class="line">      - ALLOW_EMPTY_PASSWORD&#x3D;yes</span><br><span class="line">      - TESTLINK_USERNAME&#x3D;admin</span><br><span class="line">      - TESTLINK_PASSWORD&#x3D;wise2c2018</span><br><span class="line">      - TESTLINK_EMAIL&#x3D;admin@wise2c.com</span><br><span class="line">      - TESTLINK_LANGUAGE&#x3D;zh_CN</span><br><span class="line">  backup:</span><br><span class="line">    image: &#39;registry.cn-hangzhou.aliyuncs.com&#x2F;imagess&#x2F;testlink-backup&#39;</span><br><span class="line">    environment:</span><br><span class="line">      - MARIADB_FILE&#x3D;</span><br><span class="line">    restart: always</span><br><span class="line">    volumes:</span><br><span class="line">      - mariadb_data:&#x2F;bitnami</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  mariadb_data:</span><br><span class="line">    driver: local</span><br><span class="line">  testlink_data:</span><br><span class="line">    driver: loca</span><br></pre></td></tr></table></figure>

<h4 id="è¿è¡Œå‘½ä»¤"><a href="#è¿è¡Œå‘½ä»¤" class="headerlink" title="è¿è¡Œå‘½ä»¤"></a>è¿è¡Œå‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br><span class="line">docker-compose logs -f</span><br></pre></td></tr></table></figure>



<h3 id="ç›´æ¥ç”¨dockerå®‰è£…"><a href="#ç›´æ¥ç”¨dockerå®‰è£…" class="headerlink" title="ç›´æ¥ç”¨dockerå®‰è£…"></a>ç›´æ¥ç”¨dockerå®‰è£…</h3><h4 id="åˆ›å»ºtestlinkçš„dockerç½‘ç»œ"><a href="#åˆ›å»ºtestlinkçš„dockerç½‘ç»œ" class="headerlink" title="åˆ›å»ºtestlinkçš„dockerç½‘ç»œ"></a>åˆ›å»ºtestlinkçš„dockerç½‘ç»œ</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker network create testlink-tier</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…æ•°æ®åº“"><a href="#å®‰è£…æ•°æ®åº“" class="headerlink" title="å®‰è£…æ•°æ®åº“"></a>å®‰è£…æ•°æ®åº“</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run -d --name mariadb \</span><br><span class="line">--net testlink-tier \</span><br><span class="line">-e ALLOW_EMPTY_PASSWORD&#x3D;yes \</span><br><span class="line">-e MARIADB_USER&#x3D;bn_testlink \</span><br><span class="line">-e MARIADB_DATABASE&#x3D;bitnami_testlink \</span><br><span class="line">--volume ~&#x2F;testlink&#x2F;mariadb_data:&#x2F;bitnami \</span><br><span class="line">bitnami&#x2F;mariadb:latest</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…Testlink"><a href="#å®‰è£…Testlink" class="headerlink" title="å®‰è£…Testlink"></a>å®‰è£…Testlink</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run -d -p 18000:80 -p 18443:443 --name testlink \</span><br><span class="line">-e ALLOW_EMPTY_PASSWORD&#x3D;yes \</span><br><span class="line">-e MARIADB_USER&#x3D;bn_testlink \</span><br><span class="line">-e MARIADB_DATABASE&#x3D;bitnami_testlink \</span><br><span class="line">--net testlink-tier \</span><br><span class="line">--volume ~&#x2F;testlink&#x2F;testlink_data:&#x2F;bitnami \</span><br><span class="line">bitnami&#x2F;testlink:latest</span><br></pre></td></tr></table></figure>

<p><strong>PS</strong>:ç½‘é¡µç™»å½•çš„é»˜è®¤å¯†ç ï¼š<code>user/bitnami</code></p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://github.com/bitnami/bitnami-docker-testlink" target="_blank" rel="noopener external nofollow noreferrer">Testlinkå®˜ç½‘åœ°å€</a></p>
]]></content>
      <tags>
        <tag>Testlink</tag>
      </tags>
  </entry>
  <entry>
    <title>WatchGuard-firebox-tranining</title>
    <url>/articles/1535224408.html</url>
    <content><![CDATA[<h1 id="FireBox-Training"><a href="#FireBox-Training" class="headerlink" title="FireBox Training"></a>FireBox Training</h1><h2 id="è®¾å¤‡"><a href="#è®¾å¤‡" class="headerlink" title="è®¾å¤‡"></a>è®¾å¤‡</h2><p>SN,PN,KVMå‡ä¸ºè‡ªåŠ¨åŒ–å‡†å¤‡çš„</p>
<h3 id="SN"><a href="#SN" class="headerlink" title="SN"></a>SN</h3><p>Serial over IP deice</p>
<ul>
<li>17ä¸ªç«¯å£ï¼šä¸€ä¸ªæä¾›ç»™ç”¨æˆ·è®¿é—®SNè®¾å¤‡ï¼Œå…¶ä½™16ä¸ªç«¯å£ä¸ºç½‘ç»œæ¥å£(ç®¡ç†ä¸åŒè®¾å¤‡çš„ä¸²å£)</li>
</ul>
<a id="more"></a>

<h3 id="PN"><a href="#PN" class="headerlink" title="PN"></a>PN</h3><p>Power over IP deice</p>
<ul>
<li>ç±»ä¼¼SNç®¡ç†å·¥å…·ï¼Œä¸»è¦æ˜¯æ§åˆ¶è®¾å¤‡çš„ç”µæº</li>
</ul>
<h3 id="KVM"><a href="#KVM" class="headerlink" title="KVM"></a>KVM</h3><p>å¤šå°è®¾å¤‡è¿æ¥ä¸€ä¸ªæ˜¾ç¤ºå™¨å³æ˜¾ç¤ºå™¨å¯ä»¥åˆ‡æ¢åˆ°ä¸åŒçš„è®¾å¤‡</p>
<h3 id="ä¸²å£"><a href="#ä¸²å£" class="headerlink" title="ä¸²å£"></a>ä¸²å£</h3><ul>
<li>ä½¿ç”¨éœ€è¦åœ¨æœ¬æœºå®‰è£…é©±åŠ¨ï¼ˆUSBè½¬ä¸²å£ï¼‰ </li>
<li>è®¾å¤‡æ³¢ç‰¹ç‡ï¼š115200 </li>
<li>ç¨³å®šå¯é </li>
</ul>
<h3 id="Hardware-Platformï¼š"><a href="#Hardware-Platformï¼š" class="headerlink" title="Hardware Platformï¼š"></a>Hardware Platformï¼š</h3><p><a href="https://confluence.watchguard.com/pages/viewpage.action?spaceKey=WGQA&title=Hardware+Platform" target="_blank" rel="noopener external nofollow noreferrer">Confluenceä¸Šåœ°å€</a></p>
<p>XTMç³»åˆ—å·²ç»ä¸å†ç»´æŠ¤ï¼Œè¢«T,M,FirefoxVæ›¿æ¢ï¼ŒFirefoxVè½¯ä»¶(ç±»ä¼¼è™šæ‹Ÿæœº)ã€‚è®¾å¤‡å‹å·ä¸­-W å¸¦æ— çº¿ï¼Œ-D DSLçŒ«æ‹¨å·ï¼Œ-Få¸¦å…‰çº¤ï¼ˆæ²¡æœ‰Fä¹Ÿæœ‰å¯èƒ½å¸¦å…‰çº¤ï¼‰</p>
<ul>
<li>RTMï¼š å‡ºå‚æ—¶ç¬¬ä¸€æ¬¡ç‰ˆæœ¬å·ï¼ˆåŒå‹å·è®¾å¤‡å¯èƒ½ä¸åŒï¼‰</li>
<li>X86 vs PPCï¼š CPUå¹³å°ï¼Œæ¯”å¦‚ï¼šPPC 64ï¼Œx86 64</li>
<li>POEï¼šç½‘ç»œè¿æ¥æˆ–è€…ä¾›ç”µ(å³æŸä¸ªæ’å£åŒæ—¶åˆç½‘ç»œåŠŸèƒ½å’Œä¾›ç”µåŠŸèƒ½)</li>
<li>Cryptoï¼š åŠ å¯†èŠ¯ç‰‡ï¼Œæ¯”å¦‚ï¼šinternalï¼ŒCCK8903</li>
<li>Tå¼€å¤´çš„å‹å·ï¼šå°ç›’å­</li>
<li>Må¼€å¤´çš„å‹å·ï¼šå¤§ç›’å­</li>
</ul>
<h3 id="æµ‹è¯•è½¯ä»¶ï¼š"><a href="#æµ‹è¯•è½¯ä»¶ï¼š" class="headerlink" title="æµ‹è¯•è½¯ä»¶ï¼š"></a>æµ‹è¯•è½¯ä»¶ï¼š</h3><h4 id="ç®¡ç†å·¥å…·"><a href="#ç®¡ç†å·¥å…·" class="headerlink" title="ç®¡ç†å·¥å…·"></a>ç®¡ç†å·¥å…·</h4><ul>
<li><p>WebUI</p>
<p><a href="https://172.23.0.233:8080" target="_blank" rel="noopener external nofollow noreferrer">https://172.23.0.233:8080</a></p>
</li>
<li><p>CLI</p>
</li>
<li><p>WSM</p>
<p>åªèƒ½å»è¥¿é›…å›¾çš„image serverä¸‹è½½: <a href="http://cmimages.wgti.net/" target="_blank" rel="noopener external nofollow noreferrer">http://cmimages.wgti.net/</a></p>
<p>ç”¨äºç®¡ç†Fireboxçš„clientç«¯</p>
<p>å…¶ä¸­PM: èƒ½ç®¡ç†é…ç½®æ–‡ä»¶å’ŒLicenseï¼Œä¿®æ”¹éœ€è¦ä¿å­˜æ‰èƒ½ç”Ÿæ•ˆï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹å¤šå¤„åå†ä¿å­˜</p>
</li>
<li><p>UTM</p>
</li>
</ul>
<h4 id="è´¦å·"><a href="#è´¦å·" class="headerlink" title="è´¦å·"></a>è´¦å·</h4><ul>
<li><p>status: readonly</p>
<p>åªæœ‰è¯»å–æƒé™</p>
</li>
<li><p>admin: readwrite</p>
<p>å¯è¯»å¯å†™</p>
</li>
<li><p>root</p>
<p>debugç‰ˆæœ¬èƒ½è¿›å…¥rootè´¦æˆ·ï¼ˆéé»˜è®¤å¼€å¯ï¼‰ï¼Œåœ¨adminç”¨æˆ·ä¸‹æ‰§è¡Œï¼šdiagnose enable readwrite(å¯†ç ï¼Œå¯ä»¥è‡ªå®šä¹‰)</p>
</li>
</ul>
<h4 id="ç‰ˆæœ¬åˆ‡æ¢"><a href="#ç‰ˆæœ¬åˆ‡æ¢" class="headerlink" title="ç‰ˆæœ¬åˆ‡æ¢"></a>ç‰ˆæœ¬åˆ‡æ¢</h4><ul>
<li>æµ‹è¯•ä½¿ç”¨releaseç‰ˆæœ¬ï¼Œä¸æ¨èä½¿ç”¨debugç‰ˆæœ¬ï¼Œsysa.dlå‡çº§ç»å¸¸ä½¿ç”¨</li>
<li>Fireboxä¸­æœ‰ä¸¤å¥—æ“ä½œç³»ç»Ÿï¼Œsysbç³»ç»Ÿä¸éœ€è¦æœ€æ–°çš„ï¼ˆéœ€è¦ä¿æŒç¨³å®šï¼‰</li>
<li>releaseç‰ˆæœ¬åˆ°debugç‰ˆæœ¬ï¼šåœ¨é“¾æ¥ç”³è¯·è®¿é—®æƒé™ï¼Œæˆ–è€…ä½¿ç”¨packageå‡çº§ã€‚</li>
</ul>
<h3 id="æ•æ·ä¸ç€‘å¸ƒå¼€å‘"><a href="#æ•æ·ä¸ç€‘å¸ƒå¼€å‘" class="headerlink" title="æ•æ·ä¸ç€‘å¸ƒå¼€å‘"></a>æ•æ·ä¸ç€‘å¸ƒå¼€å‘</h3><h4 id="ç€‘å¸ƒ"><a href="#ç€‘å¸ƒ" class="headerlink" title="ç€‘å¸ƒ"></a>ç€‘å¸ƒ</h4><ul>
<li>æŒ‰è®¡åˆ’ä¸€æ•´å¥—æ¥åšï¼ˆè®¾è®¡ï¼Œå¼€å‘ï¼Œæµ‹è¯•ï¼‰&lt;â€“ Fireboxå¼€å‘ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½æœ‰è”ç³»ä¸èƒ½å¾ˆå¥½æ‹†åˆ†</li>
<li>mainlineçš„å¼€å‘ä¸»çº¿ï¼ˆå¼€å‘å·¥å…·ï¼šperforceå³p4ï¼Œæ¯æ¬¡æœ‰chagelistå³CLï¼‰</li>
<li>å…¶ä»–è‡ªåŠ¨åŒ–å¼€å‘å·¥å…·ï¼šgit</li>
</ul>
<h4 id="æ•æ·"><a href="#æ•æ·" class="headerlink" title="æ•æ·"></a>æ•æ·</h4><ul>
<li>åˆ‡æˆå°ä»»åŠ¡ï¼Œæ›´å¿«é€Ÿï¼Œæ›´çµæ´»</li>
</ul>
<h4 id="Perforce-å³p4"><a href="#Perforce-å³p4" class="headerlink" title="Perforce(å³p4)"></a>Perforce(å³p4)</h4><ul>
<li>æ‹‰å–Branchï¼Œimage serverçš„æ–‡ä»¶å¤¹å¯¹åº”perforceçš„ä¸åŒåˆ†æ”¯</li>
<li>task branch: å¼€å‘å•ç‹¬çš„åŠŸèƒ½ï¼Œimage serverçš„æ–‡ä»¶å¤¹åæœ€åå¸¦å­—æ¯çš„</li>
</ul>
<h4 id="Bug"><a href="#Bug" class="headerlink" title="Bug"></a>Bug</h4><ul>
<li>needmeageï¼Œéœ€è¦åœ¨mainlineå’Œv1 releaseä¸¤ä¸ªåˆ†æ”¯ä¸ŠéªŒè¯</li>
<li>JIRA ä¸ŠæŸ¥çœ‹fix version</li>
<li>changelistçš„ä½ç½®æ˜¯å¦å¤§äºfix branchï¼š å¤§äºä¸”ä¸å†fix branchä¸Šéœ€è¦éªŒè¯å¤šä¸ªåˆ†æ”¯çš„</li>
</ul>
<h3 id="License"><a href="#License" class="headerlink" title="License"></a>License</h3><p>  æ¯ä¸€ä¸ªå¹³å°ï¼Œæ¯ä¸€ç§å‹å·éƒ½æœ‰å¯¹åº”çš„å®šä¹‰ï¼Œä¸€ä¸ªè®¾å¤‡ä¸€ä¸ªLicenseï¼Œ<a href="https://wgt.sharepoint.com/engineering/Engineering%20Document%20Library/Forms/AllItems.aspx?RootFolder=%2Fengineering%2FEngineering%20Document%20Library%2F_LICENSE%20SPECS&FolderCTID=0x01200016762C401C4A2642B6F0EDAD8DEC76CA&View=%7BB9CC7568-B695-4BE2-AD86-AA2D4E4D4A8F%7D" target="_blank" rel="noopener external nofollow noreferrer">LICENSE SPECS</a></p>
<h4 id="License-å­˜æ”¾ä½ç½®"><a href="#License-å­˜æ”¾ä½ç½®" class="headerlink" title="License å­˜æ”¾ä½ç½®"></a>License å­˜æ”¾ä½ç½®</h4><ul>
<li>/etc/wg/license: Activation License</li>
<li>/etc/license: Default License</li>
</ul>
<h4 id="License-è¯´æ˜"><a href="#License-è¯´æ˜" class="headerlink" title="License è¯´æ˜"></a>License è¯´æ˜</h4><ul>
<li>Feature: æ—¶é—´æˆ–è€…æ•°é‡ï¼Œå³æŒ‰æ—¶é—´å’Œæ•°é‡æ”¶è´¹ã€‚æ•°é‡æ˜¯æŒ‡æ¥å…¥è®¾å¤‡å…è®¸ä½¿ç”¨çš„ä¸ªæ•°ï¼ˆæ¯”å¦‚ï¼šVPNçš„ç”¨æˆ·ä½¿ç”¨ä¸ªæ•°ï¼‰</li>
<li>Signature: éªŒè¯æœ‰æ•ˆæ€§</li>
<li>Pro: å¥—é¤ï¼Œä¸å…¶ä»–Licenseå–æœ€å¤§</li>
<li>DevKey: ä½¿ç”¨é»˜è®¤å€¼ï¼Œé™¤éå¾ˆæ¸…æ¥šä¿®æ”¹å†…å®¹ï¼ˆæ¯”å¦‚æ€§èƒ½æµ‹è¯•ï¼‰</li>
</ul>
<h4 id="LIVESECURITY-å‡çº§"><a href="#LIVESECURITY-å‡çº§" class="headerlink" title="LIVESECURITY: å‡çº§"></a>LIVESECURITY: å‡çº§</h4><ul>
<li>å‡çº§éœ€è¦è½¬æ¢é…ç½®æ–‡ä»¶</li>
<li>buildä¸­release-dateä¸LIVESECURITYå¯¹æ¯”ï¼Œè¿‡æœŸ</li>
<li>releaseDate: å‘å¸ƒæ—¶é—´ï¼Œæµ‹è¯•çš„æ—¶å€™è¿˜æœªå‘å¸ƒï¼Œæ˜¯æˆ‘ä»¬å®šä¹‰çš„æ—¶é—´</li>
<li>å®¢æˆ·çš„Licenseï¼šæ ¹æ®SN å’Œ SKUç”Ÿæˆï¼Œåœ¨å®˜ç½‘æŸ¥çœ‹</li>
</ul>
<h4 id="SKU"><a href="#SKU" class="headerlink" title="SKU"></a>SKU</h4><ul>
<li>æœ€å°å¯å”®å•å…ƒ</li>
<li><code>FB</code>æˆ–è€…<code>FB+L</code>æˆ–è€…<code>L</code> (FB: Fireboxï¼ŒL: License)</li>
</ul>
<h4 id="MSSP"><a href="#MSSP" class="headerlink" title="MSSP"></a>MSSP</h4><ul>
<li>ç”¨æˆ·å¯è‡ªå·±é…ç½®ï¼Œæ ¹æ®è´¦å·ä½™é¢æ¥ä½¿ç”¨</li>
<li>Standard Supportï¼š åŸºæœ¬ç½‘ç»œåŠŸèƒ½</li>
</ul>
<h4 id="é™çº§"><a href="#é™çº§" class="headerlink" title="é™çº§"></a>é™çº§</h4><ul>
<li>ä»¥ä¿å­˜äº†ä»¥å‰é…ç½®ï¼Œå‡ºå‚æ¢å¤</li>
<li>å®˜æ–¹ä¸æ”¯æŒé™çº§</li>
</ul>
<h4 id="æ¢å¤FireBox"><a href="#æ¢å¤FireBox" class="headerlink" title="æ¢å¤FireBox"></a>æ¢å¤FireBox</h4><ul>
<li>Restore factory-default æ¸…é™¤é…ç½®æ–‡ä»¶</li>
<li>Restore factory-default all æ¸…é™¤æ‰€æœ‰çš„ç”¨æˆ·æ•°æ®ï¼šç®¡ç†å‘˜å¯†ç ï¼Œé…ç½®æ–‡ä»¶ï¼ˆè®¾å¤‡ä¸ŠresetæŒ‰é”®ç­‰åŒï¼‰</li>
<li>Forgot passwordï¼š è¿›å…¥åˆ° Boot info safe mode â€“&gt; QSW è®¾å¤‡ç›´è¿ï¼ˆç›¸åŒç½‘æ®µï¼‰ï¼Œä½¿ç”¨rootè´¦å·æˆ–adminè´¦å·æ¢å¤å¯†ç </li>
</ul>
<h3 id="å­¦ä¹ "><a href="#å­¦ä¹ " class="headerlink" title="å­¦ä¹ "></a>å­¦ä¹ </h3><ul>
<li>TCP/IPåè®®å·ä¸€/äºŒ</li>
<li>IPTables NetFilteræ¶æ„</li>
<li>é¸Ÿå“¥çš„ç§æˆ¿èœ</li>
</ul>
<h3 id="è¿æ¥FireBoxå·¥å…·"><a href="#è¿æ¥FireBoxå·¥å…·" class="headerlink" title="è¿æ¥FireBoxå·¥å…·"></a>è¿æ¥FireBoxå·¥å…·</h3><ul>
<li>PuTTY</li>
<li>mPuTTY</li>
<li>SNç®¡ç†è®¾å¤‡: Telnetæ–¹å¼è¿æ¥ï¼Œè‡ªå®šä¹‰ç«¯å£ï¼ˆåœ¨SNä¸Šé…ç½®ï¼‰</li>
<li>SSH: 4118ç«¯å£</li>
<li>WEB: 8080ç«¯å£</li>
</ul>
<h3 id="FireBoxä¸­æ–‡ä»¶"><a href="#FireBoxä¸­æ–‡ä»¶" class="headerlink" title="FireBoxä¸­æ–‡ä»¶"></a>FireBoxä¸­æ–‡ä»¶</h3><ul>
<li>/etc/wg: é…ç½®æ–‡ä»¶ï¼ŒFireboxä»¥åŠå…¶ä»–é…ç½®æ–‡ä»¶</li>
<li>config.xml: å‹ç¼©æ–‡ä»¶(PEå¤´å†³å®šæ–‡ä»¶çœŸæ­£æ ¼å¼), å¤‡ä»½ gzipè§£å‹ ä¿®æ”¹   </li>
<li>certs: å­˜æ”¾è¯ä¹¦</li>
<li>backup: å¯¹ç³»ç»Ÿå¤‡ä»½ï¼Œæ¢å¤ç³»ç»Ÿåˆ°æŸä¸ªæ—¶é—´ç‚¹</li>
<li>upgrade.txt: å¯¹ç‰ˆæœ¬å‡çº§æ“ä½œè®°å½•</li>
<li>/var/log: ç³»ç»Ÿlog</li>
<li>/tmp/debug: è¿›ç¨‹çš„log</li>
<li>æŸ¥çœ‹logï¼š logread -f æˆ–è€… tail -f</li>
</ul>
<h3 id="wgcmd-å‘½ä»¤"><a href="#wgcmd-å‘½ä»¤" class="headerlink" title="wgcmd å‘½ä»¤"></a>wgcmd å‘½ä»¤</h3><ul>
<li>å‘ç»™wgagentè¿›ç¨‹ï¼Œä½¿ç”¨xpathæ¥åŒºåˆ«</li>
<li>wgcmd status /system/info æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ â€“&gt; ç›¸å½“äºè¿›ç¨‹wgagent â€“&gt; ç›¸å½“äºè¿›ç¨‹system</li>
<li>wgcmd status /authentication/list è·å–å½“å‰ç™»å½•ç”¨æˆ·</li>
<li>wgcmd action /authentication/logoff type=99 å‰”é™¤å½“å‰ç™»å½•ç”¨æˆ·ï¼Œä¸å‰”é™¤rootè´¦æˆ·ï¼ˆå‰”é™¤statusï¼Œadminè´¦å·ï¼‰</li>
<li>wgcmd status /network â€“&gt; è·å–å¸®åŠ©</li>
<li>ä¸­é—´çŠ¶æ€ä½¿ç”¨wgcmdæ¥æ¨¡æ‹Ÿ</li>
</ul>
<h3 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h3><h4 id="äº¤æ¢æœº"><a href="#äº¤æ¢æœº" class="headerlink" title="äº¤æ¢æœº"></a>äº¤æ¢æœº</h4><ul>
<li>äºŒå±‚</li>
<li>æœ‰mac <ul>
<li>æ ¹æ®macæ¥è½¬å‘ â€“&gt; mac table</li>
<li>src mac:  mac tableä¸­æ²¡æœ‰å°†ä¼šè®°å½•ä¸‹æ¥ </li>
<li>dst mac:  æŸ¥çœ‹mac table</li>
</ul>
</li>
</ul>
<h4 id="è·¯ç”±å™¨"><a href="#è·¯ç”±å™¨" class="headerlink" title="è·¯ç”±å™¨"></a>è·¯ç”±å™¨</h4><ul>
<li>ä¸‰å±‚</li>
<li>æœ‰IP <ul>
<li>æ ¹æ®IPæ¥è½¬å‘ â€“&gt; routing table</li>
<li>è·¯ç”±æŸ¥è¯¢æœ€ä¸ºå…³é”®ï¼Œæ¯æ¡å‡ä¼šè·¯ç”±æŸ¥è¯¢</li>
<li>0.0.0.0/0: é»˜è®¤è·¯ç”±</li>
<li>æ¯ä¸€ä¸ªç«¯å£å¯¹åº”ä¸€ä¸ªIPåœ°å€</li>
<li>å­ç½‘æ©ç ï¼š åŒºåˆ†ç½‘ç»œæ®µå’Œä¸»æœºæ®µï¼Œæ ¹æ®IPåœ°å€æ¥åŒºåˆ†</li>
<li>src ip: routing tableä¸­æ²¡æœ‰å°†ä¼šè®°å½•ä¸‹æ¥ </li>
<li>dst ip:  æŸ¥çœ‹routing table â€“&gt; å…ˆæœ€ç²¾ç¡®åŒ¹é…ï¼ˆèŒƒå›´æœ€å°ï¼‰ï¼Œå†metrc(å¼€é”€)æœ€å°ï¼Œç²¾ç¡®åŒ¹é…ä¼˜å…ˆçº§æ›´é«˜â€“&gt; Cç›´è¿è·¯ç”±</li>
</ul>
</li>
</ul>
<h3 id="ç½‘ç»œæ¨¡å¼"><a href="#ç½‘ç»œæ¨¡å¼" class="headerlink" title="ç½‘ç»œæ¨¡å¼"></a>ç½‘ç»œæ¨¡å¼</h3><ul>
<li>Mixed Routing Mode == 3 å±‚ 90%å®¢æˆ·</li>
<li>Bridage Mode == transparent mode 2å±‚ â€“&gt; å·²æœ‰Routerï¼Œæ·»åŠ é˜²ç«å¢™ä¸”ä¸å½±å“åŸæœ‰ç½‘ç»œï¼ˆæ·»åŠ å®‰å…¨ç­–ç•¥ï¼‰</li>
<li>Drop In Mode == 2æˆ–è€…3å±‚</li>
</ul>
<h4 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h4><p> ç½‘ç»œåœ°å€è½¬æ¢</p>
<ul>
<li>DNAT: å…¬å¸ dgnamic NAT â€“&gt; src NAT â€“&gt; è½¬åŒ–æºIPåœ°å€ â€“&gt; å¤šå¯¹ä¸€</li>
<li>SNAT: å…¬å¸ static NAT â€“&gt; dst NAT â€“&gt; è½¬åŒ–ç›®çš„IPåœ°å€ â€“&gt; ä¸€å¯¹ä¸€</li>
<li>1-to-1 NAT: src NAT + dst NAT â€“&gt; å†…éƒ¨çš„IPåœ°å€ä¸å¤–éƒ¨IPåœ°å€ç»‘å®š â€“&gt; åŒå‘çš„</li>
<li>Server load balance(SLB): dst NAT â€“&gt; å¤šå°ç›®çš„æœåŠ¡ â€“&gt; å¤šä¸ªç›®çš„IPåœ°å€ â€“&gt; ä¸€å¯¹å¤š</li>
</ul>
<h4 id="å‘é€ï¼š"><a href="#å‘é€ï¼š" class="headerlink" title="å‘é€ï¼š"></a>å‘é€ï¼š</h4><ul>
<li>ç›®çš„IPä¸å˜</li>
<li>åœ¨è·¯ç”±è¡¨ä¸­æŸ¥çœ‹ä¸‹ä¸€è·³çš„ç›®çš„MACï¼Œå°è£…src macï¼Œdst mac</li>
<li>ç¬¬ä¸€æ¬¡å‘é€æ—¶åˆ›å»ºComutrackæˆ–è€…Sessionè¡¨ç¬¬ä¸€æ¬¡å‘é€æ—¶åˆ›å»ºComutrackæˆ–è€…Sessionè¡¨</li>
</ul>
<h4 id="å›åŒ…"><a href="#å›åŒ…" class="headerlink" title="å›åŒ…"></a>å›åŒ…</h4><ul>
<li>å›æ¥çš„ä½¿ç”¨Sessionè¡¨,ä¸æŸ¥policy</li>
</ul>
<h3 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h3><ul>
<li>SessionæŸ¥è¯¢æœ€ä¸ºå…³é”®ï¼Œå…ˆæŸ¥Sessionè¡¨ï¼Œåœ¨æŸ¥policyï¼šå³ç¬¬ä¸€æ¡æ•°æ®åŒ…æŸ¥policyï¼Œå…¶ä½™çš„å‡Sessionè¡¨ã€‚æŸ¥policyåŠå…¶è´¹æ€§èƒ½</li>
<li>é˜²ç«å¢™é»˜è®¤ä¸å…è®¸ä»»ä½•ç½‘ç»œé€šå…³ï¼Œæ·»åŠ ç­–ç•¥é€šè¿‡æŸäº›ç½‘ç»œ</li>
<li>ç­–ç•¥ï¼šé…ç½®æ‰ç”Ÿæ•ˆï¼Œå¦‚æœæ²¡æœ‰å‹¾é€‰æ²¡æœ‰æ„ä¹‰<ul>
<li>æ¥æºï¼š ç›®çš„ç«¯å£ï¼Œæºç”¨æˆ·ï¼Œæºipï¼ŒæºåŸŸåï¼Œæºç½‘ç»œæ®µç­‰ç­‰</li>
<li>é¡ºåºåŒ¹é…: åŒ¹é…åˆ°ç¬¬ä¸€æ¡ï¼Œåé¢çš„ä¸å…³å¿ƒ â€“ é¡ºåºè‡ªå®šä¹‰æˆ–ç³»ç»Ÿè‡ªåŠ¨åŒ¹é…ï¼ˆè¶Šç²¾ç¡®è¶Šå¾€ä¸Šæ”¾å³é¡ºåºè¶Šé å‰ï¼‰</li>
</ul>
</li>
<li>æ‰€åšçš„ä¸¤ç±»äº‹ä»¶<ul>
<li>æ£€æµ‹æ•°æ®åŒ…ï¼ˆå•ä¸ªï¼Œä¸€ä¸ªé“¾æ¥ï¼ŒæŸä¸ªIPåœ°å€ï¼Œç«¯å£ï¼Œåè®®ç­‰ï¼‰</li>
<li>æ£€æµ‹åˆ°ååšæŸäº›åŠ¨ä½œï¼ˆè¿›ä¸€æ­¥æ£€æµ‹ç­‰ï¼‰</li>
</ul>
</li>
<li>è®¤è¯ï¼ˆAuthenlicationï¼‰:  æŠŠIPåœ°å€ä¸äººç»“åˆèµ·æ¥ï¼Œç„¶åå¯¹ä¸åŒçš„äººå¯¹ä¸åŒçš„æ“ä½œ</li>
</ul>
<h3 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h3><ul>
<li>ä¸“ç”¨è™šæ‹Ÿç½‘ç»œ</li>
<li>localä¸remoteè¦å¯¹ç­‰ï¼ˆè¯ä¹¦ï¼Œå¯†ç ä¸€æ ·ï¼‰</li>
<li>IKE/IPSEC: <code>BoVPN</code>å’Œ<code>BoVPNVIF</code>ï¼Œç«¯å£ï¼š500/4500</li>
<li>TLS-SSL:  <code>BoVPNVIF</code> ï¼Œç«¯å£ ï¼š443 ï¼Œå¿…é¡»ç”±clientç«¯å‘èµ·å»ºç«‹è¿æ¥</li>
</ul>
<h3 id="Cluster"><a href="#Cluster" class="headerlink" title="Cluster"></a>Cluster</h3><ul>
<li>master</li>
<li>backupmaster</li>
<li>ActivePassiveï¼šä½¿ç”¨è™šMACï¼ŒæŠŠmasterä¸backupmasterçš„MACæ”¹ä¸ºä¸€æ ·ï¼Œè®©ä¸€ä¸ªIPå¯¹åº”ä¸€ä¸ªMACåœ°å€</li>
</ul>
<h3 id="Proxy-amp-Packet-Filttersï¼š"><a href="#Proxy-amp-Packet-Filttersï¼š" class="headerlink" title="Proxy&amp;Packet Filttersï¼š"></a>Proxy&amp;Packet Filttersï¼š</h3><p>æµæ‰«æï¼Œä¼šç¼“å­˜è¿›è¡Œæ‰«æï¼Œé…ç½®æ‰«æèŒƒå›´ï¼Œç»å¤§éƒ¨åˆ†ç—…æ¯’éƒ½åœ¨æ•°æ®åŒ…å‰é¢å­—æ®µ</p>
<h3 id="EICAR-ç—…æ¯’å¼•æ“æ£€æµ‹å­—æ®µ"><a href="#EICAR-ç—…æ¯’å¼•æ“æ£€æµ‹å­—æ®µ" class="headerlink" title="EICAR ç—…æ¯’å¼•æ“æ£€æµ‹å­—æ®µ"></a>EICAR ç—…æ¯’å¼•æ“æ£€æµ‹å­—æ®µ</h3>]]></content>
      <categories>
        <category>WatchGuard</category>
        <category>Firebox</category>
      </categories>
      <tags>
        <tag>Firebox</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ‹è¯•æµç¨‹</title>
    <url>/articles/1592904657.html</url>
    <content><![CDATA[<h3 id="äº§å“-å¼€å‘-æµ‹è¯•æµç¨‹"><a href="#äº§å“-å¼€å‘-æµ‹è¯•æµç¨‹" class="headerlink" title="äº§å“-å¼€å‘-æµ‹è¯•æµç¨‹"></a>äº§å“-å¼€å‘-æµ‹è¯•æµç¨‹</h3><ul>
<li><h4 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h4><p> éœ€æ±‚åˆ†æç”±äº§å“äººå‘˜åˆ¶å®šï¼Œç»†åŒ–æ¯ä¸€ä¸ªåŠŸèƒ½çš„ç»†èŠ‚ï¼Œæ¯ä¸€ä¸ªæŒ‰é’®çš„ä½ç½®ï¼Œå¯¹äºç¨å¤§æˆ–å¤æ‚ä¸€ç‚¹çš„éœ€æ±‚è¿›è¡Œå»ºæ¨¡ã€‚  </p>
<a id="more"></a></li>
<li><h4 id="éœ€æ±‚è¯„å®¡"><a href="#éœ€æ±‚è¯„å®¡" class="headerlink" title="éœ€æ±‚è¯„å®¡"></a>éœ€æ±‚è¯„å®¡</h4><p>è¿™é‡Œä¼šå«ä¸Šæ‰€æœ‰å‚ä¸é¡¹ç›®äººå‘˜è¿›è¡Œï¼Œå¼€å‘äººå‘˜ã€æµ‹è¯•äººå‘˜ã€‚æµ‹è¯•äººå‘˜æå‡ºéœ€æ±‚ï¼Œå¼€å‘äººå‘˜è€ƒè™‘åŠŸèƒ½å®ç°çš„æ–¹æ¡ˆ ä¸å¯è¡Œæ€§ã€å½“ç„¶å¼€å‘è´Ÿè´£ä¹Ÿæ˜¯è¦å‚ä¸çš„ã€‚æµ‹è¯•äººå‘˜ä¸»è¦æ˜¯å¯¹éœ€æ±‚çš„ç†è§£æå‡ºç–‘é—®ï¼Œä»¥ä¾¿æ‰èƒ½æ ¹æ®éœ€æ±‚å†™ç”¨ä¾‹ã€‚</p>
</li>
<li><h4 id="å¼€å‘äººå‘˜åˆ¶å®šå¼€å‘è®¡åˆ’ï¼š"><a href="#å¼€å‘äººå‘˜åˆ¶å®šå¼€å‘è®¡åˆ’ï¼š" class="headerlink" title="å¼€å‘äººå‘˜åˆ¶å®šå¼€å‘è®¡åˆ’ï¼š"></a>å¼€å‘äººå‘˜åˆ¶å®šå¼€å‘è®¡åˆ’ï¼š</h4><p>å¼€å‘äººå‘˜éœ€æ±‚æ ¹æ®éœ€æ±‚åŠŸèƒ½ç‚¹è¿›è¡Œæ’æœŸã€‚ç„¶åå°†å¼€è®¡åˆ’è½¬äº¤ç»™æµ‹è¯•äººå‘˜ã€‚  </p>
</li>
<li><h4 id="æµ‹è¯•è®¡åˆ’åˆ¶å®šæµ‹è¯•è®¡åˆ’ï¼š"><a href="#æµ‹è¯•è®¡åˆ’åˆ¶å®šæµ‹è¯•è®¡åˆ’ï¼š" class="headerlink" title="æµ‹è¯•è®¡åˆ’åˆ¶å®šæµ‹è¯•è®¡åˆ’ï¼š"></a>æµ‹è¯•è®¡åˆ’åˆ¶å®šæµ‹è¯•è®¡åˆ’ï¼š</h4><p> æµ‹è¯•äººå‘˜æ ¹æ®å¼€å‘è®¡åˆ’ï¼Œå¯¹æµ‹è¯•å…·ä½“æµ‹è¯•æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å¼€å‘åŠŸèƒ½å®Œæˆåçš„æ—¶é—´ï¼Œè¿›è¡Œå‡ è½®æµ‹è¯•ç­‰ã€‚ç„¶åï¼ŒæŠŠé¡¹ ç›®çš„å¼€å‘ä¸æµ‹è¯•è®¡åˆ’æäº¤åˆ°Teambitonè¿›è¡Œä»»åŠ¡ç®¡ç†ã€‚</p>
</li>
<li><h4 id="ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š"><a href="#ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š" class="headerlink" title="ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š"></a>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š</h4><p>æ ¹æ®è¯¦ç»†çš„éœ€æ±‚æ–‡æ¡£ï¼Œå¼€å§‹è¿›è¡Œç”¨ä¾‹çš„ç¼–å†™ã€‚  </p>
</li>
<li><h4 id="ç”¨ä¾‹è¯„å®¡ï¼š"><a href="#ç”¨ä¾‹è¯„å®¡ï¼š" class="headerlink" title="ç”¨ä¾‹è¯„å®¡ï¼š"></a>ç”¨ä¾‹è¯„å®¡ï¼š</h4><p>åœ¨ç”¨ä¾‹è¿›è¡Œè¯„å®¡ä¹‹é—´ï¼Œå…ˆä»¥é‚®ä»¶å½¢å¼å°†ç”¨ä¾‹å‘é€ç»™ç›¸å…³äººå‘˜ï¼Œä»¥ä¾¿ä»–ä»¬äº‹å…ˆäº†è§£ç”¨ä¾‹å¯¹å“ªäº›åŠŸèƒ½è¿›è¡ŒéªŒè¯ä»¥åŠ éªŒè¯çš„ç»†èŠ‚ã€‚  ç„¶åï¼Œæµ‹è¯•äººå‘˜ç»„è¿›è¡Œç”¨ä¾‹è¯„å®¡ï¼Œå¼€å‘äººå‘˜å¯¹ç”¨ä¾‹ä¸å®é™…åŠŸèƒ½ä¸ç¬¦åˆæœ‰å“ªäº›ï¼Œäº§å“äººå‘˜å¯¹ä¼šé€šè¿‡ç”¨ä¾‹å¯¹åŠŸèƒ½çš„ å…·ä½“å®ç°è¿›è¡ŒæŠŠæ¡ç­‰ç­‰ã€‚  </p>
</li>
<li><h4 id="æäº¤ä»£ç ï¼š"><a href="#æäº¤ä»£ç ï¼š" class="headerlink" title="æäº¤ä»£ç ï¼š"></a>æäº¤ä»£ç ï¼š</h4><p>å¼€å‘äººå‘˜å®Œæˆæ‰€æœ‰åŠŸèƒ½åï¼Œä¼šå¯¹è‡ªå·±çš„åŠŸèƒ½è¿›è¡Œä¸€ä¸ªè‡ªæµ‹ã€‚è‡ªæµ‹å®Œæˆåæäº¤æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•ã€‚  </p>
</li>
<li><h4 id="å…·ä½“æµ‹è¯•æµç¨‹ï¼š"><a href="#å…·ä½“æµ‹è¯•æµç¨‹ï¼š" class="headerlink" title="å…·ä½“æµ‹è¯•æµç¨‹ï¼š"></a>å…·ä½“æµ‹è¯•æµç¨‹ï¼š</h4><p> å¼€å‘äººå‘˜å¯¹äºææµ‹çš„åŠŸèƒ½è¿›è¡Œæµ‹å¼ï¼Œå‘ç°çš„é—®é¢˜é€šè¿‡ç¼ºé™·ç®¡ç†å·¥å…·è¿›è¡Œåé¦ˆï¼Œå¼€å‘äººå‘˜å¯¹é—®é¢˜è¿›è¡Œä¿®å¤ï¼Œç„¶ åï¼Œå‡†å¤‡ç¬¬äºŒè½®æµ‹è¯•ã€‚  æµ‹è¯•äººå‘˜å®Œæˆç¬¬ä¸€è½®æµ‹è¯•åï¼Œéœ€è¦å†™æµ‹è¯•ç»“è®ºï¼Œå‘åˆ°ç›¸å…³äººå‘˜ã€‚ç„¶åè¿›è¡Œç¬¬äºŒè½®æµ‹è¯•ï¼Œå¹¶ä¸”å¯¹ç¬¬ä¸€è½®ä¸­å‘ç°çš„ é—®é¢˜è¿›è¡Œé‡ç‚¹å›å½’ã€‚  </p>
</li>
<li><h4 id="æµ‹è¯•é€šè¿‡ï¼š"><a href="#æµ‹è¯•é€šè¿‡ï¼š" class="headerlink" title="æµ‹è¯•é€šè¿‡ï¼š"></a>æµ‹è¯•é€šè¿‡ï¼š</h4><p>ç»è¿‡ä¸¤åˆ°ä¸‰è½®æˆ–å››è½®çš„æµ‹è¯•åï¼Œç›´åˆ°æ²¡å‘ç°æ–°çš„é—®é¢˜ï¼Œæˆ–æš‚æ—¶æ— æ³•è§£å†³ï¼Œæˆ–ä¸ç´§æ€¥çš„é—®é¢˜ã€‚é€šè¿‡ä¸Šçº§ç¡®è®¤ï¼Œå¯ ä»¥é€šè¿‡ã€‚ç¼–å†™æµ‹è¯•æŠ¥å‘Šä¸éªŒæ”¶æ–¹æ¡ˆã€‚  </p>
</li>
</ul>
<h3 id="æµ‹è¯•æ–¹æ³•ä¸æµç¨‹"><a href="#æµ‹è¯•æ–¹æ³•ä¸æµç¨‹" class="headerlink" title="æµ‹è¯•æ–¹æ³•ä¸æµç¨‹"></a>æµ‹è¯•æ–¹æ³•ä¸æµç¨‹</h3><ul>
<li><h4 id="å†’çƒŸæµ‹è¯•ï¼š"><a href="#å†’çƒŸæµ‹è¯•ï¼š" class="headerlink" title="å†’çƒŸæµ‹è¯•ï¼š"></a>å†’çƒŸæµ‹è¯•ï¼š</h4><p>æ˜¯æŒ‡åœ¨å¯¹ä¸€ä¸ªæ–°ç‰ˆæœ¬è¿›è¡Œç³»ç»Ÿå¤§è§„æ¨¡çš„æµ‹è¯•ä¹‹å‰ï¼Œå…ˆéªŒè¯ä¸€ä¸‹è½¯ä»¶çš„åŸºæœ¬åŠŸèƒ½æ˜¯å¦å®ç°ï¼Œæ˜¯å¦å…·å¤‡å¯æµ‹æ€§ã€‚  å¼•å…¥åˆ°è½¯ä»¶æµ‹è¯•ä¸­ï¼Œå°±æ˜¯æŒ‡æµ‹è¯•å°ç»„åœ¨æ­£è§„æµ‹è¯•ä¸€ä¸ªæ–°ç‰ˆæœ¬ä¹‹å‰ï¼Œå…ˆæŠ•å…¥è¾ƒå°‘çš„äººåŠ›å’Œæ—¶é—´éªŒè¯ä¸€ä¸ªè½¯ä»¶ çš„ ä¸»è¦åŠŸèƒ½ï¼Œå¦‚æœä¸»è¦åŠŸèƒ½éƒ½æ²¡æœ‰å®ç°ï¼Œåˆ™æ‰“å›å¼€å‘ç»„é‡æ–°å¼€å‘ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥èŠ‚çœå¤§é‡çš„æ—¶é—´æˆæœ¬å’ŒäººåŠ›æˆæœ¬ã€‚  </p>
</li>
<li><h4 id="åŠŸèƒ½æµ‹è¯•"><a href="#åŠŸèƒ½æµ‹è¯•" class="headerlink" title="åŠŸèƒ½æµ‹è¯•"></a>åŠŸèƒ½æµ‹è¯•</h4><p>åŠŸèƒ½æµ‹è¯•æ£€æŸ¥å®é™…çš„åŠŸèƒ½æ˜¯å¦ç¬¦åˆç”¨æˆ·çš„éœ€æ±‚ã€‚æµ‹è¯•çš„å¤§éƒ¨åˆ†å·¥ä½œä¹Ÿæ˜¯å›´ç»•è½¯ä»¶çš„åŠŸèƒ½è¿›è¡Œï¼Œè®¾è®¡è½¯ä»¶çš„ç›®çš„ä¹Ÿ å°±æ˜¯æ»¡è¶³å®¢æˆ·å¯¹å…¶åŠŸèƒ½çš„éœ€æ±‚ã€‚  åŠŸèƒ½æµ‹è¯•åˆå¯å¯ä»¥ç»†åˆ†ä¸ºå¾ˆå¤šç§ï¼šç•Œé¢æµ‹è¯•ã€é€»è¾‘åŠŸèƒ½æµ‹è¯•ã€æ˜“ç”¨æ€§æµ‹è¯•ã€å®‰è£…æµ‹è¯•ã€å…¼å®¹æ€§æµ‹è¯•ç­‰ã€‚  </p>
</li>
<li><h4 id="ç•Œé¢æµ‹è¯•ï¼š"><a href="#ç•Œé¢æµ‹è¯•ï¼š" class="headerlink" title="ç•Œé¢æµ‹è¯•ï¼š"></a>ç•Œé¢æµ‹è¯•ï¼š</h4><p>ç¡®ä¿äº§å“UIç¬¦åˆäº§å“ç»ç†å’Œè®¾è®¡å¸ˆçš„ç•Œé¢è®¾è®¡ï¼Œå¹¶ä¸”æ–‡æ¡ˆæ­£ç¡®ã€‚  é€»è¾‘åŠŸèƒ½æµ‹è¯•ï¼šæ ¹æ®éœ€æ±‚æ–‡æ¡£ä¸æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•äº§å“çš„é€»è¾‘ï¼Œç¡®ä¿é€»è¾‘æ­£ç¡®ã€‚  </p>
</li>
<li><h4 id="å…¼å®¹æ€§æµ‹è¯•ï¼š"><a href="#å…¼å®¹æ€§æµ‹è¯•ï¼š" class="headerlink" title="å…¼å®¹æ€§æµ‹è¯•ï¼š"></a>å…¼å®¹æ€§æµ‹è¯•ï¼š</h4><p>åŸæœ‰åŠŸèƒ½ä¼˜åŒ–ååœ¨æ–°æ—§ç‰ˆæœ¬ä¸Šçš„å…¼å®¹æµ‹è¯•ï¼›æœåŠ¡å·ã€PC Webã€ç»„ç»‡å·ä¸APPä¹‹é—´ç›¸äº’åŠŸèƒ½çš„äº¤äº’ä¸ å…¼å®¹æµ‹è¯•ã€‚  </p>
</li>
<li><h4 id="å›å½’æµ‹è¯•ï¼š"><a href="#å›å½’æµ‹è¯•ï¼š" class="headerlink" title="å›å½’æµ‹è¯•ï¼š"></a>å›å½’æµ‹è¯•ï¼š</h4><p>å›å½’æµ‹è¯•æ˜¯æŒ‡ä¿®æ”¹äº†æ—§ä»£ç åï¼Œé‡æ–°å®è¡Œæµ‹è¯•ä»¥ç¡®è®¤ä¿®æ”¹åæ²¡æœ‰å¼•å…¥æ–°çš„é”™è¯¯æˆ–å¯¼è‡´å…¶ä»–ä»£ç äº§ç”Ÿé”™è¯¯ã€‚  åŸæœ‰åŠŸèƒ½åœ¨æ–°ç‰ˆæœ¬ä¸Šè¿›è¡Œå›å½’æµ‹è¯•ï¼Œä¿è¯è¿è¡Œå‡†ç¡®ã€‚ç›®å‰APPå›å½’æµ‹è¯•ä¸Šæµ‹è¯•ä¸»è¦åŸºäºåº•éƒ¨å¯¼èˆªTabï¼Œå¯¹æŠ¥åå§é¦– é¡µã€é€šè®¯å½•ã€å‘å¸ƒã€å‘ç°ã€æˆ‘å››ä¸ªtabä¸‹çš„ä¸»è¦åŠŸèƒ½è¿›è¡Œå›å½’æµ‹è¯•ã€‚æœåŠ¡å·å’Œpc webä¼šè¿›è¡Œå‘å¸ƒ-æŠ¥å-ç­¾åˆ°æ•´ä¸€ä¸ª ä¸šåŠ¡æµç¨‹è¿›è¡Œå›å½’æµ‹è¯•ã€‚ç»„ç»‡å·æ˜¯è¿›è¡Œç»„ç»‡çš„ç”³è¯·-èµ„æ–™ç¼–è¾‘-å®¡æ ¸ä¼šå‘˜-å®¡æ ¸ç»„ç»‡çš„ä¸šåŠ¡æµç¨‹è¿›è¡Œæµ‹è¯•ã€‚   ç¬¬ä¸€è½®åŠŸèƒ½æµ‹è¯•ä¸­å‘ç°çš„bugå¾—åˆ°ä¿®å¤åï¼Œå¯¹è¯¥åŠŸèƒ½è¿›è¡Œç¬¬äºŒè½®æµ‹è¯•ã€‚å›å½’ä¹Ÿæ˜¯ä¸€ä¸ªå¾ªç¯çš„è¿‡ç¨‹ï¼Œå¦‚æœå›å½’çš„é—®é¢˜ é€šä¸è¿‡ï¼Œåˆ™éœ€è¦å¼€å‘äººå‘˜ä¿®æ”¹åå†æ¬¡è¿›è¡Œå›å½’ï¼Œç›´åˆ°é€šè¿‡ä¸ºæ­¢ã€‚  </p>
</li>
<li><h4 id="éªŒæ”¶æµ‹è¯•"><a href="#éªŒæ”¶æµ‹è¯•" class="headerlink" title="éªŒæ”¶æµ‹è¯•"></a>éªŒæ”¶æµ‹è¯•</h4><p>éªŒæ”¶æµ‹è¯•æ˜¯éƒ¨ç½²è½¯ä»¶ä¹‹å‰çš„æœ€åä¸€ä¸ªæµ‹è¯•æ“ä½œã€‚ä¸€èˆ¬æ˜¯å¯¹äº§å“åŠŸèƒ½ã€ç”¨æˆ·ç•Œé¢ã€æ€§èƒ½ã€ä¸šåŠ¡å…³è”æ€§çš„å…¨å±€æµ‹è¯•ï¼Œ ç¡®ä¿äº§å“è¾¾åˆ°äº§å“ç»ç†çš„éœ€æ±‚ï¼Œæ²¡æœ‰é˜»ç¢äº§å“ä½¿ç”¨çš„å¤§bugã€‚  </p>
</li>
<li><h4 id="å‡çº§æµ‹è¯•"><a href="#å‡çº§æµ‹è¯•" class="headerlink" title="å‡çº§æµ‹è¯•"></a>å‡çº§æµ‹è¯•</h4><p>ä»å†å²ç‰ˆæœ¬å‡çº§åˆ°å½“å‰æ–°ç‰ˆæœ¬çš„æµ‹è¯•ï¼Œç¡®ä¿å‡çº§åï¼Œè½¯ä»¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œé‡ç‚¹å¯¹å‡çº§åçš„æ–°åŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚ </p>
</li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul>
<li><a href="http://bbs.51testing.com/thread-1173775-1-1.html" target="_blank" rel="noopener external nofollow noreferrer">è®ºå›</a></li>
</ul>
]]></content>
      <categories>
        <category>æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
</search>
